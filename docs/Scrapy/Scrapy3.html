<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Scrapy3 - KnowledgeBase</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../Scrapy/Scrapy.html"><strong aria-hidden="true">1.</strong> Scrapy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Scrapy/Scrapy1.html"><strong aria-hidden="true">1.1.</strong> Scrapy1</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy2.html"><strong aria-hidden="true">1.2.</strong> Scrapy2</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy3.html" class="active"><strong aria-hidden="true">1.3.</strong> Scrapy3</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy4.html"><strong aria-hidden="true">1.4.</strong> Scrapy4</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy5.html"><strong aria-hidden="true">1.5.</strong> Scrapy5</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy6.html"><strong aria-hidden="true">1.6.</strong> Scrapy6</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy7.html"><strong aria-hidden="true">1.7.</strong> Scrapy7</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy8.html"><strong aria-hidden="true">1.8.</strong> Scrapy8</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy9.html"><strong aria-hidden="true">1.9.</strong> Scrapy9</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy10.html"><strong aria-hidden="true">1.10.</strong> Scrapy10</a></li></ol></li><li class="chapter-item expanded "><a href="../ThinkPython/ThinkPython.html"><strong aria-hidden="true">2.</strong> ThinkPython</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ThinkPython/part_1.html"><strong aria-hidden="true">2.1.</strong> ThinkPython1</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_2.html"><strong aria-hidden="true">2.2.</strong> ThinkPython2</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_3.html"><strong aria-hidden="true">2.3.</strong> ThinkPython3</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_4.html"><strong aria-hidden="true">2.4.</strong> ThinkPython4</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_5.html"><strong aria-hidden="true">2.5.</strong> ThinkPython5</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_6.html"><strong aria-hidden="true">2.6.</strong> ThinkPython6</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_7.html"><strong aria-hidden="true">2.7.</strong> ThinkPython7</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_8.html"><strong aria-hidden="true">2.8.</strong> ThinkPython8</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_9.html"><strong aria-hidden="true">2.9.</strong> ThinkPython9</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_10.html"><strong aria-hidden="true">2.10.</strong> ThinkPython10</a></li></ol></li><li class="chapter-item expanded "><a href="../C-sharp-docs/C-sharp-docs.html"><strong aria-hidden="true">3.</strong> C-sharp-docs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../C-sharp-docs/part1.html"><strong aria-hidden="true">3.1.</strong> Csharp1</a></li><li class="chapter-item expanded "><a href="../C-sharp-docs/part2.html"><strong aria-hidden="true">3.2.</strong> Csharp2</a></li><li class="chapter-item expanded "><a href="../C-sharp-docs/part3.html"><strong aria-hidden="true">3.3.</strong> Csharp3</a></li><li class="chapter-item expanded "><a href="../C-sharp-docs/part4.html"><strong aria-hidden="true">3.4.</strong> Csharp4</a></li><li class="chapter-item expanded "><a href="../C-sharp-docs/part5.html"><strong aria-hidden="true">3.5.</strong> Csharp5</a></li><li class="chapter-item expanded "><a href="../C-sharp-docs/part6.html"><strong aria-hidden="true">3.6.</strong> Csharp6</a></li><li class="chapter-item expanded "><a href="../C-sharp-docs/part7.html"><strong aria-hidden="true">3.7.</strong> Csharp7</a></li><li class="chapter-item expanded "><a href="../C-sharp-docs/part8.html"><strong aria-hidden="true">3.8.</strong> Csharp8</a></li><li class="chapter-item expanded "><a href="../C-sharp-docs/part9.html"><strong aria-hidden="true">3.9.</strong> Csharp9</a></li><li class="chapter-item expanded "><a href="../C-sharp-docs/part10.html"><strong aria-hidden="true">3.10.</strong> Csharp10</a></li></ol></li><li class="chapter-item expanded "><a href="../php-docs/php-docs.html"><strong aria-hidden="true">4.</strong> php-docs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../php-docs/part1.html"><strong aria-hidden="true">4.1.</strong> php1</a></li><li class="chapter-item expanded "><a href="../php-docs/part2.html"><strong aria-hidden="true">4.2.</strong> php2</a></li><li class="chapter-item expanded "><a href="../php-docs/part3.html"><strong aria-hidden="true">4.3.</strong> php3</a></li><li class="chapter-item expanded "><a href="../php-docs/part4.html"><strong aria-hidden="true">4.4.</strong> php4</a></li><li class="chapter-item expanded "><a href="../php-docs/part5.html"><strong aria-hidden="true">4.5.</strong> php5</a></li><li class="chapter-item expanded "><a href="../php-docs/part6.html"><strong aria-hidden="true">4.6.</strong> php6</a></li><li class="chapter-item expanded "><a href="../php-docs/part7.html"><strong aria-hidden="true">4.7.</strong> php7</a></li><li class="chapter-item expanded "><a href="../php-docs/part8.html"><strong aria-hidden="true">4.8.</strong> php8</a></li><li class="chapter-item expanded "><a href="../php-docs/part9.html"><strong aria-hidden="true">4.9.</strong> php9</a></li><li class="chapter-item expanded "><a href="../php-docs/part10.html"><strong aria-hidden="true">4.10.</strong> php10</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">KnowledgeBase</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>


                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <pre><code>    :   [bool](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference
        .external}
</code></pre>
<p>:::
:::</p>
<p>::: {#post-processing .section}
[]{#id2}</p>
<h4 id="post-processingheaderlink"><a class="header" href="#post-processingheaderlink">Post-Processing<a href="#post-processing" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>::: versionadded
[New in version 2.6.0.]{.versionmodified .added}
:::</p>
<p>Scrapy provides an option to activate plugins to post-process feeds
before they are exported to feed storages. In addition to using
<a href="#builtin-plugins">[builtin plugins]{.std .std-ref}</a>{.hoverxref .tooltip
.reference .internal}, you can create your own <a href="#custom-plugins">[plugins]{.std
.std-ref}</a>{.hoverxref .tooltip .reference .internal}.</p>
<p>These plugins can be activated through the [<code>postprocessing</code>{.docutils
.literal .notranslate}]{.pre} option of a feed. The option must be
passed a list of post-processing plugins in the order you want the feed
to be processed. These plugins can be declared either as an import
string or with the imported class of the plugin. Parameters to plugins
can be passed through the feed options. See <a href="#feed-options">[feed options]{.std
.std-ref}</a>{.hoverxref .tooltip .reference .internal} for
examples.</p>
<p>::: {#built-in-plugins .section}
[]{#builtin-plugins}</p>
<h5 id="built-in-pluginsheaderlink"><a class="header" href="#built-in-pluginsheaderlink">Built-in Plugins<a href="#built-in-plugins" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.extensions.postprocessing.]{.pre}]{.sig-prename .descclassname}[[GzipPlugin]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[file]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.BinaryIO" title="(in Python v3.12)">[BinaryIO]{.pre}</a>{.reference .external}]{.n}</em>, <em>[[feed_options]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.12)">[Dict]{.pre}</a>{.reference .external}[[[]{.pre}]{.p}<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">[str]{.pre}</a>{.reference .external}[[,]{.pre}]{.p}[ ]{.w}<a href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)">[Any]{.pre}</a>{.reference .external}[[]]{.pre}]{.p}]{.n}</em>[)]{.sig-paren}<a href="_modules/scrapy/extensions/postprocessing.html#GzipPlugin">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.extensions.postprocessing.GzipPlugin" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Compresses received data using
<a href="https://en.wikipedia.org/wiki/Gzip">gzip</a>{.reference .external}.</p>
<pre><code>Accepted [`feed_options`{.docutils .literal .notranslate}]{.pre}
parameters:

-   gzip_compresslevel

-   gzip_mtime

-   gzip_filename

See [[`gzip.GzipFile`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](https://docs.python.org/3/library/gzip.html#gzip.GzipFile &quot;(in Python v3.12)&quot;){.reference
.external} for more info about parameters.
</code></pre>
<pre><code class="language-{=html}">&lt;!-- --&gt;
</code></pre>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.extensions.postprocessing.]{.pre}]{.sig-prename .descclassname}[[LZMAPlugin]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[file]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.BinaryIO" title="(in Python v3.12)">[BinaryIO]{.pre}</a>{.reference .external}]{.n}</em>, <em>[[feed_options]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.12)">[Dict]{.pre}</a>{.reference .external}[[[]{.pre}]{.p}<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">[str]{.pre}</a>{.reference .external}[[,]{.pre}]{.p}[ ]{.w}<a href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)">[Any]{.pre}</a>{.reference .external}[[]]{.pre}]{.p}]{.n}</em>[)]{.sig-paren}<a href="_modules/scrapy/extensions/postprocessing.html#LZMAPlugin">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.extensions.postprocessing.LZMAPlugin" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Compresses received data using
<a href="https://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Markov_chain_algorithm">lzma</a>{.reference
.external}.</p>
<pre><code>Accepted [`feed_options`{.docutils .literal .notranslate}]{.pre}
parameters:

-   lzma_format

-   lzma_check

-   lzma_preset

-   lzma_filters

::: {.admonition .note}
Note

[`lzma_filters`{.docutils .literal .notranslate}]{.pre} cannot be
used in pypy version 7.3.1 and older.
:::

See [[`lzma.LZMAFile`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](https://docs.python.org/3/library/lzma.html#lzma.LZMAFile &quot;(in Python v3.12)&quot;){.reference
.external} for more info about parameters.
</code></pre>
<pre><code class="language-{=html}">&lt;!-- --&gt;
</code></pre>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.extensions.postprocessing.]{.pre}]{.sig-prename .descclassname}[[Bz2Plugin]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[file]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.BinaryIO" title="(in Python v3.12)">[BinaryIO]{.pre}</a>{.reference .external}]{.n}</em>, <em>[[feed_options]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.12)">[Dict]{.pre}</a>{.reference .external}[[[]{.pre}]{.p}<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">[str]{.pre}</a>{.reference .external}[[,]{.pre}]{.p}[ ]{.w}<a href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)">[Any]{.pre}</a>{.reference .external}[[]]{.pre}]{.p}]{.n}</em>[)]{.sig-paren}<a href="_modules/scrapy/extensions/postprocessing.html#Bz2Plugin">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.extensions.postprocessing.Bz2Plugin" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Compresses received data using
<a href="https://en.wikipedia.org/wiki/Bzip2">bz2</a>{.reference .external}.</p>
<pre><code>Accepted [`feed_options`{.docutils .literal .notranslate}]{.pre}
parameters:

-   bz2_compresslevel

See [[`bz2.BZ2File`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](https://docs.python.org/3/library/bz2.html#bz2.BZ2File &quot;(in Python v3.12)&quot;){.reference
.external} for more info about parameters.
</code></pre>
<p>:::</p>
<p>::: {#custom-plugins .section}
[]{#id3}</p>
<h5 id="custom-pluginsheaderlink"><a class="header" href="#custom-pluginsheaderlink">Custom Plugins<a href="#custom-plugins" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Each plugin is a class that must implement the following methods:</p>
<p>[[__init__]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[self]{.pre}]{.n}</em>, <em>[[file]{.pre}]{.n}</em>, <em>[[feed_options]{.pre}]{.n}</em>[)]{.sig-paren}<a href="#init__" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Initialize the plugin.</p>
<pre><code>Parameters

:   -   **file** -- file-like object having at least the write, tell
        and close methods implemented

    -   **feed_options** ([[`dict`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
        .external}) -- feed-specific [[options]{.std
        .std-ref}](#feed-options){.hoverxref .tooltip .reference
        .internal}
</code></pre>
<pre><code class="language-{=html}">&lt;!-- --&gt;
</code></pre>
<p>[[write]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[self]{.pre}]{.n}</em>, <em>[[data]{.pre}]{.n}</em>[)]{.sig-paren}<a href="#write" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Process and write data (<a href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)">[<code>bytes</code>{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.external} or <a href="https://docs.python.org/3/library/stdtypes.html#memoryview" title="(in Python v3.12)">[<code>memoryview</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.external}) into the plugin's target file. It must return number of
bytes written.</p>
<pre><code class="language-{=html}">&lt;!-- --&gt;
</code></pre>
<p>[[close]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[self]{.pre}]{.n}</em>[)]{.sig-paren}<a href="#close" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Close the target file object.</p>
<p>To pass a parameter to your plugin, use <a href="#feed-options">[feed options]{.std
.std-ref}</a>{.hoverxref .tooltip .reference .internal}. You
can then access those parameters from the [<code>__init__</code>{.docutils .literal
.notranslate}]{.pre} method of your plugin.
:::
:::</p>
<p>::: {#settings .section}</p>
<h4 id="settingsheaderlink"><a class="header" href="#settingsheaderlink">Settings<a href="#settings" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>These are the settings used for configuring the feed exports:</p>
<ul>
<li>
<p><a href="#std-setting-FEEDS">[<code>FEEDS</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal} (mandatory)</p>
</li>
<li>
<p><a href="#std-setting-FEED_EXPORT_ENCODING">[<code>FEED_EXPORT_ENCODING</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-setting-FEED_STORE_EMPTY">[<code>FEED_STORE_EMPTY</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-setting-FEED_EXPORT_FIELDS">[<code>FEED_EXPORT_FIELDS</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-setting-FEED_EXPORT_INDENT">[<code>FEED_EXPORT_INDENT</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-setting-FEED_STORAGES">[<code>FEED_STORAGES</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-setting-FEED_STORAGE_FTP_ACTIVE">[<code>FEED_STORAGE_FTP_ACTIVE</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-setting-FEED_STORAGE_S3_ACL">[<code>FEED_STORAGE_S3_ACL</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-setting-FEED_EXPORTERS">[<code>FEED_EXPORTERS</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-setting-FEED_EXPORT_BATCH_ITEM_COUNT">[<code>FEED_EXPORT_BATCH_ITEM_COUNT</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
</ul>
<p>::: {#feeds .section}
[]{#std-setting-FEEDS}</p>
<h5 id="feedsheaderlink"><a class="header" href="#feedsheaderlink">FEEDS<a href="#feeds" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>::: versionadded
[New in version 2.1.]{.versionmodified .added}
:::</p>
<p>Default: [<code>{}</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>A dictionary in which every key is a feed URI (or a
<a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)">[<code>pathlib.Path</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.external} object) and each value is a nested dictionary containing
configuration parameters for the specific feed.</p>
<p>This setting is required for enabling the feed export feature.</p>
<p>See <a href="#topics-feed-storage-backends">[Storage backends]{.std
.std-ref}</a>{.hoverxref .tooltip .reference
.internal} for supported URI schemes.</p>
<p>For instance:</p>
<p>::: {.highlight-default .notranslate}
::: highlight
{
'items.json': {
'format': 'json',
'encoding': 'utf8',
'store_empty': False,
'item_classes': [MyItemClass1, 'myproject.items.MyItemClass2'],
'fields': None,
'indent': 4,
'item_export_kwargs': {
'export_empty_fields': True,
},
},
'/home/user/documents/items.xml': {
'format': 'xml',
'fields': ['name', 'price'],
'item_filter': MyCustomFilter1,
'encoding': 'latin1',
'indent': 8,
},
pathlib.Path('items.csv.gz'): {
'format': 'csv',
'fields': ['price', 'name'],
'item_filter': 'myproject.filters.MyCustomFilter2',
'postprocessing': [MyPlugin1, 'scrapy.extensions.postprocessing.GzipPlugin'],
'gzip_compresslevel': 5,
},
}
:::
:::</p>
<p>The following is a list of the accepted keys and the setting that is
used as a fallback value if that key is not provided for a specific feed
definition:</p>
<ul>
<li>
<p>[<code>format</code>{.docutils .literal .notranslate}]{.pre}: the
<a href="#topics-feed-format">[serialization format]{.std
.std-ref}</a>{.hoverxref .tooltip .reference
.internal}.</p>
<p>This setting is mandatory, there is no fallback value.</p>
</li>
<li>
<p>[<code>batch_item_count</code>{.docutils .literal .notranslate}]{.pre}: falls
back to <a href="#std-setting-FEED_EXPORT_BATCH_ITEM_COUNT">[<code>FEED_EXPORT_BATCH_ITEM_COUNT</code>{.xref .std .std-setting
.docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.</p>
<p>::: versionadded
[New in version 2.3.0.]{.versionmodified .added}
:::</p>
</li>
<li>
<p>[<code>encoding</code>{.docutils .literal .notranslate}]{.pre}: falls back to
<a href="#std-setting-FEED_EXPORT_ENCODING">[<code>FEED_EXPORT_ENCODING</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.</p>
</li>
<li>
<p>[<code>fields</code>{.docutils .literal .notranslate}]{.pre}: falls back to
<a href="#std-setting-FEED_EXPORT_FIELDS">[<code>FEED_EXPORT_FIELDS</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.</p>
</li>
<li>
<p>[<code>item_classes</code>{.docutils .literal .notranslate}]{.pre}: list of
<a href="index.html#topics-items">[item classes]{.std .std-ref}</a>{.hoverxref
.tooltip .reference .internal} to export.</p>
<p>If undefined or empty, all items are exported.</p>
<p>::: versionadded
[New in version 2.6.0.]{.versionmodified .added}
:::</p>
</li>
<li>
<p>[<code>item_filter</code>{.docutils .literal .notranslate}]{.pre}: a <a href="#item-filter">[filter
class]{.std .std-ref}</a>{.hoverxref .tooltip .reference
.internal} to filter items to export.</p>
<p><a href="#scrapy.extensions.feedexport.ItemFilter" title="scrapy.extensions.feedexport.ItemFilter">[<code>ItemFilter</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} is used be default.</p>
<p>::: versionadded
[New in version 2.6.0.]{.versionmodified .added}
:::</p>
</li>
<li>
<p>[<code>indent</code>{.docutils .literal .notranslate}]{.pre}: falls back to
<a href="#std-setting-FEED_EXPORT_INDENT">[<code>FEED_EXPORT_INDENT</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.</p>
</li>
<li>
<p>[<code>item_export_kwargs</code>{.docutils .literal .notranslate}]{.pre}:
<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">[<code>dict</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.external} with keyword arguments for the corresponding <a href="index.html#topics-exporters">[item
exporter class]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}.</p>
<p>::: versionadded
[New in version 2.4.0.]{.versionmodified .added}
:::</p>
</li>
<li>
<p>[<code>overwrite</code>{.docutils .literal .notranslate}]{.pre}: whether to
overwrite the file if it already exists ([<code>True</code>{.docutils .literal
.notranslate}]{.pre}) or append to its content ([<code>False</code>{.docutils
.literal .notranslate}]{.pre}).</p>
<p>The default value depends on the <a href="#topics-feed-storage-backends">[storage backend]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}:</p>
<ul>
<li>
<p><a href="#topics-feed-storage-fs">[Local filesystem]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}: [<code>False</code>{.docutils .literal
.notranslate}]{.pre}</p>
</li>
<li>
<p><a href="#topics-feed-storage-ftp">[FTP]{.std .std-ref}</a>{.hoverxref
.tooltip .reference .internal}: [<code>True</code>{.docutils .literal
.notranslate}]{.pre}</p>
<p>::: {.admonition .note}
Note</p>
<p>Some FTP servers may not support appending to files (the
[<code>APPE</code>{.docutils .literal .notranslate}]{.pre} FTP command).
:::</p>
</li>
<li>
<p><a href="#topics-feed-storage-s3">[S3]{.std .std-ref}</a>{.hoverxref
.tooltip .reference .internal}: [<code>True</code>{.docutils .literal
.notranslate}]{.pre} (appending <a href="https://forums.aws.amazon.com/message.jspa?messageID=540395">is not
supported</a>{.reference
.external})</p>
</li>
<li>
<p><a href="#topics-feed-storage-gcs">[Google Cloud Storage (GCS)]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}: [<code>True</code>{.docutils .literal
.notranslate}]{.pre} (appending is not supported)</p>
</li>
<li>
<p><a href="#topics-feed-storage-stdout">[Standard output]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}: [<code>False</code>{.docutils .literal
.notranslate}]{.pre} (overwriting is not supported)</p>
</li>
</ul>
<p>::: versionadded
[New in version 2.4.0.]{.versionmodified .added}
:::</p>
</li>
<li>
<p>[<code>store_empty</code>{.docutils .literal .notranslate}]{.pre}: falls back
to <a href="#std-setting-FEED_STORE_EMPTY">[<code>FEED_STORE_EMPTY</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.</p>
</li>
<li>
<p>[<code>uri_params</code>{.docutils .literal .notranslate}]{.pre}: falls back to
<a href="#std-setting-FEED_URI_PARAMS">[<code>FEED_URI_PARAMS</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.</p>
</li>
<li>
<p>[<code>postprocessing</code>{.docutils .literal .notranslate}]{.pre}: list of
<a href="#post-processing">[plugins]{.std .std-ref}</a>{.hoverxref .tooltip
.reference .internal} to use for post-processing.</p>
<p>The plugins will be used in the order of the list passed.</p>
<p>::: versionadded
[New in version 2.6.0.]{.versionmodified .added}
:::
:::</p>
</li>
</ul>
<p>::: {#feed-export-encoding .section}
[]{#std-setting-FEED_EXPORT_ENCODING}</p>
<h5 id="feed_export_encodingheaderlink"><a class="header" href="#feed_export_encodingheaderlink">FEED_EXPORT_ENCODING<a href="#feed-export-encoding" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The encoding to be used for the feed.</p>
<p>If unset or set to [<code>None</code>{.docutils .literal .notranslate}]{.pre}
(default) it uses UTF-8 for everything except JSON output, which uses
safe numeric encoding ([<code>\uXXXX</code>{.docutils .literal .notranslate}]{.pre}
sequences) for historic reasons.</p>
<p>Use [<code>utf-8</code>{.docutils .literal .notranslate}]{.pre} if you want UTF-8
for JSON too.</p>
<p>::: versionchanged
[Changed in version 2.8: ]{.versionmodified .changed}The
<a href="index.html#std-command-startproject">[<code>startproject</code>{.xref .std .std-command .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} command now sets this setting to
[<code>utf-8</code>{.docutils .literal .notranslate}]{.pre} in the generated
[<code>settings.py</code>{.docutils .literal .notranslate}]{.pre} file.
:::
:::</p>
<p>::: {#feed-export-fields .section}
[]{#std-setting-FEED_EXPORT_FIELDS}</p>
<h5 id="feed_export_fieldsheaderlink"><a class="header" href="#feed_export_fieldsheaderlink">FEED_EXPORT_FIELDS<a href="#feed-export-fields" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Use the [<code>FEED_EXPORT_FIELDS</code>{.docutils .literal .notranslate}]{.pre}
setting to define the fields to export, their order and their output
names. See <a href="index.html#scrapy.exporters.BaseItemExporter.fields_to_export" title="scrapy.exporters.BaseItemExporter.fields_to_export">[<code>BaseItemExporter.fields_to_export</code>{.xref .py .py-attr
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} for more information.
:::</p>
<p>::: {#feed-export-indent .section}
[]{#std-setting-FEED_EXPORT_INDENT}</p>
<h5 id="feed_export_indentheaderlink"><a class="header" href="#feed_export_indentheaderlink">FEED_EXPORT_INDENT<a href="#feed-export-indent" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>0</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Amount of spaces used to indent the output on each level. If
[<code>FEED_EXPORT_INDENT</code>{.docutils .literal .notranslate}]{.pre} is a
non-negative integer, then array elements and object members will be
pretty-printed with that indent level. An indent level of [<code>0</code>{.docutils
.literal .notranslate}]{.pre} (the default), or negative, will put each
item on a new line. [<code>None</code>{.docutils .literal .notranslate}]{.pre}
selects the most compact representation.</p>
<p>Currently implemented only by <a href="index.html#scrapy.exporters.JsonItemExporter" title="scrapy.exporters.JsonItemExporter">[<code>JsonItemExporter</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} and <a href="index.html#scrapy.exporters.XmlItemExporter" title="scrapy.exporters.XmlItemExporter">[<code>XmlItemExporter</code>{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal}, i.e. when you are exporting to [<code>.json</code>{.docutils .literal
.notranslate}]{.pre} or [<code>.xml</code>{.docutils .literal .notranslate}]{.pre}.
:::</p>
<p>::: {#feed-store-empty .section}
[]{#std-setting-FEED_STORE_EMPTY}</p>
<h5 id="feed_store_emptyheaderlink"><a class="header" href="#feed_store_emptyheaderlink">FEED_STORE_EMPTY<a href="#feed-store-empty" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>True</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Whether to export empty feeds (i.e. feeds with no items). If
[<code>False</code>{.docutils .literal .notranslate}]{.pre}, and there are no items
to export, no new files are created and existing files are not modified,
even if the <a href="#feed-options">[overwrite feed option]{.std
.std-ref}</a>{.hoverxref .tooltip .reference .internal} is
enabled.
:::</p>
<p>::: {#feed-storages .section}
[]{#std-setting-FEED_STORAGES}</p>
<h5 id="feed_storagesheaderlink"><a class="header" href="#feed_storagesheaderlink">FEED_STORAGES<a href="#feed-storages" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>{}</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>A dict containing additional feed storage backends supported by your
project. The keys are URI schemes and the values are paths to storage
classes.
:::</p>
<p>::: {#feed-storage-ftp-active .section}
[]{#std-setting-FEED_STORAGE_FTP_ACTIVE}</p>
<h5 id="feed_storage_ftp_activeheaderlink"><a class="header" href="#feed_storage_ftp_activeheaderlink">FEED_STORAGE_FTP_ACTIVE<a href="#feed-storage-ftp-active" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>False</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Whether to use the active connection mode when exporting feeds to an FTP
server ([<code>True</code>{.docutils .literal .notranslate}]{.pre}) or use the
passive connection mode instead ([<code>False</code>{.docutils .literal
.notranslate}]{.pre}, default).</p>
<p>For information about FTP connection modes, see <a href="https://stackoverflow.com/a/1699163">What is the difference
between active and passive
FTP?</a>{.reference .external}.
:::</p>
<p>::: {#feed-storage-s3-acl .section}
[]{#std-setting-FEED_STORAGE_S3_ACL}</p>
<h5 id="feed_storage_s3_aclheaderlink"><a class="header" href="#feed_storage_s3_aclheaderlink">FEED_STORAGE_S3_ACL<a href="#feed-storage-s3-acl" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>''</code>{.docutils .literal .notranslate}]{.pre} (empty string)</p>
<p>A string containing a custom ACL for feeds exported to Amazon S3 by your
project.</p>
<p>For a complete list of available values, access the <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html#canned-acl">Canned
ACL</a>{.reference
.external} section on Amazon S3 docs.
:::</p>
<p>::: {#feed-storages-base .section}
[]{#std-setting-FEED_STORAGES_BASE}</p>
<h5 id="feed_storages_baseheaderlink"><a class="header" href="#feed_storages_baseheaderlink">FEED_STORAGES_BASE<a href="#feed-storages-base" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
{
&quot;&quot;: &quot;scrapy.extensions.feedexport.FileFeedStorage&quot;,
&quot;file&quot;: &quot;scrapy.extensions.feedexport.FileFeedStorage&quot;,
&quot;stdout&quot;: &quot;scrapy.extensions.feedexport.StdoutFeedStorage&quot;,
&quot;s3&quot;: &quot;scrapy.extensions.feedexport.S3FeedStorage&quot;,
&quot;ftp&quot;: &quot;scrapy.extensions.feedexport.FTPFeedStorage&quot;,
}
:::
:::</p>
<p>A dict containing the built-in feed storage backends supported by
Scrapy. You can disable any of these backends by assigning
[<code>None</code>{.docutils .literal .notranslate}]{.pre} to their URI scheme in
<a href="#std-setting-FEED_STORAGES">[<code>FEED_STORAGES</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal}. E.g., to disable the built-in FTP storage backend
(without replacement), place this in your [<code>settings.py</code>{.docutils
.literal .notranslate}]{.pre}:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
FEED_STORAGES = {
&quot;ftp&quot;: None,
}
:::
:::
:::</p>
<p>::: {#feed-exporters .section}
[]{#std-setting-FEED_EXPORTERS}</p>
<h5 id="feed_exportersheaderlink"><a class="header" href="#feed_exportersheaderlink">FEED_EXPORTERS<a href="#feed-exporters" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>{}</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>A dict containing additional exporters supported by your project. The
keys are serialization formats and the values are paths to <a href="index.html#topics-exporters">[Item
exporter]{.std .std-ref}</a>{.hoverxref
.tooltip .reference .internal} classes.
:::</p>
<p>::: {#feed-exporters-base .section}
[]{#std-setting-FEED_EXPORTERS_BASE}</p>
<h5 id="feed_exporters_baseheaderlink"><a class="header" href="#feed_exporters_baseheaderlink">FEED_EXPORTERS_BASE<a href="#feed-exporters-base" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
{
&quot;json&quot;: &quot;scrapy.exporters.JsonItemExporter&quot;,
&quot;jsonlines&quot;: &quot;scrapy.exporters.JsonLinesItemExporter&quot;,
&quot;jsonl&quot;: &quot;scrapy.exporters.JsonLinesItemExporter&quot;,
&quot;jl&quot;: &quot;scrapy.exporters.JsonLinesItemExporter&quot;,
&quot;csv&quot;: &quot;scrapy.exporters.CsvItemExporter&quot;,
&quot;xml&quot;: &quot;scrapy.exporters.XmlItemExporter&quot;,
&quot;marshal&quot;: &quot;scrapy.exporters.MarshalItemExporter&quot;,
&quot;pickle&quot;: &quot;scrapy.exporters.PickleItemExporter&quot;,
}
:::
:::</p>
<p>A dict containing the built-in feed exporters supported by Scrapy. You
can disable any of these exporters by assigning [<code>None</code>{.docutils
.literal .notranslate}]{.pre} to their serialization format in
<a href="#std-setting-FEED_EXPORTERS">[<code>FEED_EXPORTERS</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal}. E.g., to disable the built-in CSV exporter
(without replacement), place this in your [<code>settings.py</code>{.docutils
.literal .notranslate}]{.pre}:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
FEED_EXPORTERS = {
&quot;csv&quot;: None,
}
:::
:::
:::</p>
<p>::: {#feed-export-batch-item-count .section}
[]{#std-setting-FEED_EXPORT_BATCH_ITEM_COUNT}</p>
<h5 id="feed_export_batch_item_countheaderlink"><a class="header" href="#feed_export_batch_item_countheaderlink">FEED_EXPORT_BATCH_ITEM_COUNT<a href="#feed-export-batch-item-count" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>::: versionadded
[New in version 2.3.0.]{.versionmodified .added}
:::</p>
<p>Default: [<code>0</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>If assigned an integer number higher than [<code>0</code>{.docutils .literal
.notranslate}]{.pre}, Scrapy generates multiple output files storing up
to the specified number of items in each output file.</p>
<p>When generating multiple output files, you must use at least one of the
following placeholders in the feed URI to indicate how the different
output file names are generated:</p>
<ul>
<li>
<p>[<code>%(batch_time)s</code>{.docutils .literal .notranslate}]{.pre} - gets
replaced by a timestamp when the feed is being created (e.g.
[<code>2020-03-28T14-45-08.237134</code>{.docutils .literal
.notranslate}]{.pre})</p>
</li>
<li>
<p>[<code>%(batch_id)d</code>{.docutils .literal .notranslate}]{.pre} - gets
replaced by the 1-based sequence number of the batch.</p>
<p>Use <a href="https://docs.python.org/3/library/stdtypes.html#old-string-formatting" title="(in Python v3.12)">[printf-style string formatting]{.xref .std
.std-ref}</a>{.reference
.external} to alter the number format. For example, to make the
batch ID a 5-digit number by introducing leading zeroes as needed,
use [<code>%(batch_id)05d</code>{.docutils .literal .notranslate}]{.pre} (e.g.
[<code>3</code>{.docutils .literal .notranslate}]{.pre} becomes
[<code>00003</code>{.docutils .literal .notranslate}]{.pre}, [<code>123</code>{.docutils
.literal .notranslate}]{.pre} becomes [<code>00123</code>{.docutils .literal
.notranslate}]{.pre}).</p>
</li>
</ul>
<p>For instance, if your settings include:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
FEED_EXPORT_BATCH_ITEM_COUNT = 100
:::
:::</p>
<p>And your <a href="index.html#std-command-crawl">[<code>crawl</code>{.xref .std .std-command .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal} command line is:</p>
<p>::: {.highlight-default .notranslate}
::: highlight
scrapy crawl spidername -o &quot;dirname/%(batch_id)d-filename%(batch_time)s.json&quot;
:::
:::</p>
<p>The command line above can generate a directory tree like:</p>
<p>::: {.highlight-default .notranslate}
::: highlight
-&gt;projectname
--&gt;dirname
---&gt;1-filename2020-03-28T14-45-08.237134.json
---&gt;2-filename2020-03-28T14-45-09.148903.json
---&gt;3-filename2020-03-28T14-45-10.046092.json
:::
:::</p>
<p>Where the first and second files contain exactly 100 items. The last one
contains 100 items or fewer.
:::</p>
<p>::: {#feed-uri-params .section}
[]{#std-setting-FEED_URI_PARAMS}</p>
<h5 id="feed_uri_paramsheaderlink"><a class="header" href="#feed_uri_paramsheaderlink">FEED_URI_PARAMS<a href="#feed-uri-params" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>A string with the import path of a function to set the parameters to
apply with <a href="https://docs.python.org/3/library/stdtypes.html#old-string-formatting" title="(in Python v3.12)">[printf-style string formatting]{.xref .std
.std-ref}</a>{.reference
.external} to the feed URI.</p>
<p>The function signature should be as follows:</p>
<p>[[scrapy.extensions.feedexport.]{.pre}]{.sig-prename .descclassname}[[uri_params]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[params]{.pre}]{.n}</em>, <em>[[spider]{.pre}]{.n}</em>[)]{.sig-paren}<a href="#scrapy.extensions.feedexport.uri_params" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Return a <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">[<code>dict</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.external} of key-value pairs to apply to the feed URI using
<a href="https://docs.python.org/3/library/stdtypes.html#old-string-formatting" title="(in Python v3.12)">[printf-style string formatting]{.xref .std
.std-ref}</a>{.reference
.external}.</p>
<pre><code>Parameters

:   -   **params**
        ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
        .external}) --

        default key-value pairs

        Specifically:

        -   [`batch_id`{.docutils .literal .notranslate}]{.pre}: ID
            of the file batch. See
            [[`FEED_EXPORT_BATCH_ITEM_COUNT`{.xref .std .std-setting
            .docutils .literal
            .notranslate}]{.pre}](#std-setting-FEED_EXPORT_BATCH_ITEM_COUNT){.hoverxref
            .tooltip .reference .internal}.

            If [[`FEED_EXPORT_BATCH_ITEM_COUNT`{.xref .std
            .std-setting .docutils .literal
            .notranslate}]{.pre}](#std-setting-FEED_EXPORT_BATCH_ITEM_COUNT){.hoverxref
            .tooltip .reference .internal} is [`0`{.docutils
            .literal .notranslate}]{.pre}, [`batch_id`{.docutils
            .literal .notranslate}]{.pre} is always [`1`{.docutils
            .literal .notranslate}]{.pre}.

            ::: versionadded
            [New in version 2.3.0.]{.versionmodified .added}
            :::

        -   [`batch_time`{.docutils .literal .notranslate}]{.pre}:
            UTC date and time, in ISO format with [`:`{.docutils
            .literal .notranslate}]{.pre} replaced with
            [`-`{.docutils .literal .notranslate}]{.pre}.

            See [[`FEED_EXPORT_BATCH_ITEM_COUNT`{.xref .std
            .std-setting .docutils .literal
            .notranslate}]{.pre}](#std-setting-FEED_EXPORT_BATCH_ITEM_COUNT){.hoverxref
            .tooltip .reference .internal}.

            ::: versionadded
            [New in version 2.3.0.]{.versionmodified .added}
            :::

        -   [`time`{.docutils .literal .notranslate}]{.pre}:
            [`batch_time`{.docutils .literal .notranslate}]{.pre},
            with microseconds set to [`0`{.docutils .literal
            .notranslate}]{.pre}.

    -   **spider**
        ([*scrapy.Spider*](index.html#scrapy.Spider &quot;scrapy.Spider&quot;){.reference
        .internal}) -- source spider of the feed items

::: {.admonition .caution}
Caution

The function should return a new dictionary, modifying the received
[`params`{.docutils .literal .notranslate}]{.pre} in-place is
deprecated.
:::
</code></pre>
<p>For example, to include the <a href="index.html#scrapy.Spider.name" title="scrapy.Spider.name">[<code>name</code>{.xref .py .py-attr .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal} of the source spider in the feed URI:</p>
<ol>
<li>
<p>Define the following function somewhere in your project:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
# myproject/utils.py
def uri_params(params, spider):
return {**params, &quot;spider_name&quot;: spider.name}
:::
:::</p>
</li>
<li>
<p>Point <a href="#std-setting-FEED_URI_PARAMS">[<code>FEED_URI_PARAMS</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} to that function in your settings:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
# myproject/settings.py
FEED_URI_PARAMS = &quot;myproject.utils.uri_params&quot;
:::
:::</p>
</li>
<li>
<p>Use [<code>%(spider_name)s</code>{.docutils .literal .notranslate}]{.pre} in
your feed URI:</p>
<p>::: {.highlight-default .notranslate}
::: highlight
scrapy crawl &lt;spider_name&gt; -o &quot;%(spider_name)s.jsonl&quot;
:::
:::
:::
:::
:::</p>
</li>
</ol>
<p>[]{#document-topics/request-response}</p>
<p>::: {#module-scrapy.http .section}
[]{#requests-and-responses}[]{#topics-request-response}</p>
<h3 id="requests-and-responsesheaderlink"><a class="header" href="#requests-and-responsesheaderlink">Requests and Responses<a href="#module-scrapy.http" title="Permalink to this heading">¶</a>{.headerlink}</a></h3>
<p>Scrapy uses <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} and <a href="#scrapy.http.Response" title="scrapy.http.Response">[<code>Response</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} objects for crawling web sites.</p>
<p>Typically, <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} objects are generated in the spiders and pass across the
system until they reach the Downloader, which executes the request and
returns a <a href="#scrapy.http.Response" title="scrapy.http.Response">[<code>Response</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} object which travels back to the spider that issued the
request.</p>
<p>Both <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} and <a href="#scrapy.http.Response" title="scrapy.http.Response">[<code>Response</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} classes have subclasses which add functionality not required
in the base classes. These are described below in <a href="#topics-request-response-ref-request-subclasses">[Request
subclasses]{.std
.std-ref}</a>{.hoverxref
.tooltip .reference .internal} and <a href="#topics-request-response-ref-response-subclasses">[Response subclasses]{.std
.std-ref}</a>{.hoverxref
.tooltip .reference .internal}.</p>
<p>::: {#request-objects .section}</p>
<h4 id="request-objectsheaderlink"><a class="header" href="#request-objectsheaderlink">Request objects<a href="#request-objects" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.http.]{.pre}]{.sig-prename .descclassname}[[Request]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[*]{.pre}]{.o}[[args]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)">[Any]{.pre}</a>{.reference .external}]{.n}</em>, <em>[[**]{.pre}]{.o}[[kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)">[Any]{.pre}</a>{.reference .external}]{.n}</em>[)]{.sig-paren}<a href="_modules/scrapy/http/request.html#Request">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.http.Request" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Represents an HTTP request, which is usually generated in a Spider
and executed by the Downloader, thus generating a <a href="#scrapy.http.Response" title="scrapy.http.Response">[<code>Response</code>{.xref
.py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}.</p>
<pre><code>Parameters

:   -   **url**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external}) --

        the URL of this request

        If the URL is invalid, a [[`ValueError`{.xref .py .py-exc
        .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/exceptions.html#ValueError &quot;(in Python v3.12)&quot;){.reference
        .external} exception is raised.

    -   **callback**
        ([*collections.abc.Callable*](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable &quot;(in Python v3.12)&quot;){.reference
        .external}) --

        the function that will be called with the response of this
        request (once it's downloaded) as its first parameter.

        In addition to a function, the following values are
        supported:

        -   [`None`{.docutils .literal .notranslate}]{.pre}
            (default), which indicates that the spider's
            [[`parse()`{.xref .py .py-meth .docutils .literal
            .notranslate}]{.pre}](index.html#scrapy.Spider.parse &quot;scrapy.Spider.parse&quot;){.reference
            .internal} method must be used.

        -   [[`NO_CALLBACK()`{.xref .py .py-func .docutils .literal
            .notranslate}]{.pre}](#scrapy.http.request.NO_CALLBACK &quot;scrapy.http.request.NO_CALLBACK&quot;){.reference
            .internal}

        For more information, see [[Passing additional data to
        callback functions]{.std
        .std-ref}](#topics-request-response-ref-request-callback-arguments){.hoverxref
        .tooltip .reference .internal}.

        ::: {.admonition .note}
        Note

        If exceptions are raised during processing,
        [`errback`{.docutils .literal .notranslate}]{.pre} is called
        instead.
        :::

    -   **method**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external}) -- the HTTP method of this request. Defaults to
        [`'GET'`{.docutils .literal .notranslate}]{.pre}.

    -   **meta**
        ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
        .external}) -- the initial values for the
        [[`Request.meta`{.xref .py .py-attr .docutils .literal
        .notranslate}]{.pre}](#scrapy.http.Request.meta &quot;scrapy.http.Request.meta&quot;){.reference
        .internal} attribute. If given, the dict passed in this
        parameter will be shallow copied.

    -   **body**
        ([*bytes*](https://docs.python.org/3/library/stdtypes.html#bytes &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external}) -- the request body. If a string is passed, then
        it's encoded as bytes using the [`encoding`{.docutils
        .literal .notranslate}]{.pre} passed (which defaults to
        [`utf-8`{.docutils .literal .notranslate}]{.pre}). If
        [`body`{.docutils .literal .notranslate}]{.pre} is not
        given, an empty bytes object is stored. Regardless of the
        type of this argument, the final value stored will be a
        bytes object (never a string or [`None`{.docutils .literal
        .notranslate}]{.pre}).

    -   **headers**
        ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
        .external}) --

        the headers of this request. The dict values can be strings
        (for single valued headers) or lists (for multi-valued
        headers). If [`None`{.docutils .literal .notranslate}]{.pre}
        is passed as value, the HTTP header will not be sent at all.

        &gt; &lt;div&gt;
        &gt;
        &gt; ::: {.admonition .caution}
        &gt; Caution
        &gt;
        &gt; Cookies set via the [`Cookie`{.docutils .literal
        &gt; .notranslate}]{.pre} header are not considered by the
        &gt; [[CookiesMiddleware]{.std
        &gt; .std-ref}](index.html#cookies-mw){.hoverxref .tooltip
        &gt; .reference .internal}. If you need to set cookies for a
        &gt; request, use the [`Request.cookies`{.xref .py .py-class
        &gt; .docutils .literal .notranslate}]{.pre} parameter. This is
        &gt; a known current limitation that is being worked on.
        &gt; :::
        &gt;
        &gt; &lt;/div&gt;

    -   **cookies**
        ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) --

        the request cookies. These can be sent in two forms.

        1.  Using a dict:

        ::: {.highlight-python .notranslate}
        ::: highlight
            request_with_cookies = Request(
                url=&quot;http://www.example.com&quot;,
                cookies={&quot;currency&quot;: &quot;USD&quot;, &quot;country&quot;: &quot;UY&quot;},
            )
        :::
        :::

        2.  Using a list of dicts:

        ::: {.highlight-python .notranslate}
        ::: highlight
            request_with_cookies = Request(
                url=&quot;http://www.example.com&quot;,
                cookies=[
                    {
                        &quot;name&quot;: &quot;currency&quot;,
                        &quot;value&quot;: &quot;USD&quot;,
                        &quot;domain&quot;: &quot;example.com&quot;,
                        &quot;path&quot;: &quot;/currency&quot;,
                    },
                ],
            )
        :::
        :::

        The latter form allows for customizing the
        [`domain`{.docutils .literal .notranslate}]{.pre} and
        [`path`{.docutils .literal .notranslate}]{.pre} attributes
        of the cookie. This is only useful if the cookies are saved
        for later requests.

        []{#std-reqmeta-dont_merge_cookies .target}

        When some site returns cookies (in a response) those are
        stored in the cookies for that domain and will be sent again
        in future requests. That's the typical behaviour of any
        regular web browser.

        Note that setting the [[`dont_merge_cookies`{.xref .std
        .std-reqmeta .docutils .literal
        .notranslate}]{.pre}](#std-reqmeta-dont_merge_cookies){.hoverxref
        .tooltip .reference .internal} key to [`True`{.docutils
        .literal .notranslate}]{.pre} in [`request.meta`{.xref .py
        .py-attr .docutils .literal .notranslate}]{.pre} causes
        custom cookies to be ignored.

        For more info see [[CookiesMiddleware]{.std
        .std-ref}](index.html#cookies-mw){.hoverxref .tooltip
        .reference .internal}.

        ::: {.admonition .caution}
        Caution

        Cookies set via the [`Cookie`{.docutils .literal
        .notranslate}]{.pre} header are not considered by the
        [[CookiesMiddleware]{.std
        .std-ref}](index.html#cookies-mw){.hoverxref .tooltip
        .reference .internal}. If you need to set cookies for a
        request, use the [`Request.cookies`{.xref .py .py-class
        .docutils .literal .notranslate}]{.pre} parameter. This is a
        known current limitation that is being worked on.
        :::

        ::: versionadded
        [New in version 2.6.0: ]{.versionmodified .added}Cookie
        values that are [[`bool`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference
        .external}, [[`float`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/functions.html#float &quot;(in Python v3.12)&quot;){.reference
        .external} or [[`int`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/functions.html#int &quot;(in Python v3.12)&quot;){.reference
        .external} are casted to [[`str`{.xref .py .py-class
        .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external}.
        :::

    -   **encoding**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external}) -- the encoding of this request (defaults to
        [`'utf-8'`{.docutils .literal .notranslate}]{.pre}). This
        encoding will be used to percent-encode the URL and to
        convert the body to bytes (if given as a string).

    -   **priority**
        ([*int*](https://docs.python.org/3/library/functions.html#int &quot;(in Python v3.12)&quot;){.reference
        .external}) -- the priority of this request (defaults to
        [`0`{.docutils .literal .notranslate}]{.pre}). The priority
        is used by the scheduler to define the order used to process
        requests. Requests with a higher priority value will execute
        earlier. Negative values are allowed in order to indicate
        relatively low-priority.

    -   **dont_filter**
        ([*bool*](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference
        .external}) -- indicates that this request should not be
        filtered by the scheduler. This is used when you want to
        perform an identical request multiple times, to ignore the
        duplicates filter. Use it with care, or you will get into
        crawling loops. Default to [`False`{.docutils .literal
        .notranslate}]{.pre}.

    -   **errback**
        ([*collections.abc.Callable*](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable &quot;(in Python v3.12)&quot;){.reference
        .external}) --

        a function that will be called if any exception was raised
        while processing the request. This includes pages that
        failed with 404 HTTP errors and such. It receives a
        [[`Failure`{.xref .py .py-exc .docutils .literal
        .notranslate}]{.pre}](https://docs.twisted.org/en/stable/api/twisted.python.failure.Failure.html &quot;(in Twisted)&quot;){.reference
        .external} as first parameter. For more information, see
        [[Using errbacks to catch exceptions in request
        processing]{.std
        .std-ref}](#topics-request-response-ref-errbacks){.hoverxref
        .tooltip .reference .internal} below.

        ::: versionchanged
        [Changed in version 2.0: ]{.versionmodified .changed}The
        *callback* parameter is no longer required when the
        *errback* parameter is specified.
        :::

    -   **flags**
        ([*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- Flags sent to the request, can be used for
        logging or similar purposes.

    -   **cb_kwargs**
        ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
        .external}) -- A dict with arbitrary data that will be
        passed as keyword arguments to the Request's callback.

[[url]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Request.url &quot;Permalink to this definition&quot;){.headerlink}

:   A string containing the URL of this request. Keep in mind that
    this attribute contains the escaped URL, so it can differ from
    the URL passed in the [`__init__`{.docutils .literal
    .notranslate}]{.pre} method.

    This attribute is read-only. To change the URL of a Request use
    [[`replace()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.replace &quot;scrapy.http.Request.replace&quot;){.reference
    .internal}.

[[method]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Request.method &quot;Permalink to this definition&quot;){.headerlink}

:   A string representing the HTTP method in the request. This is
    guaranteed to be uppercase. Example: [`&quot;GET&quot;`{.docutils .literal
    .notranslate}]{.pre}, [`&quot;POST&quot;`{.docutils .literal
    .notranslate}]{.pre}, [`&quot;PUT&quot;`{.docutils .literal
    .notranslate}]{.pre}, etc

[[headers]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Request.headers &quot;Permalink to this definition&quot;){.headerlink}

:   A dictionary-like object which contains the request headers.

[[body]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Request.body &quot;Permalink to this definition&quot;){.headerlink}

:   The request body as bytes.

    This attribute is read-only. To change the body of a Request use
    [[`replace()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.replace &quot;scrapy.http.Request.replace&quot;){.reference
    .internal}.

[[meta]{.pre}]{.sig-name .descname}*[ ]{.w}[[=]{.pre}]{.p}[ ]{.w}[{}]{.pre}*[¶](#scrapy.http.Request.meta &quot;Permalink to this definition&quot;){.headerlink}

:   &lt;div&gt;
    &gt;
    &gt; A dictionary of arbitrary metadata for the request.
    &gt;
    &gt; You may extend request metadata as you see fit.
    &gt;
    &gt; Request metadata can also be accessed through the
    &gt; [[`meta`{.xref .py .py-attr .docutils .literal
    &gt; .notranslate}]{.pre}](#scrapy.http.Response.meta &quot;scrapy.http.Response.meta&quot;){.reference
    &gt; .internal} attribute of a response.
    &gt;
    &gt; To pass data from one spider callback to another, consider
    &gt; using [[`cb_kwargs`{.xref .py .py-attr .docutils .literal
    &gt; .notranslate}]{.pre}](#scrapy.http.Request.cb_kwargs &quot;scrapy.http.Request.cb_kwargs&quot;){.reference
    &gt; .internal} instead. However, request metadata may be the right
    &gt; choice in certain scenarios, such as to maintain some
    &gt; debugging data across all follow-up requests (e.g. the source
    &gt; URL).
    &gt;
    &gt; A common use of request metadata is to define request-specific
    &gt; parameters for Scrapy components (extensions, middlewares,
    &gt; etc.). For example, if you set [`dont_retry`{.docutils
    &gt; .literal .notranslate}]{.pre} to [`True`{.docutils .literal
    &gt; .notranslate}]{.pre}, [[`RetryMiddleware`{.xref .py .py-class
    &gt; .docutils .literal
    &gt; .notranslate}]{.pre}](index.html#scrapy.downloadermiddlewares.retry.RetryMiddleware &quot;scrapy.downloadermiddlewares.retry.RetryMiddleware&quot;){.reference
    &gt; .internal} will never retry that request, even if it fails.
    &gt; See [[Request.meta special keys]{.std
    &gt; .std-ref}](#topics-request-meta){.hoverxref .tooltip
    &gt; .reference .internal}.
    &gt;
    &gt; You may also use request metadata in your custom Scrapy
    &gt; components, for example, to keep request state information
    &gt; relevant to your component. For example,
    &gt; [[`RetryMiddleware`{.xref .py .py-class .docutils .literal
    &gt; .notranslate}]{.pre}](index.html#scrapy.downloadermiddlewares.retry.RetryMiddleware &quot;scrapy.downloadermiddlewares.retry.RetryMiddleware&quot;){.reference
    &gt; .internal} uses the [`retry_times`{.docutils .literal
    &gt; .notranslate}]{.pre} metadata key to keep track of how many
    &gt; times a request has been retried so far.
    &gt;
    &gt; Copying all the metadata of a previous request into a new,
    &gt; follow-up request in a spider callback is a bad practice,
    &gt; because request metadata may include metadata set by Scrapy
    &gt; components that is not meant to be copied into other requests.
    &gt; For example, copying the [`retry_times`{.docutils .literal
    &gt; .notranslate}]{.pre} metadata key into follow-up requests can
    &gt; lower the amount of retries allowed for those follow-up
    &gt; requests.
    &gt;
    &gt; You should only copy all request metadata from one request to
    &gt; another if the new request is meant to replace the old
    &gt; request, as is often the case when returning a request from a
    &gt; [[downloader middleware]{.std
    &gt; .std-ref}](index.html#topics-downloader-middleware){.hoverxref
    &gt; .tooltip .reference .internal} method.
    &gt;
    &gt; Also mind that the [[`copy()`{.xref .py .py-meth .docutils
    &gt; .literal
    &gt; .notranslate}]{.pre}](#scrapy.http.Request.copy &quot;scrapy.http.Request.copy&quot;){.reference
    &gt; .internal} and [[`replace()`{.xref .py .py-meth .docutils
    &gt; .literal
    &gt; .notranslate}]{.pre}](#scrapy.http.Request.replace &quot;scrapy.http.Request.replace&quot;){.reference
    &gt; .internal} request methods [[shallow-copy]{.xref .std
    &gt; .std-doc}](https://docs.python.org/3/library/copy.html &quot;(in Python v3.12)&quot;){.reference
    &gt; .external} request metadata.
    &gt;
    &gt; &lt;/div&gt;

[[cb_kwargs]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Request.cb_kwargs &quot;Permalink to this definition&quot;){.headerlink}

:   A dictionary that contains arbitrary metadata for this request.
    Its contents will be passed to the Request's callback as keyword
    arguments. It is empty for new Requests, which means by default
    callbacks only get a [[`Response`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.Response &quot;scrapy.http.Response&quot;){.reference
    .internal} object as argument.

    This dict is [[shallow copied]{.xref .std
    .std-doc}](https://docs.python.org/3/library/copy.html &quot;(in Python v3.12)&quot;){.reference
    .external} when the request is cloned using the
    [`copy()`{.docutils .literal .notranslate}]{.pre} or
    [`replace()`{.docutils .literal .notranslate}]{.pre} methods,
    and can also be accessed, in your spider, from the
    [`response.cb_kwargs`{.docutils .literal .notranslate}]{.pre}
    attribute.

    In case of a failure to process the request, this dict can be
    accessed as [`failure.request.cb_kwargs`{.docutils .literal
    .notranslate}]{.pre} in the request's errback. For more
    information, see [[Accessing additional data in errback
    functions]{.std .std-ref}](#errback-cb-kwargs){.hoverxref
    .tooltip .reference .internal}.

[[attributes]{.pre}]{.sig-name .descname}*[[:]{.pre}]{.p}[ ]{.w}[[Tuple]{.pre}](https://docs.python.org/3/library/typing.html#typing.Tuple &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[\...]{.pre}]{.p}[[\]]{.pre}]{.p}[ ]{.w}[[=]{.pre}]{.p}[ ]{.w}[(\'url\',]{.pre} [\'callback\',]{.pre} [\'method\',]{.pre} [\'headers\',]{.pre} [\'body\',]{.pre} [\'cookies\',]{.pre} [\'meta\',]{.pre} [\'encoding\',]{.pre} [\'priority\',]{.pre} [\'dont_filter\',]{.pre} [\'errback\',]{.pre} [\'flags\',]{.pre} [\'cb_kwargs\')]{.pre}*[¶](#scrapy.http.Request.attributes &quot;Permalink to this definition&quot;){.headerlink}

:   A tuple of [[`str`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
    .external} objects containing the name of all public attributes
    of the class that are also keyword parameters of the
    [`__init__`{.docutils .literal .notranslate}]{.pre} method.

    Currently used by [[`Request.replace()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.replace &quot;scrapy.http.Request.replace&quot;){.reference
    .internal}, [[`Request.to_dict()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.Request.to_dict &quot;scrapy.http.Request.to_dict&quot;){.reference
    .internal} and [[`request_from_dict()`{.xref .py .py-func
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.utils.request.request_from_dict &quot;scrapy.utils.request.request_from_dict&quot;){.reference
    .internal}.

[[copy]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/request.html#Request.copy){.reference .internal}[¶](#scrapy.http.Request.copy &quot;Permalink to this definition&quot;){.headerlink}

:   Return a new Request which is a copy of this Request. See also:
    [[Passing additional data to callback functions]{.std
    .std-ref}](#topics-request-response-ref-request-callback-arguments){.hoverxref
    .tooltip .reference .internal}.

[[replace]{.pre}]{.sig-name .descname}[(]{.sig-paren}[\[]{.optional}*[[url]{.pre}]{.n}*, *[[method]{.pre}]{.n}*, *[[headers]{.pre}]{.n}*, *[[body]{.pre}]{.n}*, *[[cookies]{.pre}]{.n}*, *[[meta]{.pre}]{.n}*, *[[flags]{.pre}]{.n}*, *[[encoding]{.pre}]{.n}*, *[[priority]{.pre}]{.n}*, *[[dont_filter]{.pre}]{.n}*, *[[callback]{.pre}]{.n}*, *[[errback]{.pre}]{.n}*, *[[cb_kwargs]{.pre}]{.n}*[\]]{.optional}[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/request.html#Request.replace){.reference .internal}[¶](#scrapy.http.Request.replace &quot;Permalink to this definition&quot;){.headerlink}

:   Return a Request object with the same members, except for those
    members given new values by whichever keyword arguments are
    specified. The [[`Request.cb_kwargs`{.xref .py .py-attr
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.cb_kwargs &quot;scrapy.http.Request.cb_kwargs&quot;){.reference
    .internal} and [[`Request.meta`{.xref .py .py-attr .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.Request.meta &quot;scrapy.http.Request.meta&quot;){.reference
    .internal} attributes are shallow copied by default (unless new
    values are given as arguments). See also [[Passing additional
    data to callback functions]{.std
    .std-ref}](#topics-request-response-ref-request-callback-arguments){.hoverxref
    .tooltip .reference .internal}.

*[classmethod]{.pre}[ ]{.w}*[[from_curl]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[curl_command]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}]{.n}*, *[[ignore_unknown_options]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[bool]{.pre}](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[True]{.pre}]{.default_value}*, *[[\*\*]{.pre}]{.o}[[kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}]{.n}*[)]{.sig-paren} [[→]{.sig-return-icon} [[RequestTypeVar]{.pre}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/request.html#Request.from_curl){.reference .internal}[¶](#scrapy.http.Request.from_curl &quot;Permalink to this definition&quot;){.headerlink}

:   Create a Request object from a string containing a
    [cURL](https://curl.haxx.se/){.reference .external} command. It
    populates the HTTP method, the URL, the headers, the cookies and
    the body. It accepts the same arguments as the [[`Request`{.xref
    .py .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal} class, taking preference and overriding the values of
    the same arguments contained in the cURL command.

    Unrecognized options are ignored by default. To raise an error
    when finding unknown options call this method by passing
    [`ignore_unknown_options=False`{.docutils .literal
    .notranslate}]{.pre}.

    ::: {.admonition .caution}
    Caution

    Using [[`from_curl()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.from_curl &quot;scrapy.http.Request.from_curl&quot;){.reference
    .internal} from [[`Request`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal} subclasses, such as [[`JsonRequest`{.xref .py
    .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.JsonRequest &quot;scrapy.http.JsonRequest&quot;){.reference
    .internal}, or [`XmlRpcRequest`{.xref .py .py-class .docutils
    .literal .notranslate}]{.pre}, as well as having [[downloader
    middlewares]{.std
    .std-ref}](index.html#topics-downloader-middleware){.hoverxref
    .tooltip .reference .internal} and [[spider middlewares]{.std
    .std-ref}](index.html#topics-spider-middleware){.hoverxref
    .tooltip .reference .internal} enabled, such as
    [[`DefaultHeadersMiddleware`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](index.html#scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware &quot;scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware&quot;){.reference
    .internal}, [[`UserAgentMiddleware`{.xref .py .py-class
    .docutils .literal
    .notranslate}]{.pre}](index.html#scrapy.downloadermiddlewares.useragent.UserAgentMiddleware &quot;scrapy.downloadermiddlewares.useragent.UserAgentMiddleware&quot;){.reference
    .internal}, or [[`HttpCompressionMiddleware`{.xref .py .py-class
    .docutils .literal
    .notranslate}]{.pre}](index.html#scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware &quot;scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware&quot;){.reference
    .internal}, may modify the [[`Request`{.xref .py .py-class
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal} object.
    :::

    To translate a cURL command into a Scrapy request, you may use
    [curl2scrapy](https://michael-shub.github.io/curl2scrapy/){.reference
    .external}.

[[to_dict]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[\*]{.pre}]{.o}*, *[[spider]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Spider]{.pre}](index.html#scrapy.spiders.Spider &quot;scrapy.spiders.Spider&quot;){.reference .internal}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[→]{.sig-return-icon} [[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/request.html#Request.to_dict){.reference .internal}[¶](#scrapy.http.Request.to_dict &quot;Permalink to this definition&quot;){.headerlink}

:   Return a dictionary containing the Request's data.

    Use [[`request_from_dict()`{.xref .py .py-func .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.utils.request.request_from_dict &quot;scrapy.utils.request.request_from_dict&quot;){.reference
    .internal} to convert back into a [`Request`{.xref .py .py-class
    .docutils .literal .notranslate}]{.pre} object.

    If a spider is given, this method will try to find out the name
    of the spider methods used as callback and errback and include
    them in the output dict, raising an exception if they cannot be
    found.
</code></pre>
<p>::: {#other-functions-related-to-requests .section}</p>
<h5 id="other-functions-related-to-requestsheaderlink"><a class="header" href="#other-functions-related-to-requestsheaderlink">Other functions related to requests<a href="#other-functions-related-to-requests" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>[[scrapy.http.request.]{.pre}]{.sig-prename .descclassname}[[NO_CALLBACK]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[*]{.pre}]{.o}[[args]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)">[Any]{.pre}</a>{.reference .external}]{.n}</em>, <em>[[**]{.pre}]{.o}[[kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)">[Any]{.pre}</a>{.reference .external}]{.n}</em>[)]{.sig-paren} [[→]{.sig-return-icon} [<a href="https://docs.python.org/3/library/typing.html#typing.NoReturn" title="(in Python v3.12)">[NoReturn]{.pre}</a>{.reference .external}]{.sig-return-typehint}]{.sig-return}<a href="_modules/scrapy/http/request.html#NO_CALLBACK">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.http.request.NO_CALLBACK" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   When assigned to the [<code>callback</code>{.docutils .literal
.notranslate}]{.pre} parameter of <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}, it indicates that the request is not meant to have a
spider callback at all.</p>
<pre><code>For example:

::: {.highlight-python .notranslate}
::: highlight
    Request(&quot;https://example.com&quot;, callback=NO_CALLBACK)
:::
:::

This value should be used by [[components]{.std
.std-ref}](index.html#topics-components){.hoverxref .tooltip
.reference .internal} that create and handle their own requests,
e.g. through [`scrapy.core.engine.ExecutionEngine.download()`{.xref
.py .py-meth .docutils .literal .notranslate}]{.pre}, so that
downloader middlewares handling such requests can treat them
differently from requests intended for the [[`parse()`{.xref .py
.py-meth .docutils .literal
.notranslate}]{.pre}](index.html#scrapy.Spider.parse &quot;scrapy.Spider.parse&quot;){.reference
.internal} callback.
</code></pre>
<pre><code class="language-{=html}">&lt;!-- --&gt;
</code></pre>
<p>[[scrapy.utils.request.]{.pre}]{.sig-prename .descclassname}[[request_from_dict]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[d]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">[dict]{.pre}</a>{.reference .external}]{.n}</em>, <em>[[*]{.pre}]{.o}</em>, <em>[[spider]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)">[Optional]{.pre}</a>{.reference .external}[[[]{.pre}]{.p}<a href="index.html#scrapy.spiders.Spider" title="scrapy.spiders.Spider">[Spider]{.pre}</a>{.reference .internal}[[]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}</em>[)]{.sig-paren} [[→]{.sig-return-icon} [<a href="index.html#scrapy.http.Request" title="scrapy.http.request.Request">[Request]{.pre}</a>{.reference .internal}]{.sig-return-typehint}]{.sig-return}<a href="_modules/scrapy/utils/request.html#request_from_dict">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.utils.request.request_from_dict" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Create a [<code>Request</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre} object from a dict.</p>
<pre><code>If a spider is given, it will try to resolve the callbacks looking
at the spider for methods with the same name.
</code></pre>
<p>:::</p>
<p>::: {#passing-additional-data-to-callback-functions .section}
[]{#topics-request-response-ref-request-callback-arguments}</p>
<h5 id="passing-additional-data-to-callback-functionsheaderlink"><a class="header" href="#passing-additional-data-to-callback-functionsheaderlink">Passing additional data to callback functions<a href="#passing-additional-data-to-callback-functions" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The callback of a request is a function that will be called when the
response of that request is downloaded. The callback function will be
called with the downloaded <a href="#scrapy.http.Response" title="scrapy.http.Response">[<code>Response</code>{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal} object as its first argument.</p>
<p>Example:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
def parse_page1(self, response):
return scrapy.Request(
&quot;http://www.example.com/some_page.html&quot;, callback=self.parse_page2
)</p>
<pre><code>def parse_page2(self, response):
    # this would log http://www.example.com/some_page.html
    self.logger.info(&quot;Visited %s&quot;, response.url)
</code></pre>
<p>:::
:::</p>
<p>In some cases you may be interested in passing arguments to those
callback functions so you can receive the arguments later, in the second
callback. The following example shows how to achieve this by using the
<a href="#scrapy.http.Request.cb_kwargs" title="scrapy.http.Request.cb_kwargs">[<code>Request.cb_kwargs</code>{.xref .py .py-attr .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} attribute:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
def parse(self, response):
request = scrapy.Request(
&quot;http://www.example.com/index.html&quot;,
callback=self.parse_page2,
cb_kwargs=dict(main_url=response.url),
)
request.cb_kwargs[&quot;foo&quot;] = &quot;bar&quot;  # add more arguments for the callback
yield request</p>
<pre><code>def parse_page2(self, response, main_url, foo):
    yield dict(
        main_url=main_url,
        other_url=response.url,
        foo=foo,
    )
</code></pre>
<p>:::
:::</p>
<p>::: {.admonition .caution}
Caution</p>
<p><a href="#scrapy.http.Request.cb_kwargs" title="scrapy.http.Request.cb_kwargs">[<code>Request.cb_kwargs</code>{.xref .py .py-attr .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} was introduced in version [<code>1.7</code>{.docutils .literal
.notranslate}]{.pre}. Prior to that, using <a href="#scrapy.http.Request.meta" title="scrapy.http.Request.meta">[<code>Request.meta</code>{.xref .py
.py-attr .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} was recommended for passing information around callbacks.
After [<code>1.7</code>{.docutils .literal .notranslate}]{.pre},
<a href="#scrapy.http.Request.cb_kwargs" title="scrapy.http.Request.cb_kwargs">[<code>Request.cb_kwargs</code>{.xref .py .py-attr .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} became the preferred way for handling user information,
leaving <a href="#scrapy.http.Request.meta" title="scrapy.http.Request.meta">[<code>Request.meta</code>{.xref .py .py-attr .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} for communication with components like middlewares and
extensions.
:::
:::</p>
<p>::: {#using-errbacks-to-catch-exceptions-in-request-processing .section}
[]{#topics-request-response-ref-errbacks}</p>
<h5 id="using-errbacks-to-catch-exceptions-in-request-processingheaderlink"><a class="header" href="#using-errbacks-to-catch-exceptions-in-request-processingheaderlink">Using errbacks to catch exceptions in request processing<a href="#using-errbacks-to-catch-exceptions-in-request-processing" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The errback of a request is a function that will be called when an
exception is raise while processing it.</p>
<p>It receives a <a href="https://docs.twisted.org/en/stable/api/twisted.python.failure.Failure.html" title="(in Twisted)">[<code>Failure</code>{.xref .py .py-exc .docutils .literal
.notranslate}]{.pre}</a>{.reference
.external} as first parameter and can be used to track connection
establishment timeouts, DNS errors etc.</p>
<p>Here's an example spider logging all errors and catching some specific
errors if needed:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
import scrapy</p>
<pre><code>from scrapy.spidermiddlewares.httperror import HttpError
from twisted.internet.error import DNSLookupError
from twisted.internet.error import TimeoutError, TCPTimedOutError


class ErrbackSpider(scrapy.Spider):
    name = &quot;errback_example&quot;
    start_urls = [
        &quot;http://www.httpbin.org/&quot;,  # HTTP 200 expected
        &quot;http://www.httpbin.org/status/404&quot;,  # Not found error
        &quot;http://www.httpbin.org/status/500&quot;,  # server issue
        &quot;http://www.httpbin.org:12345/&quot;,  # non-responding host, timeout expected
        &quot;https://example.invalid/&quot;,  # DNS error expected
    ]

    def start_requests(self):
        for u in self.start_urls:
            yield scrapy.Request(
                u,
                callback=self.parse_httpbin,
                errback=self.errback_httpbin,
                dont_filter=True,
            )

    def parse_httpbin(self, response):
        self.logger.info(&quot;Got successful response from {}&quot;.format(response.url))
        # do something useful here...

    def errback_httpbin(self, failure):
        # log all failures
        self.logger.error(repr(failure))

        # in case you want to do something special for some errors,
        # you may need the failure's type:

        if failure.check(HttpError):
            # these exceptions come from HttpError spider middleware
            # you can get the non-200 response
            response = failure.value.response
            self.logger.error(&quot;HttpError on %s&quot;, response.url)

        elif failure.check(DNSLookupError):
            # this is the original request
            request = failure.request
            self.logger.error(&quot;DNSLookupError on %s&quot;, request.url)

        elif failure.check(TimeoutError, TCPTimedOutError):
            request = failure.request
            self.logger.error(&quot;TimeoutError on %s&quot;, request.url)
</code></pre>
<p>:::
:::
:::</p>
<p>::: {#accessing-additional-data-in-errback-functions .section}
[]{#errback-cb-kwargs}</p>
<h5 id="accessing-additional-data-in-errback-functionsheaderlink"><a class="header" href="#accessing-additional-data-in-errback-functionsheaderlink">Accessing additional data in errback functions<a href="#accessing-additional-data-in-errback-functions" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>In case of a failure to process the request, you may be interested in
accessing arguments to the callback functions so you can process further
based on the arguments in the errback. The following example shows how
to achieve this by using [<code>Failure.request.cb_kwargs</code>{.docutils .literal
.notranslate}]{.pre}:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
def parse(self, response):
request = scrapy.Request(
&quot;http://www.example.com/index.html&quot;,
callback=self.parse_page2,
errback=self.errback_page2,
cb_kwargs=dict(main_url=response.url),
)
yield request</p>
<pre><code>def parse_page2(self, response, main_url):
    pass


def errback_page2(self, failure):
    yield dict(
        main_url=failure.request.cb_kwargs[&quot;main_url&quot;],
    )
</code></pre>
<p>:::
:::
:::</p>
<p>::: {#request-fingerprints .section}
[]{#id1}</p>
<h5 id="request-fingerprintsheaderlink"><a class="header" href="#request-fingerprintsheaderlink">Request fingerprints<a href="#request-fingerprints" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>There are some aspects of scraping, such as filtering out duplicate
requests (see <a href="index.html#std-setting-DUPEFILTER_CLASS">[<code>DUPEFILTER_CLASS</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}) or caching responses (see
<a href="index.html#std-setting-HTTPCACHE_POLICY">[<code>HTTPCACHE_POLICY</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}), where you need the ability to generate
a short, unique identifier from a <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} object: a request fingerprint.</p>
<p>You often do not need to worry about request fingerprints, the default
request fingerprinter works for most projects.</p>
<p>However, there is no universal way to generate a unique identifier from
a request, because different situations require comparing requests
differently. For example, sometimes you may need to compare URLs
case-insensitively, include URL fragments, exclude certain URL query
parameters, include some or all headers, etc.</p>
<p>To change how request fingerprints are built for your requests, use the
<a href="#std-setting-REQUEST_FINGERPRINTER_CLASS">[<code>REQUEST_FINGERPRINTER_CLASS</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} setting.</p>
<p>::: {#request-fingerprinter-class .section}
[]{#std-setting-REQUEST_FINGERPRINTER_CLASS}</p>
<h6 id="request_fingerprinter_classheaderlink"><a class="header" href="#request_fingerprinter_classheaderlink">REQUEST_FINGERPRINTER_CLASS<a href="#request-fingerprinter-class" title="Permalink to this heading">¶</a>{.headerlink}</a></h6>
<p>::: versionadded
[New in version 2.7.]{.versionmodified .added}
:::</p>
<p>Default: <a href="#scrapy.utils.request.RequestFingerprinter" title="scrapy.utils.request.RequestFingerprinter">[<code>scrapy.utils.request.RequestFingerprinter</code>{.xref .py
.py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}</p>
<p>A <a href="#custom-request-fingerprinter">[request fingerprinter class]{.std
.std-ref}</a>{.hoverxref .tooltip .reference
.internal} or its import path.</p>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.utils.request.]{.pre}]{.sig-prename .descclassname}[[RequestFingerprinter]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[crawler]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)">[Optional]{.pre}</a>{.reference .external}[[[]{.pre}]{.p}<a href="index.html#scrapy.crawler.Crawler" title="scrapy.crawler.Crawler">[Crawler]{.pre}</a>{.reference .internal}[[]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}</em>[)]{.sig-paren}<a href="_modules/scrapy/utils/request.html#RequestFingerprinter">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.utils.request.RequestFingerprinter" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Default fingerprinter.</p>
<pre><code>It takes into account a canonical version
([[`w3lib.url.canonicalize_url()`{.xref .py .py-func .docutils
.literal
.notranslate}]{.pre}](https://w3lib.readthedocs.io/en/latest/w3lib.html#w3lib.url.canonicalize_url &quot;(in w3lib v2.1)&quot;){.reference
.external}) of [[`request.url`{.xref .py .py-attr .docutils .literal
.notranslate}]{.pre}](#scrapy.http.Request.url &quot;scrapy.http.Request.url&quot;){.reference
.internal} and the values of [[`request.method`{.xref .py .py-attr
.docutils .literal
.notranslate}]{.pre}](#scrapy.http.Request.method &quot;scrapy.http.Request.method&quot;){.reference
.internal} and [[`request.body`{.xref .py .py-attr .docutils
.literal
.notranslate}]{.pre}](#scrapy.http.Request.body &quot;scrapy.http.Request.body&quot;){.reference
.internal}. It then generates an
[SHA1](https://en.wikipedia.org/wiki/SHA-1){.reference .external}
hash.

::: {.admonition .seealso}
See also

[[`REQUEST_FINGERPRINTER_IMPLEMENTATION`{.xref .std .std-setting
.docutils .literal
.notranslate}]{.pre}](#std-setting-REQUEST_FINGERPRINTER_IMPLEMENTATION){.hoverxref
.tooltip .reference .internal}.
:::
</code></pre>
<p>:::</p>
<p>::: {#request-fingerprinter-implementation .section}
[]{#std-setting-REQUEST_FINGERPRINTER_IMPLEMENTATION}</p>
<h6 id="request_fingerprinter_implementationheaderlink"><a class="header" href="#request_fingerprinter_implementationheaderlink">REQUEST_FINGERPRINTER_IMPLEMENTATION<a href="#request-fingerprinter-implementation" title="Permalink to this heading">¶</a>{.headerlink}</a></h6>
<p>::: versionadded
[New in version 2.7.]{.versionmodified .added}
:::</p>
<p>Default: [<code>'2.6'</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Determines which request fingerprinting algorithm is used by the default
request fingerprinter class (see <a href="#std-setting-REQUEST_FINGERPRINTER_CLASS">[<code>REQUEST_FINGERPRINTER_CLASS</code>{.xref
.std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}).</p>
<p>Possible values are:</p>
<ul>
<li>
<p>[<code>'2.6'</code>{.docutils .literal .notranslate}]{.pre} (default)</p>
<p>This implementation uses the same request fingerprinting algorithm
as Scrapy 2.6 and earlier versions.</p>
<p>Even though this is the default value for backward compatibility
reasons, it is a deprecated value.</p>
</li>
<li>
<p>[<code>'2.7'</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>This implementation was introduced in Scrapy 2.7 to fix an issue of
the previous implementation.</p>
<p>New projects should use this value. The <a href="index.html#std-command-startproject">[<code>startproject</code>{.xref .std
.std-command .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} command sets this value in the
generated [<code>settings.py</code>{.docutils .literal .notranslate}]{.pre}
file.</p>
</li>
</ul>
<p>If you are using the default value ([<code>'2.6'</code>{.docutils .literal
.notranslate}]{.pre}) for this setting, and you are using Scrapy
components where changing the request fingerprinting algorithm would
cause undesired results, you need to carefully decide when to change the
value of this setting, or switch the
<a href="#std-setting-REQUEST_FINGERPRINTER_CLASS">[<code>REQUEST_FINGERPRINTER_CLASS</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} setting to a custom request fingerprinter
class that implements the 2.6 request fingerprinting algorithm and does
not log this warning ( <a href="#request-fingerprinter">[Writing your own request fingerprinter]{.std
.std-ref}</a>{.hoverxref .tooltip .reference
.internal} includes an example implementation of such a class).</p>
<p>Scenarios where changing the request fingerprinting algorithm may cause
undesired results include, for example, using the HTTP cache middleware
(see <a href="index.html#scrapy.downloadermiddlewares.httpcache.HttpCacheMiddleware" title="scrapy.downloadermiddlewares.httpcache.HttpCacheMiddleware">[<code>HttpCacheMiddleware</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}). Changing the request fingerprinting algorithm would
invalidate the current cache, requiring you to redownload all requests
again.</p>
<p>Otherwise, set <a href="#std-setting-REQUEST_FINGERPRINTER_IMPLEMENTATION">[<code>REQUEST_FINGERPRINTER_IMPLEMENTATION</code>{.xref .std
.std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} to [<code>'2.7'</code>{.docutils .literal
.notranslate}]{.pre} in your settings to switch already to the request
fingerprinting implementation that will be the only request
fingerprinting implementation available in a future version of Scrapy,
and remove the deprecation warning triggered by using the default value
([<code>'2.6'</code>{.docutils .literal .notranslate}]{.pre}).
:::</p>
<p>::: {#writing-your-own-request-fingerprinter .section}
[]{#custom-request-fingerprinter}[]{#request-fingerprinter}</p>
<h6 id="writing-your-own-request-fingerprinterheaderlink"><a class="header" href="#writing-your-own-request-fingerprinterheaderlink">Writing your own request fingerprinter<a href="#writing-your-own-request-fingerprinter" title="Permalink to this heading">¶</a>{.headerlink}</a></h6>
<p>A request fingerprinter is a class that must implement the following
method:</p>
<p>[[fingerprint]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[self]{.pre}]{.n}</em>, <em>[[request]{.pre}]{.n}</em>[)]{.sig-paren}<a href="#fingerprint" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Return a <a href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)">[<code>bytes</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.external} object that uniquely identifies <em>request</em>.</p>
<pre><code>See also [[Request fingerprint restrictions]{.std
.std-ref}](#request-fingerprint-restrictions){.hoverxref .tooltip
.reference .internal}.

Parameters

:   **request**
    ([*scrapy.http.Request*](index.html#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal}) -- request to fingerprint
</code></pre>
<p>Additionally, it may also implement the following methods:</p>
<p><em>[classmethod]{.pre}[ ]{.w}</em>[[from_crawler]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[cls]{.pre}]{.n}</em>, <em>[[crawler]{.pre}]{.n}</em>[)]{.sig-paren}</p>
<p>:   If present, this class method is called to create a request
fingerprinter instance from a <a href="index.html#scrapy.crawler.Crawler" title="scrapy.crawler.Crawler">[<code>Crawler</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} object. It must return a new instance of the request
fingerprinter.</p>
<pre><code>*crawler* provides access to all Scrapy core components like
settings and signals; it is a way for the request fingerprinter to
access them and hook its functionality into Scrapy.

Parameters

:   **crawler** ([[`Crawler`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](index.html#scrapy.crawler.Crawler &quot;scrapy.crawler.Crawler&quot;){.reference
    .internal} object) -- crawler that uses this request
    fingerprinter
</code></pre>
<pre><code class="language-{=html}">&lt;!-- --&gt;
</code></pre>
<p><em>[classmethod]{.pre}[ ]{.w}</em>[[from_settings]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[cls]{.pre}]{.n}</em>, <em>[[settings]{.pre}]{.n}</em>[)]{.sig-paren}<a href="#from_settings" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   If present, and [<code>from_crawler</code>{.docutils .literal
.notranslate}]{.pre} is not defined, this class method is called to
create a request fingerprinter instance from a <a href="index.html#scrapy.settings.Settings" title="scrapy.settings.Settings">[<code>Settings</code>{.xref
.py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} object. It must return a new instance of the request
fingerprinter.</p>
<p>The <a href="#fingerprint" title="fingerprint">[<code>fingerprint()</code>{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}</a>{.reference .internal}
method of the default request fingerprinter,
<a href="#scrapy.utils.request.RequestFingerprinter" title="scrapy.utils.request.RequestFingerprinter">[<code>scrapy.utils.request.RequestFingerprinter</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}, uses <a href="#scrapy.utils.request.fingerprint" title="scrapy.utils.request.fingerprint">[<code>scrapy.utils.request.fingerprint()</code>{.xref .py
.py-func .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} with its default parameters. For some common use cases you
can use <a href="#scrapy.utils.request.fingerprint" title="scrapy.utils.request.fingerprint">[<code>scrapy.utils.request.fingerprint()</code>{.xref .py .py-func
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} as well in your <a href="#fingerprint" title="fingerprint">[<code>fingerprint()</code>{.xref .py .py-meth
.docutils .literal
.notranslate}]{.pre}</a>{.reference .internal}
method implementation:</p>
<p>[[scrapy.utils.request.]{.pre}]{.sig-prename .descclassname}[[fingerprint]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[request]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="index.html#scrapy.http.Request" title="scrapy.http.request.Request">[Request]{.pre}</a>{.reference .internal}]{.n}</em>, <em>[[*]{.pre}]{.o}</em>, <em>[[include_headers]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)">[Optional]{.pre}</a>{.reference .external}[[[]{.pre}]{.p}<a href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)">[Iterable]{.pre}</a>{.reference .external}[[[]{.pre}]{.p}<a href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)">[Union]{.pre}</a>{.reference .external}[[[]{.pre}]{.p}<a href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)">[bytes]{.pre}</a>{.reference .external}[[,]{.pre}]{.p}[ ]{.w}<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">[str]{.pre}</a>{.reference .external}[[]]{.pre}]{.p}[[]]{.pre}]{.p}[[]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}</em>, <em>[[keep_fragments]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)">[bool]{.pre}</a>{.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}</em>[)]{.sig-paren} [[→]{.sig-return-icon} [<a href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)">[bytes]{.pre}</a>{.reference .external}]{.sig-return-typehint}]{.sig-return}<a href="_modules/scrapy/utils/request.html#fingerprint">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.utils.request.fingerprint" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Return the request fingerprint.</p>
<pre><code>The request fingerprint is a hash that uniquely identifies the
resource the request points to. For example, take the following two
urls:

[http://www.example.com/query?id=111&amp;cat=222](http://www.example.com/query?id=111&amp;cat=222){.reference
.external}
[http://www.example.com/query?cat=222&amp;id=111](http://www.example.com/query?cat=222&amp;id=111){.reference
.external}

Even though those are two different URLs both point to the same
resource and are equivalent (i.e. they should return the same
response).

Another example are cookies used to store session ids. Suppose the
following page is only accessible to authenticated users:

[http://www.example.com/members/offers.html](http://www.example.com/members/offers.html){.reference
.external}

Lots of sites use a cookie to store the session id, which adds a
random component to the HTTP Request and thus should be ignored when
calculating the fingerprint.

For this reason, request headers are ignored by default when
calculating the fingerprint. If you want to include specific headers
use the include_headers argument, which is a list of Request headers
to include.

Also, servers usually ignore fragments in urls when handling
requests, so they are also ignored by default when calculating the
fingerprint. If you want to include them, set the keep_fragments
argument to True (for instance when handling requests with a
headless browser).
</code></pre>
<p>For example, to take the value of a request header named
[<code>X-ID</code>{.docutils .literal .notranslate}]{.pre} into account:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
# my_project/settings.py
REQUEST_FINGERPRINTER_CLASS = &quot;my_project.utils.RequestFingerprinter&quot;</p>
<pre><code># my_project/utils.py
from scrapy.utils.request import fingerprint


class RequestFingerprinter:
    def fingerprint(self, request):
        return fingerprint(request, include_headers=[&quot;X-ID&quot;])
</code></pre>
<p>:::
:::</p>
<p>You can also write your own fingerprinting logic from scratch.</p>
<p>However, if you do not use <a href="#scrapy.utils.request.fingerprint" title="scrapy.utils.request.fingerprint">[<code>scrapy.utils.request.fingerprint()</code>{.xref
.py .py-func .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}, make sure you use <a href="https://docs.python.org/3/library/weakref.html#weakref.WeakKeyDictionary" title="(in Python v3.12)">[<code>WeakKeyDictionary</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.external} to cache request fingerprints:</p>
<ul>
<li>
<p>Caching saves CPU by ensuring that fingerprints are calculated only
once per request, and not once per Scrapy component that needs the
fingerprint of a request.</p>
</li>
<li>
<p>Using <a href="https://docs.python.org/3/library/weakref.html#weakref.WeakKeyDictionary" title="(in Python v3.12)">[<code>WeakKeyDictionary</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.external} saves memory by ensuring that request objects do not stay
in memory forever just because you have references to them in your
cache dictionary.</p>
</li>
</ul>
<p>For example, to take into account only the URL of a request, without any
prior URL canonicalization or taking the request method or body into
account:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
from hashlib import sha1
from weakref import WeakKeyDictionary</p>
<pre><code>from scrapy.utils.python import to_bytes


class RequestFingerprinter:
    cache = WeakKeyDictionary()

    def fingerprint(self, request):
        if request not in self.cache:
            fp = sha1()
            fp.update(to_bytes(request.url))
            self.cache[request] = fp.digest()
        return self.cache[request]
</code></pre>
<p>:::
:::</p>
<p>If you need to be able to override the request fingerprinting for
arbitrary requests from your spider callbacks, you may implement a
request fingerprinter that reads fingerprints from
<a href="#scrapy.http.Request.meta" title="scrapy.http.Request.meta">[<code>request.meta</code>{.xref .py .py-attr .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} when available, and then falls back to
<a href="#scrapy.utils.request.fingerprint" title="scrapy.utils.request.fingerprint">[<code>scrapy.utils.request.fingerprint()</code>{.xref .py .py-func .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal}. For example:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
from scrapy.utils.request import fingerprint</p>
<pre><code>class RequestFingerprinter:
    def fingerprint(self, request):
        if &quot;fingerprint&quot; in request.meta:
            return request.meta[&quot;fingerprint&quot;]
        return fingerprint(request)
</code></pre>
<p>:::
:::</p>
<p>If you need to reproduce the same fingerprinting algorithm as Scrapy 2.6
without using the deprecated [<code>'2.6'</code>{.docutils .literal
.notranslate}]{.pre} value of the
<a href="#std-setting-REQUEST_FINGERPRINTER_IMPLEMENTATION">[<code>REQUEST_FINGERPRINTER_IMPLEMENTATION</code>{.xref .std .std-setting
.docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} setting, use the following request
fingerprinter:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
from hashlib import sha1
from weakref import WeakKeyDictionary</p>
<pre><code>from scrapy.utils.python import to_bytes
from w3lib.url import canonicalize_url


class RequestFingerprinter:
    cache = WeakKeyDictionary()

    def fingerprint(self, request):
        if request not in self.cache:
            fp = sha1()
            fp.update(to_bytes(request.method))
            fp.update(to_bytes(canonicalize_url(request.url)))
            fp.update(request.body or b&quot;&quot;)
            self.cache[request] = fp.digest()
        return self.cache[request]
</code></pre>
<p>:::
:::
:::</p>
<p>::: {#request-fingerprint-restrictions .section}
[]{#id2}</p>
<h6 id="request-fingerprint-restrictionsheaderlink"><a class="header" href="#request-fingerprint-restrictionsheaderlink">Request fingerprint restrictions<a href="#request-fingerprint-restrictions" title="Permalink to this heading">¶</a>{.headerlink}</a></h6>
<p>Scrapy components that use request fingerprints may impose additional
restrictions on the format of the fingerprints that your <a href="#custom-request-fingerprinter">[request
fingerprinter]{.std .std-ref}</a>{.hoverxref
.tooltip .reference .internal} generates.</p>
<p>The following built-in Scrapy components have such restrictions:</p>
<ul>
<li>
<p><a href="index.html#scrapy.extensions.httpcache.FilesystemCacheStorage" title="scrapy.extensions.httpcache.FilesystemCacheStorage">[<code>scrapy.extensions.httpcache.FilesystemCacheStorage</code>{.xref .py
.py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} (default value of <a href="index.html#std-setting-HTTPCACHE_STORAGE">[<code>HTTPCACHE_STORAGE</code>{.xref .std
.std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal})</p>
<p>Request fingerprints must be at least 1 byte long.</p>
<p>Path and filename length limits of the file system of
<a href="index.html#std-setting-HTTPCACHE_DIR">[<code>HTTPCACHE_DIR</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} also apply. Inside
<a href="index.html#std-setting-HTTPCACHE_DIR">[<code>HTTPCACHE_DIR</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}, the following directory structure is
created:</p>
<ul>
<li>
<p>[<code>Spider.name</code>{.xref .py .py-attr .docutils .literal
.notranslate}]{.pre}</p>
<ul>
<li>
<p>first byte of a request fingerprint as hexadecimal</p>
<ul>
<li>
<p>fingerprint as hexadecimal</p>
<ul>
<li>filenames up to 16 characters long</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>For example, if a request fingerprint is made of 20 bytes (default),
<a href="index.html#std-setting-HTTPCACHE_DIR">[<code>HTTPCACHE_DIR</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} is
[<code>'/home/user/project/.scrapy/httpcache'</code>{.docutils .literal
.notranslate}]{.pre}, and the name of your spider is
[<code>'my_spider'</code>{.docutils .literal .notranslate}]{.pre} your file
system must support a file path like:</p>
<p>::: {.highlight-default .notranslate}
::: highlight
/home/user/project/.scrapy/httpcache/my_spider/01/0123456789abcdef0123456789abcdef01234567/response_headers
:::
:::</p>
</li>
<li>
<p><a href="index.html#scrapy.extensions.httpcache.DbmCacheStorage" title="scrapy.extensions.httpcache.DbmCacheStorage">[<code>scrapy.extensions.httpcache.DbmCacheStorage</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}</p>
<p>The underlying DBM implementation must support keys as long as twice
the number of bytes of a request fingerprint, plus 5. For example,
if a request fingerprint is made of 20 bytes (default),
45-character-long keys must be supported.
:::
:::
:::</p>
</li>
</ul>
<p>::: {#request-meta-special-keys .section}
[]{#topics-request-meta}</p>
<h4 id="requestmeta-special-keysheaderlink"><a class="header" href="#requestmeta-special-keysheaderlink">Request.meta special keys<a href="#request-meta-special-keys" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>The <a href="#scrapy.http.Request.meta" title="scrapy.http.Request.meta">[<code>Request.meta</code>{.xref .py .py-attr .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} attribute can contain any arbitrary data, but there are some
special keys recognized by Scrapy and its built-in extensions.</p>
<p>Those are:</p>
<ul>
<li>
<p><a href="#std-reqmeta-bindaddress">[<code>bindaddress</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-cookiejar">[<code>cookiejar</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-dont_cache">[<code>dont_cache</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-reqmeta-dont_merge_cookies">[<code>dont_merge_cookies</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-dont_obey_robotstxt">[<code>dont_obey_robotstxt</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-dont_redirect">[<code>dont_redirect</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-dont_retry">[<code>dont_retry</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-reqmeta-download_fail_on_dataloss">[<code>download_fail_on_dataloss</code>{.xref .std .std-reqmeta .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-reqmeta-download_latency">[<code>download_latency</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-download_maxsize">[<code>download_maxsize</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-reqmeta-download_timeout">[<code>download_timeout</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p>[<code>ftp_password</code>{.docutils .literal .notranslate}]{.pre} (See
<a href="index.html#std-setting-FTP_PASSWORD">[<code>FTP_PASSWORD</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} for more info)</p>
</li>
<li>
<p>[<code>ftp_user</code>{.docutils .literal .notranslate}]{.pre} (See
<a href="index.html#std-setting-FTP_USER">[<code>FTP_USER</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} for more info)</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-handle_httpstatus_all">[<code>handle_httpstatus_all</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-handle_httpstatus_list">[<code>handle_httpstatus_list</code>{.xref .std .std-reqmeta .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="#std-reqmeta-max_retry_times">[<code>max_retry_times</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-proxy">[<code>proxy</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-redirect_reasons">[<code>redirect_reasons</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-redirect_urls">[<code>redirect_urls</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
<li>
<p><a href="index.html#std-reqmeta-referrer_policy">[<code>referrer_policy</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}</p>
</li>
</ul>
<p>::: {#bindaddress .section}
[]{#std-reqmeta-bindaddress}</p>
<h5 id="bindaddressheaderlink"><a class="header" href="#bindaddressheaderlink">bindaddress<a href="#bindaddress" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The IP of the outgoing IP address to use for the performing the request.
:::</p>
<p>::: {#download-timeout .section}
[]{#std-reqmeta-download_timeout}</p>
<h5 id="download_timeoutheaderlink"><a class="header" href="#download_timeoutheaderlink">download_timeout<a href="#download-timeout" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The amount of time (in secs) that the downloader will wait before timing
out. See also: <a href="index.html#std-setting-DOWNLOAD_TIMEOUT">[<code>DOWNLOAD_TIMEOUT</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.
:::</p>
<p>::: {#download-latency .section}
[]{#std-reqmeta-download_latency}</p>
<h5 id="download_latencyheaderlink"><a class="header" href="#download_latencyheaderlink">download_latency<a href="#download-latency" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The amount of time spent to fetch the response, since the request has
been started, i.e. HTTP message sent over the network. This meta key
only becomes available when the response has been downloaded. While most
other meta keys are used to control Scrapy behavior, this one is
supposed to be read-only.
:::</p>
<p>::: {#download-fail-on-dataloss .section}
[]{#std-reqmeta-download_fail_on_dataloss}</p>
<h5 id="download_fail_on_datalossheaderlink"><a class="header" href="#download_fail_on_datalossheaderlink">download_fail_on_dataloss<a href="#download-fail-on-dataloss" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Whether or not to fail on broken responses. See:
<a href="index.html#std-setting-DOWNLOAD_FAIL_ON_DATALOSS">[<code>DOWNLOAD_FAIL_ON_DATALOSS</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.
:::</p>
<p>::: {#max-retry-times .section}
[]{#std-reqmeta-max_retry_times}</p>
<h5 id="max_retry_timesheaderlink"><a class="header" href="#max_retry_timesheaderlink">max_retry_times<a href="#max-retry-times" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The meta key is used set retry times per request. When initialized, the
<a href="#std-reqmeta-max_retry_times">[<code>max_retry_times</code>{.xref .std .std-reqmeta .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal} meta key takes higher precedence over the
<a href="index.html#std-setting-RETRY_TIMES">[<code>RETRY_TIMES</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} setting.
:::
:::</p>
<p>::: {#stopping-the-download-of-a-response .section}
[]{#topics-stop-response-download}</p>
<h4 id="stopping-the-download-of-a-responseheaderlink"><a class="header" href="#stopping-the-download-of-a-responseheaderlink">Stopping the download of a Response<a href="#stopping-the-download-of-a-response" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>Raising a <a href="index.html#scrapy.exceptions.StopDownload" title="scrapy.exceptions.StopDownload">[<code>StopDownload</code>{.xref .py .py-exc .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} exception from a handler for the <a href="index.html#scrapy.signals.bytes_received" title="scrapy.signals.bytes_received">[<code>bytes_received</code>{.xref .py
.py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} or <a href="index.html#scrapy.signals.headers_received" title="scrapy.signals.headers_received">[<code>headers_received</code>{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal} signals will stop the download of a given response. See the
following example:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
import scrapy</p>
<pre><code>class StopSpider(scrapy.Spider):
    name = &quot;stop&quot;
    start_urls = [&quot;https://docs.scrapy.org/en/latest/&quot;]

    @classmethod
    def from_crawler(cls, crawler):
        spider = super().from_crawler(crawler)
        crawler.signals.connect(
            spider.on_bytes_received, signal=scrapy.signals.bytes_received
        )
        return spider

    def parse(self, response):
        # 'last_chars' show that the full response was not downloaded
        yield {&quot;len&quot;: len(response.text), &quot;last_chars&quot;: response.text[-40:]}

    def on_bytes_received(self, data, request, spider):
        raise scrapy.exceptions.StopDownload(fail=False)
</code></pre>
<p>:::
:::</p>
<p>which produces the following output:</p>
<p>::: {.highlight-default .notranslate}
::: highlight
2020-05-19 17:26:12 [scrapy.core.engine] INFO: Spider opened
2020-05-19 17:26:12 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2020-05-19 17:26:13 [scrapy.core.downloader.handlers.http11] DEBUG: Download stopped for &lt;GET https://docs.scrapy.org/en/latest/&gt; from signal handler StopSpider.on_bytes_received
2020-05-19 17:26:13 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://docs.scrapy.org/en/latest/&gt; (referer: None) ['download_stopped']
2020-05-19 17:26:13 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://docs.scrapy.org/en/latest/&gt;
{'len': 279, 'last_chars': 'dth, initial-scale=1.0&quot;&gt;\n  \n  <title>Scr'}
2020-05-19 17:26:13 [scrapy.core.engine] INFO: Closing spider (finished)
:::
:::</p>
<p>By default, resulting responses are handled by their corresponding
errbacks. To call their callback instead, like in this example, pass
[<code>fail=False</code>{.docutils .literal .notranslate}]{.pre} to the
<a href="index.html#scrapy.exceptions.StopDownload" title="scrapy.exceptions.StopDownload">[<code>StopDownload</code>{.xref .py .py-exc .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} exception.
:::</p>
<p>::: {#request-subclasses .section}
[]{#topics-request-response-ref-request-subclasses}</p>
<h4 id="request-subclassesheaderlink"><a class="header" href="#request-subclassesheaderlink">Request subclasses<a href="#request-subclasses" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>Here is the list of built-in <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal} subclasses. You can also subclass it to implement your own
custom functionality.</p>
<p>::: {#formrequest-objects .section}</p>
<h5 id="formrequest-objectsheaderlink"><a class="header" href="#formrequest-objectsheaderlink">FormRequest objects<a href="#formrequest-objects" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The FormRequest class extends the base <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} with functionality for dealing with HTML forms. It uses
<a href="https://lxml.de/lxmlhtml.html#forms">lxml.html forms</a>{.reference
.external} to pre-populate form fields with form data from
<a href="#scrapy.http.Response" title="scrapy.http.Response">[<code>Response</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} objects.</p>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.http.request.form.]{.pre}]{.sig-prename .descclassname}[[FormRequest]{.pre}]{.sig-name .descname}<a href="#scrapy.http.scrapy.http.request.form.FormRequest" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:</p>
<pre><code class="language-{=html}">&lt;!-- --&gt;
</code></pre>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.http.]{.pre}]{.sig-prename .descclassname}[[FormRequest]{.pre}]{.sig-name .descname}<a href="#scrapy.http.scrapy.http.FormRequest" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:</p>
<pre><code class="language-{=html}">&lt;!-- --&gt;
</code></pre>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.]{.pre}]{.sig-prename .descclassname}[[FormRequest]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[url]{.pre}]{.n}</em>[[]{.optional}, <em>[[formdata]{.pre}]{.n}</em>, <em>[[...]{.pre}]{.n}</em>[]]{.optional}[)]{.sig-paren}<a href="#scrapy.http.scrapy.FormRequest" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   The [<code>FormRequest</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre} class adds a new keyword parameter to the
[<code>__init__</code>{.docutils .literal .notranslate}]{.pre} method. The
remaining arguments are the same as for the <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py
.py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} class and are not documented here.</p>
<pre><code>Parameters

:   **formdata**
    ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
    .external} *or*
    [*collections.abc.Iterable*](https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable &quot;(in Python v3.12)&quot;){.reference
    .external}) -- is a dictionary (or iterable of (key, value)
    tuples) containing HTML Form data which will be url-encoded and
    assigned to the body of the request.

The [`FormRequest`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre} objects support the following class method in
addition to the standard [[`Request`{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
.internal} methods:

*[classmethod]{.pre}[ ]{.w}*[[FormRequest.]{.pre}]{.sig-prename .descclassname}[[from_response]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[response]{.pre}]{.n}*[\[]{.optional}, *[[formname=None]{.pre}]{.n}*, *[[formid=None]{.pre}]{.n}*, *[[formnumber=0]{.pre}]{.n}*, *[[formdata=None]{.pre}]{.n}*, *[[formxpath=None]{.pre}]{.n}*, *[[formcss=None]{.pre}]{.n}*, *[[clickdata=None]{.pre}]{.n}*, *[[dont_click=False]{.pre}]{.n}*, *[[\...]{.pre}]{.n}*[\]]{.optional}[)]{.sig-paren}[¶](#scrapy.http.scrapy.FormRequest.FormRequest.from_response &quot;Permalink to this definition&quot;){.headerlink}

:   Returns a new [`FormRequest`{.xref .py .py-class .docutils
    .literal .notranslate}]{.pre} object with its form field values
    pre-populated with those found in the HTML [`&lt;form&gt;`{.docutils
    .literal .notranslate}]{.pre} element contained in the given
    response. For an example see [[Using FormRequest.from_response()
    to simulate a user login]{.std
    .std-ref}](#topics-request-response-ref-request-userlogin){.hoverxref
    .tooltip .reference .internal}.

    The policy is to automatically simulate a click, by default, on
    any form control that looks clickable, like a
    [`&lt;input`{.docutils .literal .notranslate}]{.pre}` `{.docutils
    .literal .notranslate}[`type=&quot;submit&quot;&gt;`{.docutils .literal
    .notranslate}]{.pre}. Even though this is quite convenient, and
    often the desired behaviour, sometimes it can cause problems
    which could be hard to debug. For example, when working with
    forms that are filled and/or submitted using javascript, the
    default [`from_response()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} behaviour may not be the most appropriate.
    To disable this behaviour you can set the
    [`dont_click`{.docutils .literal .notranslate}]{.pre} argument
    to [`True`{.docutils .literal .notranslate}]{.pre}. Also, if you
    want to change the control clicked (instead of disabling it) you
    can also use the [`clickdata`{.docutils .literal
    .notranslate}]{.pre} argument.

    ::: {.admonition .caution}
    Caution

    Using this method with select elements which have leading or
    trailing whitespace in the option values will not work due to a
    [bug in
    lxml](https://bugs.launchpad.net/lxml/+bug/1665241){.reference
    .external}, which should be fixed in lxml 3.8 and above.
    :::

    Parameters

    :   -   **response** ([[`Response`{.xref .py .py-class .docutils
            .literal
            .notranslate}]{.pre}](#scrapy.http.Response &quot;scrapy.http.Response&quot;){.reference
            .internal} object) -- the response containing a HTML
            form which will be used to pre-populate the form fields

        -   **formname**
            ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
            .external}) -- if given, the form with name attribute
            set to this value will be used.

        -   **formid**
            ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
            .external}) -- if given, the form with id attribute set
            to this value will be used.

        -   **formxpath**
            ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
            .external}) -- if given, the first form that matches the
            xpath will be used.

        -   **formcss**
            ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
            .external}) -- if given, the first form that matches the
            css selector will be used.

        -   **formnumber**
            ([*int*](https://docs.python.org/3/library/functions.html#int &quot;(in Python v3.12)&quot;){.reference
            .external}) -- the number of form to use, when the
            response contains multiple forms. The first one (and
            also the default) is [`0`{.docutils .literal
            .notranslate}]{.pre}.

        -   **formdata**
            ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
            .external}) -- fields to override in the form data. If a
            field was already present in the response
            [`&lt;form&gt;`{.docutils .literal .notranslate}]{.pre}
            element, its value is overridden by the one passed in
            this parameter. If a value passed in this parameter is
            [`None`{.docutils .literal .notranslate}]{.pre}, the
            field will not be included in the request, even if it
            was present in the response [`&lt;form&gt;`{.docutils .literal
            .notranslate}]{.pre} element.

        -   **clickdata**
            ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
            .external}) -- attributes to lookup the control clicked.
            If it's not given, the form data will be submitted
            simulating a click on the first clickable element. In
            addition to html attributes, the control can be
            identified by its zero-based index relative to other
            submittable inputs inside the form, via the
            [`nr`{.docutils .literal .notranslate}]{.pre} attribute.

        -   **dont_click**
            ([*bool*](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference
            .external}) -- If True, the form data will be submitted
            without clicking in any element.

    The other parameters of this class method are passed directly to
    the [`FormRequest`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre} [`__init__`{.docutils .literal
    .notranslate}]{.pre} method.
</code></pre>
<p>:::</p>
<p>::: {#request-usage-examples .section}</p>
<h5 id="request-usage-examplesheaderlink"><a class="header" href="#request-usage-examplesheaderlink">Request usage examples<a href="#request-usage-examples" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>::: {#using-formrequest-to-send-data-via-http-post .section}</p>
<h6 id="using-formrequest-to-send-data-via-http-postheaderlink"><a class="header" href="#using-formrequest-to-send-data-via-http-postheaderlink">Using FormRequest to send data via HTTP POST<a href="#using-formrequest-to-send-data-via-http-post" title="Permalink to this heading">¶</a>{.headerlink}</a></h6>
<p>If you want to simulate a HTML Form POST in your spider and send a
couple of key-value fields, you can return a [<code>FormRequest</code>{.xref .py
.py-class .docutils .literal .notranslate}]{.pre} object (from your
spider) like this:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
return [
FormRequest(
url=&quot;http://www.example.com/post/action&quot;,
formdata={&quot;name&quot;: &quot;John Doe&quot;, &quot;age&quot;: &quot;27&quot;},
callback=self.after_post,
)
]
:::
:::
:::</p>
<p>::: {#using-formrequest-from-response-to-simulate-a-user-login .section}
[]{#topics-request-response-ref-request-userlogin}</p>
<h6 id="using-formrequestfrom_response-to-simulate-a-user-loginheaderlink"><a class="header" href="#using-formrequestfrom_response-to-simulate-a-user-loginheaderlink">Using FormRequest.from_response() to simulate a user login<a href="#using-formrequest-from-response-to-simulate-a-user-login" title="Permalink to this heading">¶</a>{.headerlink}</a></h6>
<p>It is usual for web sites to provide pre-populated form fields through
[<code>&lt;input</code>{.docutils .literal .notranslate}]{.pre}<code> </code>{.docutils .literal
.notranslate}[<code>type=&quot;hidden&quot;&gt;</code>{.docutils .literal .notranslate}]{.pre}
elements, such as session related data or authentication tokens (for
login pages). When scraping, you'll want these fields to be
automatically pre-populated and only override a couple of them, such as
the user name and password. You can use the
[<code>FormRequest.from_response()</code>{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre} method for this job. Here's an example spider which
uses it:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
import scrapy</p>
<pre><code>def authentication_failed(response):
    # TODO: Check the contents of the response and return True if it failed
    # or False if it succeeded.
    pass


class LoginSpider(scrapy.Spider):
    name = &quot;example.com&quot;
    start_urls = [&quot;http://www.example.com/users/login.php&quot;]

    def parse(self, response):
        return scrapy.FormRequest.from_response(
            response,
            formdata={&quot;username&quot;: &quot;john&quot;, &quot;password&quot;: &quot;secret&quot;},
            callback=self.after_login,
        )

    def after_login(self, response):
        if authentication_failed(response):
            self.logger.error(&quot;Login failed&quot;)
            return

        # continue scraping with authenticated session...
</code></pre>
<p>:::
:::
:::
:::</p>
<p>::: {#jsonrequest .section}</p>
<h5 id="jsonrequestheaderlink"><a class="header" href="#jsonrequestheaderlink">JsonRequest<a href="#jsonrequest" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The JsonRequest class extends the base <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} class with functionality for dealing with JSON requests.</p>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.http.]{.pre}]{.sig-prename .descclassname}[[JsonRequest]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[url]{.pre}]{.n}</em>[[]{.optional}, <em>[[...]{.pre} [data]{.pre}]{.n}</em>, <em>[[dumps_kwargs]{.pre}]{.n}</em>[]]{.optional}[)]{.sig-paren}<a href="_modules/scrapy/http/request/json_request.html#JsonRequest">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.http.JsonRequest" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   The <a href="#scrapy.http.JsonRequest" title="scrapy.http.JsonRequest">[<code>JsonRequest</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} class adds two new keyword parameters to the
[<code>__init__</code>{.docutils .literal .notranslate}]{.pre} method. The
remaining arguments are the same as for the <a href="#scrapy.http.Request" title="scrapy.http.Request">[<code>Request</code>{.xref .py
.py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} class and are not documented here.</p>
<pre><code>Using the [[`JsonRequest`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#scrapy.http.JsonRequest &quot;scrapy.http.JsonRequest&quot;){.reference
.internal} will set the [`Content-Type`{.docutils .literal
.notranslate}]{.pre} header to [`application/json`{.docutils
.literal .notranslate}]{.pre} and [`Accept`{.docutils .literal
.notranslate}]{.pre} header to [`application/json,`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`text/javascript,`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`*/*;`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`q=0.01`{.docutils .literal .notranslate}]{.pre}

Parameters

:   -   **data**
        ([*object*](https://docs.python.org/3/library/functions.html#object &quot;(in Python v3.12)&quot;){.reference
        .external}) -- is any JSON serializable object that needs to
        be JSON encoded and assigned to body. if
        [[`Request.body`{.xref .py .py-attr .docutils .literal
        .notranslate}]{.pre}](#scrapy.http.Request.body &quot;scrapy.http.Request.body&quot;){.reference
        .internal} argument is provided this parameter will be
        ignored. if [[`Request.body`{.xref .py .py-attr .docutils
        .literal
        .notranslate}]{.pre}](#scrapy.http.Request.body &quot;scrapy.http.Request.body&quot;){.reference
        .internal} argument is not provided and data argument is
        provided [[`Request.method`{.xref .py .py-attr .docutils
        .literal
        .notranslate}]{.pre}](#scrapy.http.Request.method &quot;scrapy.http.Request.method&quot;){.reference
        .internal} will be set to [`'POST'`{.docutils .literal
        .notranslate}]{.pre} automatically.

    -   **dumps_kwargs**
        ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
        .external}) -- Parameters that will be passed to underlying
        [[`json.dumps()`{.xref .py .py-func .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/json.html#json.dumps &quot;(in Python v3.12)&quot;){.reference
        .external} method which is used to serialize data into JSON
        format.

[[attributes]{.pre}]{.sig-name .descname}*[[:]{.pre}]{.p}[ ]{.w}[[Tuple]{.pre}](https://docs.python.org/3/library/typing.html#typing.Tuple &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[\...]{.pre}]{.p}[[\]]{.pre}]{.p}[ ]{.w}[[=]{.pre}]{.p}[ ]{.w}[(\'url\',]{.pre} [\'callback\',]{.pre} [\'method\',]{.pre} [\'headers\',]{.pre} [\'body\',]{.pre} [\'cookies\',]{.pre} [\'meta\',]{.pre} [\'encoding\',]{.pre} [\'priority\',]{.pre} [\'dont_filter\',]{.pre} [\'errback\',]{.pre} [\'flags\',]{.pre} [\'cb_kwargs\',]{.pre} [\'dumps_kwargs\')]{.pre}*[¶](#scrapy.http.JsonRequest.attributes &quot;Permalink to this definition&quot;){.headerlink}

:   A tuple of [[`str`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
    .external} objects containing the name of all public attributes
    of the class that are also keyword parameters of the
    [`__init__`{.docutils .literal .notranslate}]{.pre} method.

    Currently used by [[`Request.replace()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.replace &quot;scrapy.http.Request.replace&quot;){.reference
    .internal}, [[`Request.to_dict()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.Request.to_dict &quot;scrapy.http.Request.to_dict&quot;){.reference
    .internal} and [[`request_from_dict()`{.xref .py .py-func
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.utils.request.request_from_dict &quot;scrapy.utils.request.request_from_dict&quot;){.reference
    .internal}.
</code></pre>
<p>:::</p>
<p>::: {#jsonrequest-usage-example .section}</p>
<h5 id="jsonrequest-usage-exampleheaderlink"><a class="header" href="#jsonrequest-usage-exampleheaderlink">JsonRequest usage example<a href="#jsonrequest-usage-example" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Sending a JSON POST request with a JSON payload:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
data = {
&quot;name1&quot;: &quot;value1&quot;,
&quot;name2&quot;: &quot;value2&quot;,
}
yield JsonRequest(url=&quot;http://www.example.com/post/action&quot;, data=data)
:::
:::
:::
:::</p>
<p>::: {#response-objects .section}</p>
<h4 id="response-objectsheaderlink"><a class="header" href="#response-objectsheaderlink">Response objects<a href="#response-objects" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.http.]{.pre}]{.sig-prename .descclassname}[[Response]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[*]{.pre}]{.o}[[args]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)">[Any]{.pre}</a>{.reference .external}]{.n}</em>, <em>[[**]{.pre}]{.o}[[kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)">[Any]{.pre}</a>{.reference .external}]{.n}</em>[)]{.sig-paren}<a href="_modules/scrapy/http/response.html#Response">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.http.Response" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   An object that represents an HTTP response, which is usually
downloaded (by the Downloader) and fed to the Spiders for
processing.</p>
<pre><code>Parameters

:   -   **url**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external}) -- the URL of this response

    -   **status**
        ([*int*](https://docs.python.org/3/library/functions.html#int &quot;(in Python v3.12)&quot;){.reference
        .external}) -- the HTTP status of the response. Defaults to
        [`200`{.docutils .literal .notranslate}]{.pre}.

    -   **headers**
        ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference
        .external}) -- the headers of this response. The dict values
        can be strings (for single valued headers) or lists (for
        multi-valued headers).

    -   **body**
        ([*bytes*](https://docs.python.org/3/library/stdtypes.html#bytes &quot;(in Python v3.12)&quot;){.reference
        .external}) -- the response body. To access the decoded text
        as a string, use [`response.text`{.docutils .literal
        .notranslate}]{.pre} from an encoding-aware [[Response
        subclass]{.std
        .std-ref}](#topics-request-response-ref-response-subclasses){.hoverxref
        .tooltip .reference .internal}, such as
        [[`TextResponse`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}](#scrapy.http.TextResponse &quot;scrapy.http.TextResponse&quot;){.reference
        .internal}.

    -   **flags**
        ([*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- is a list containing the initial values for
        the [[`Response.flags`{.xref .py .py-attr .docutils .literal
        .notranslate}]{.pre}](#scrapy.http.Response.flags &quot;scrapy.http.Response.flags&quot;){.reference
        .internal} attribute. If given, the list will be shallow
        copied.

    -   **request** (*scrapy.Request*) -- the initial value of the
        [[`Response.request`{.xref .py .py-attr .docutils .literal
        .notranslate}]{.pre}](#scrapy.http.Response.request &quot;scrapy.http.Response.request&quot;){.reference
        .internal} attribute. This represents the [[`Request`{.xref
        .py .py-class .docutils .literal
        .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
        .internal} that generated this response.

    -   **certificate**
        ([*twisted.internet.ssl.Certificate*](https://docs.twisted.org/en/stable/api/twisted.internet.ssl.Certificate.html &quot;(in Twisted)&quot;){.reference
        .external}) -- an object representing the server's SSL
        certificate.

    -   **ip_address** ([[`ipaddress.IPv4Address`{.xref .py
        .py-class .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address &quot;(in Python v3.12)&quot;){.reference
        .external} or [[`ipaddress.IPv6Address`{.xref .py .py-class
        .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv6Address &quot;(in Python v3.12)&quot;){.reference
        .external}) -- The IP address of the server from which the
        Response originated.

    -   **protocol** ([[`str`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external}) -- The protocol that was used to download the
        response. For instance: &quot;HTTP/1.0&quot;, &quot;HTTP/1.1&quot;, &quot;h2&quot;

::: versionadded
[New in version 2.0.0: ]{.versionmodified .added}The
[`certificate`{.docutils .literal .notranslate}]{.pre} parameter.
:::

::: versionadded
[New in version 2.1.0: ]{.versionmodified .added}The
[`ip_address`{.docutils .literal .notranslate}]{.pre} parameter.
:::

::: versionadded
[New in version 2.5.0: ]{.versionmodified .added}The
[`protocol`{.docutils .literal .notranslate}]{.pre} parameter.
:::

[[url]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.url &quot;Permalink to this definition&quot;){.headerlink}

:   A string containing the URL of the response.

    This attribute is read-only. To change the URL of a Response use
    [[`replace()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.replace &quot;scrapy.http.Response.replace&quot;){.reference
    .internal}.

[[status]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.status &quot;Permalink to this definition&quot;){.headerlink}

:   An integer representing the HTTP status of the response.
    Example: [`200`{.docutils .literal .notranslate}]{.pre},
    [`404`{.docutils .literal .notranslate}]{.pre}.

[[headers]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.headers &quot;Permalink to this definition&quot;){.headerlink}

:   A dictionary-like object which contains the response headers.
    Values can be accessed using [`get()`{.xref .py .py-meth
    .docutils .literal .notranslate}]{.pre} to return the first
    header value with the specified name or [`getlist()`{.xref .py
    .py-meth .docutils .literal .notranslate}]{.pre} to return all
    header values with the specified name. For example, this call
    will give you all cookies in the headers:

    ::: {.highlight-default .notranslate}
    ::: highlight
        response.headers.getlist('Set-Cookie')
    :::
    :::

[[body]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.body &quot;Permalink to this definition&quot;){.headerlink}

:   The response body as bytes.

    If you want the body as a string, use
    [[`TextResponse.text`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.TextResponse.text &quot;scrapy.http.TextResponse.text&quot;){.reference
    .internal} (only available in [[`TextResponse`{.xref .py
    .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.TextResponse &quot;scrapy.http.TextResponse&quot;){.reference
    .internal} and subclasses).

    This attribute is read-only. To change the body of a Response
    use [[`replace()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.replace &quot;scrapy.http.Response.replace&quot;){.reference
    .internal}.

[[request]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.request &quot;Permalink to this definition&quot;){.headerlink}

:   The [[`Request`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal} object that generated this response. This attribute
    is assigned in the Scrapy engine, after the response and the
    request have passed through all [[Downloader Middlewares]{.std
    .std-ref}](index.html#topics-downloader-middleware){.hoverxref
    .tooltip .reference .internal}. In particular, this means that:

    -   HTTP redirections will create a new request from the request
        before redirection. It has the majority of the same metadata
        and original request attributes and gets assigned to the
        redirected response instead of the propagation of the
        original request.

    -   Response.request.url doesn't always equal Response.url

    -   This attribute is only available in the spider code, and in
        the [[Spider Middlewares]{.std
        .std-ref}](index.html#topics-spider-middleware){.hoverxref
        .tooltip .reference .internal}, but not in Downloader
        Middlewares (although you have the Request available there
        by other means) and handlers of the
        [[`response_downloaded`{.xref .std .std-signal .docutils
        .literal
        .notranslate}]{.pre}](index.html#std-signal-response_downloaded){.hoverxref
        .tooltip .reference .internal} signal.

[[meta]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.meta &quot;Permalink to this definition&quot;){.headerlink}

:   A shortcut to the [[`Request.meta`{.xref .py .py-attr .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.Request.meta &quot;scrapy.http.Request.meta&quot;){.reference
    .internal} attribute of the [[`Response.request`{.xref .py
    .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.request &quot;scrapy.http.Response.request&quot;){.reference
    .internal} object (i.e. [`self.request.meta`{.docutils .literal
    .notranslate}]{.pre}).

    Unlike the [[`Response.request`{.xref .py .py-attr .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.Response.request &quot;scrapy.http.Response.request&quot;){.reference
    .internal} attribute, the [[`Response.meta`{.xref .py .py-attr
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.meta &quot;scrapy.http.Response.meta&quot;){.reference
    .internal} attribute is propagated along redirects and retries,
    so you will get the original [[`Request.meta`{.xref .py .py-attr
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.meta &quot;scrapy.http.Request.meta&quot;){.reference
    .internal} sent from your spider.

    ::: {.admonition .seealso}
    See also

    [[`Request.meta`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.meta &quot;scrapy.http.Request.meta&quot;){.reference
    .internal} attribute
    :::

[[cb_kwargs]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.cb_kwargs &quot;Permalink to this definition&quot;){.headerlink}

:   ::: versionadded
    [New in version 2.0.]{.versionmodified .added}
    :::

    A shortcut to the [[`Request.cb_kwargs`{.xref .py .py-attr
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.cb_kwargs &quot;scrapy.http.Request.cb_kwargs&quot;){.reference
    .internal} attribute of the [[`Response.request`{.xref .py
    .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.request &quot;scrapy.http.Response.request&quot;){.reference
    .internal} object (i.e. [`self.request.cb_kwargs`{.docutils
    .literal .notranslate}]{.pre}).

    Unlike the [[`Response.request`{.xref .py .py-attr .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.Response.request &quot;scrapy.http.Response.request&quot;){.reference
    .internal} attribute, the [[`Response.cb_kwargs`{.xref .py
    .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.cb_kwargs &quot;scrapy.http.Response.cb_kwargs&quot;){.reference
    .internal} attribute is propagated along redirects and retries,
    so you will get the original [[`Request.cb_kwargs`{.xref .py
    .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.cb_kwargs &quot;scrapy.http.Request.cb_kwargs&quot;){.reference
    .internal} sent from your spider.

    ::: {.admonition .seealso}
    See also

    [[`Request.cb_kwargs`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request.cb_kwargs &quot;scrapy.http.Request.cb_kwargs&quot;){.reference
    .internal} attribute
    :::

[[flags]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.flags &quot;Permalink to this definition&quot;){.headerlink}

:   A list that contains flags for this response. Flags are labels
    used for tagging Responses. For example: [`'cached'`{.docutils
    .literal .notranslate}]{.pre}, [`'redirected`{.docutils .literal
    .notranslate}]{.pre}', etc. And they're shown on the string
    representation of the Response (\_\_str\_\_ method) which is
    used by the engine for logging.

[[certificate]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.certificate &quot;Permalink to this definition&quot;){.headerlink}

:   ::: versionadded
    [New in version 2.0.0.]{.versionmodified .added}
    :::

    A [[`twisted.internet.ssl.Certificate`{.xref .py .py-class
    .docutils .literal
    .notranslate}]{.pre}](https://docs.twisted.org/en/stable/api/twisted.internet.ssl.Certificate.html &quot;(in Twisted)&quot;){.reference
    .external} object representing the server's SSL certificate.

    Only populated for [`https`{.docutils .literal
    .notranslate}]{.pre} responses, [`None`{.docutils .literal
    .notranslate}]{.pre} otherwise.

[[ip_address]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.ip_address &quot;Permalink to this definition&quot;){.headerlink}

:   ::: versionadded
    [New in version 2.1.0.]{.versionmodified .added}
    :::

    The IP address of the server from which the Response originated.

    This attribute is currently only populated by the HTTP 1.1
    download handler, i.e. for [`http(s)`{.docutils .literal
    .notranslate}]{.pre} responses. For other handlers,
    [[`ip_address`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.ip_address &quot;scrapy.http.Response.ip_address&quot;){.reference
    .internal} is always [`None`{.docutils .literal
    .notranslate}]{.pre}.

[[protocol]{.pre}]{.sig-name .descname}[¶](#scrapy.http.Response.protocol &quot;Permalink to this definition&quot;){.headerlink}

:   ::: versionadded
    [New in version 2.5.0.]{.versionmodified .added}
    :::

    The protocol that was used to download the response. For
    instance: &quot;HTTP/1.0&quot;, &quot;HTTP/1.1&quot;

    This attribute is currently only populated by the HTTP download
    handlers, i.e. for [`http(s)`{.docutils .literal
    .notranslate}]{.pre} responses. For other handlers,
    [[`protocol`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.protocol &quot;scrapy.http.Response.protocol&quot;){.reference
    .internal} is always [`None`{.docutils .literal
    .notranslate}]{.pre}.

[[attributes]{.pre}]{.sig-name .descname}*[[:]{.pre}]{.p}[ ]{.w}[[Tuple]{.pre}](https://docs.python.org/3/library/typing.html#typing.Tuple &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[\...]{.pre}]{.p}[[\]]{.pre}]{.p}[ ]{.w}[[=]{.pre}]{.p}[ ]{.w}[(\'url\',]{.pre} [\'status\',]{.pre} [\'headers\',]{.pre} [\'body\',]{.pre} [\'flags\',]{.pre} [\'request\',]{.pre} [\'certificate\',]{.pre} [\'ip_address\',]{.pre} [\'protocol\')]{.pre}*[¶](#scrapy.http.Response.attributes &quot;Permalink to this definition&quot;){.headerlink}

:   A tuple of [[`str`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
    .external} objects containing the name of all public attributes
    of the class that are also keyword parameters of the
    [`__init__`{.docutils .literal .notranslate}]{.pre} method.

    Currently used by [[`Response.replace()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.replace &quot;scrapy.http.Response.replace&quot;){.reference
    .internal}.

[[copy]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response.html#Response.copy){.reference .internal}[¶](#scrapy.http.Response.copy &quot;Permalink to this definition&quot;){.headerlink}

:   Returns a new Response which is a copy of this Response.

[[replace]{.pre}]{.sig-name .descname}[(]{.sig-paren}[\[]{.optional}*[[url]{.pre}]{.n}*, *[[status]{.pre}]{.n}*, *[[headers]{.pre}]{.n}*, *[[body]{.pre}]{.n}*, *[[request]{.pre}]{.n}*, *[[flags]{.pre}]{.n}*, *[[cls]{.pre}]{.n}*[\]]{.optional}[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response.html#Response.replace){.reference .internal}[¶](#scrapy.http.Response.replace &quot;Permalink to this definition&quot;){.headerlink}

:   Returns a Response object with the same members, except for
    those members given new values by whichever keyword arguments
    are specified. The attribute [[`Response.meta`{.xref .py
    .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.meta &quot;scrapy.http.Response.meta&quot;){.reference
    .internal} is copied by default.

[[urljoin]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[url]{.pre}]{.n}*[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response.html#Response.urljoin){.reference .internal}[¶](#scrapy.http.Response.urljoin &quot;Permalink to this definition&quot;){.headerlink}

:   Constructs an absolute url by combining the Response's
    [[`url`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.url &quot;scrapy.http.Response.url&quot;){.reference
    .internal} with a possible relative url.

    This is a wrapper over [[`urljoin()`{.xref .py .py-func
    .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urljoin &quot;(in Python v3.12)&quot;){.reference
    .external}, it's merely an alias for making this call:

    ::: {.highlight-default .notranslate}
    ::: highlight
        urllib.parse.urljoin(response.url, url)
    :::
    :::

[[follow]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[url]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Link]{.pre}](index.html#scrapy.link.Link &quot;scrapy.link.Link&quot;){.reference .internal}[[\]]{.pre}]{.p}]{.n}*, *[[callback]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Callable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Callable &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[method]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[\'GET\']{.pre}]{.default_value}*, *[[headers]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Mapping]{.pre}](https://docs.python.org/3/library/typing.html#typing.Mapping &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[AnyStr]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[,]{.pre}]{.p}[ ]{.w}[[Iterable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Iterable &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Tuple]{.pre}](https://docs.python.org/3/library/typing.html#typing.Tuple &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[AnyStr]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[body]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[bytes]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[cookies]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[dict]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[List]{.pre}](https://docs.python.org/3/library/typing.html#typing.List &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[dict]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[meta]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[encoding]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[\'utf-8\']{.pre}]{.default_value}*, *[[priority]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[int]{.pre}](https://docs.python.org/3/library/functions.html#int &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[0]{.pre}]{.default_value}*, *[[dont_filter]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[bool]{.pre}](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*, *[[errback]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Callable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Callable &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[cb_kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[flags]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[List]{.pre}](https://docs.python.org/3/library/typing.html#typing.List &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[→]{.sig-return-icon} [[[Request]{.pre}](index.html#scrapy.http.Request &quot;scrapy.http.request.Request&quot;){.reference .internal}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response.html#Response.follow){.reference .internal}[¶](#scrapy.http.Response.follow &quot;Permalink to this definition&quot;){.headerlink}

:   Return a [[`Request`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal} instance to follow a link [`url`{.docutils .literal
    .notranslate}]{.pre}. It accepts the same arguments as
    [`Request.__init__`{.docutils .literal .notranslate}]{.pre}
    method, but [`url`{.docutils .literal .notranslate}]{.pre} can
    be a relative URL or a [`scrapy.link.Link`{.docutils .literal
    .notranslate}]{.pre} object, not only an absolute URL.

    [[`TextResponse`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.TextResponse &quot;scrapy.http.TextResponse&quot;){.reference
    .internal} provides a [[`follow()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.TextResponse.follow &quot;scrapy.http.TextResponse.follow&quot;){.reference
    .internal} method which supports selectors in addition to
    absolute/relative URLs and Link objects.

    ::: versionadded
    [New in version 2.0: ]{.versionmodified .added}The *flags*
    parameter.
    :::

[[follow_all]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[urls]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Iterable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Iterable &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Link]{.pre}](index.html#scrapy.link.Link &quot;scrapy.link.Link&quot;){.reference .internal}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}*, *[[callback]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Callable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Callable &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[method]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[\'GET\']{.pre}]{.default_value}*, *[[headers]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Mapping]{.pre}](https://docs.python.org/3/library/typing.html#typing.Mapping &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[AnyStr]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[,]{.pre}]{.p}[ ]{.w}[[Iterable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Iterable &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Tuple]{.pre}](https://docs.python.org/3/library/typing.html#typing.Tuple &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[AnyStr]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[body]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[bytes]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[cookies]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[dict]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[List]{.pre}](https://docs.python.org/3/library/typing.html#typing.List &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[dict]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[meta]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[encoding]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[\'utf-8\']{.pre}]{.default_value}*, *[[priority]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[int]{.pre}](https://docs.python.org/3/library/functions.html#int &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[0]{.pre}]{.default_value}*, *[[dont_filter]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[bool]{.pre}](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*, *[[errback]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Callable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Callable &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[cb_kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[flags]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[List]{.pre}](https://docs.python.org/3/library/typing.html#typing.List &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[→]{.sig-return-icon} [[[Generator]{.pre}](https://docs.python.org/3/library/typing.html#typing.Generator &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Request]{.pre}](index.html#scrapy.http.Request &quot;scrapy.http.request.Request&quot;){.reference .internal}[[,]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response.html#Response.follow_all){.reference .internal}[¶](#scrapy.http.Response.follow_all &quot;Permalink to this definition&quot;){.headerlink}

:   ::: versionadded
    [New in version 2.0.]{.versionmodified .added}
    :::

    Return an iterable of [[`Request`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal} instances to follow all links in [`urls`{.docutils
    .literal .notranslate}]{.pre}. It accepts the same arguments as
    [`Request.__init__`{.docutils .literal .notranslate}]{.pre}
    method, but elements of [`urls`{.docutils .literal
    .notranslate}]{.pre} can be relative URLs or [[`Link`{.xref .py
    .py-class .docutils .literal
    .notranslate}]{.pre}](index.html#scrapy.link.Link &quot;scrapy.link.Link&quot;){.reference
    .internal} objects, not only absolute URLs.

    [[`TextResponse`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.TextResponse &quot;scrapy.http.TextResponse&quot;){.reference
    .internal} provides a [[`follow_all()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.TextResponse.follow_all &quot;scrapy.http.TextResponse.follow_all&quot;){.reference
    .internal} method which supports selectors in addition to
    absolute/relative URLs and Link objects.
</code></pre>
<p>:::</p>
<p>::: {#response-subclasses .section}
[]{#topics-request-response-ref-response-subclasses}</p>
<h4 id="response-subclassesheaderlink"><a class="header" href="#response-subclassesheaderlink">Response subclasses<a href="#response-subclasses" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>Here is the list of available built-in Response subclasses. You can also
subclass the Response class to implement your own functionality.</p>
<p>::: {#textresponse-objects .section}</p>
<h5 id="textresponse-objectsheaderlink"><a class="header" href="#textresponse-objectsheaderlink">TextResponse objects<a href="#textresponse-objects" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.http.]{.pre}]{.sig-prename .descclassname}[[TextResponse]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[url]{.pre}]{.n}</em>[[]{.optional}, <em>[[encoding]{.pre}]{.n}</em>[[]{.optional}, <em>[[...]{.pre}]{.n}</em>[]]{.optional}[]]{.optional}[)]{.sig-paren}<a href="_modules/scrapy/http/response/text.html#TextResponse">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.http.TextResponse" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   <a href="#scrapy.http.TextResponse" title="scrapy.http.TextResponse">[<code>TextResponse</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} objects adds encoding capabilities to the base
<a href="#scrapy.http.Response" title="scrapy.http.Response">[<code>Response</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} class, which is meant to be used only for binary data,
such as images, sounds or any media file.</p>
<pre><code>[[`TextResponse`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#scrapy.http.TextResponse &quot;scrapy.http.TextResponse&quot;){.reference
.internal} objects support a new [`__init__`{.docutils .literal
.notranslate}]{.pre} method argument, in addition to the base
[[`Response`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#scrapy.http.Response &quot;scrapy.http.Response&quot;){.reference
.internal} objects. The remaining functionality is the same as for
the [[`Response`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#scrapy.http.Response &quot;scrapy.http.Response&quot;){.reference
.internal} class and is not documented here.

Parameters

:   **encoding**
    ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
    .external}) -- is a string which contains the encoding to use
    for this response. If you create a [[`TextResponse`{.xref .py
    .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.TextResponse &quot;scrapy.http.TextResponse&quot;){.reference
    .internal} object with a string as body, it will be converted to
    bytes encoded using this encoding. If *encoding* is
    [`None`{.docutils .literal .notranslate}]{.pre} (default), the
    encoding will be looked up in the response headers and body
    instead.

[[`TextResponse`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#scrapy.http.TextResponse &quot;scrapy.http.TextResponse&quot;){.reference
.internal} objects support the following attributes in addition to
the standard [[`Response`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#scrapy.http.Response &quot;scrapy.http.Response&quot;){.reference
.internal} ones:

[[text]{.pre}]{.sig-name .descname}[¶](#scrapy.http.TextResponse.text &quot;Permalink to this definition&quot;){.headerlink}

:   Response body, as a string.

    The same as [`response.body.decode(response.encoding)`{.docutils
    .literal .notranslate}]{.pre}, but the result is cached after
    the first call, so you can access [`response.text`{.docutils
    .literal .notranslate}]{.pre} multiple times without extra
    overhead.

    ::: {.admonition .note}
    Note

    [`str(response.body)`{.docutils .literal .notranslate}]{.pre} is
    not a correct way to convert the response body into a string:

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        &gt;&gt;&gt; str(b&quot;body&quot;)
        &quot;b'body'&quot;
    :::
    :::
    :::

[[encoding]{.pre}]{.sig-name .descname}[¶](#scrapy.http.TextResponse.encoding &quot;Permalink to this definition&quot;){.headerlink}

:   A string with the encoding of this response. The encoding is
    resolved by trying the following mechanisms, in order:

    1.  the encoding passed in the [`__init__`{.docutils .literal
        .notranslate}]{.pre} method [`encoding`{.docutils .literal
        .notranslate}]{.pre} argument

    2.  the encoding declared in the Content-Type HTTP header. If
        this encoding is not valid (i.e. unknown), it is ignored and
        the next resolution mechanism is tried.

    3.  the encoding declared in the response body. The TextResponse
        class doesn't provide any special functionality for this.
        However, the [[`HtmlResponse`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](#scrapy.http.HtmlResponse &quot;scrapy.http.HtmlResponse&quot;){.reference
        .internal} and [[`XmlResponse`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](#scrapy.http.XmlResponse &quot;scrapy.http.XmlResponse&quot;){.reference
        .internal} classes do.

    4.  the encoding inferred by looking at the response body. This
        is the more fragile method but also the last one tried.

[[selector]{.pre}]{.sig-name .descname}[¶](#scrapy.http.TextResponse.selector &quot;Permalink to this definition&quot;){.headerlink}

:   A [`Selector`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre} instance using the response as target. The
    selector is lazily instantiated on first access.

[[attributes]{.pre}]{.sig-name .descname}*[[:]{.pre}]{.p}[ ]{.w}[Tuple]{.pre}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[\...]{.pre}]{.p}[[\]]{.pre}]{.p}[ ]{.w}[[=]{.pre}]{.p}[ ]{.w}[(\'url\',]{.pre} [\'status\',]{.pre} [\'headers\',]{.pre} [\'body\',]{.pre} [\'flags\',]{.pre} [\'request\',]{.pre} [\'certificate\',]{.pre} [\'ip_address\',]{.pre} [\'protocol\',]{.pre} [\'encoding\')]{.pre}*[¶](#scrapy.http.TextResponse.attributes &quot;Permalink to this definition&quot;){.headerlink}

:   A tuple of [[`str`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
    .external} objects containing the name of all public attributes
    of the class that are also keyword parameters of the
    [`__init__`{.docutils .literal .notranslate}]{.pre} method.

    Currently used by [[`Response.replace()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Response.replace &quot;scrapy.http.Response.replace&quot;){.reference
    .internal}.

[[`TextResponse`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#scrapy.http.TextResponse &quot;scrapy.http.TextResponse&quot;){.reference
.internal} objects support the following methods in addition to the
standard [[`Response`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#scrapy.http.Response &quot;scrapy.http.Response&quot;){.reference
.internal} ones:

[[jmespath]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[query]{.pre}]{.n}*[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response/text.html#TextResponse.jmespath){.reference .internal}[¶](#scrapy.http.TextResponse.jmespath &quot;Permalink to this definition&quot;){.headerlink}

:   A shortcut to [`TextResponse.selector.jmespath(query)`{.docutils
    .literal .notranslate}]{.pre}:

    ::: {.highlight-default .notranslate}
    ::: highlight
        response.jmespath('object.[*]')
    :::
    :::

[[xpath]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[query]{.pre}]{.n}*[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response/text.html#TextResponse.xpath){.reference .internal}[¶](#scrapy.http.TextResponse.xpath &quot;Permalink to this definition&quot;){.headerlink}

:   A shortcut to [`TextResponse.selector.xpath(query)`{.docutils
    .literal .notranslate}]{.pre}:

    ::: {.highlight-default .notranslate}
    ::: highlight
        response.xpath('//p')
    :::
    :::

[[css]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[query]{.pre}]{.n}*[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response/text.html#TextResponse.css){.reference .internal}[¶](#scrapy.http.TextResponse.css &quot;Permalink to this definition&quot;){.headerlink}

:   A shortcut to [`TextResponse.selector.css(query)`{.docutils
    .literal .notranslate}]{.pre}:

    ::: {.highlight-default .notranslate}
    ::: highlight
        response.css('p')
    :::
    :::

[[follow]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[url]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Link]{.pre}](index.html#scrapy.link.Link &quot;scrapy.link.Link&quot;){.reference .internal}[[,]{.pre}]{.p}[ ]{.w}[Selector]{.pre}[[\]]{.pre}]{.p}]{.n}*, *[[callback]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Callable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Callable &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[method]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[\'GET\']{.pre}]{.default_value}*, *[[headers]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Mapping]{.pre}](https://docs.python.org/3/library/typing.html#typing.Mapping &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[AnyStr]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[,]{.pre}]{.p}[ ]{.w}[[Iterable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Iterable &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Tuple]{.pre}](https://docs.python.org/3/library/typing.html#typing.Tuple &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[AnyStr]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[body]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[bytes]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[cookies]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[dict]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[List]{.pre}](https://docs.python.org/3/library/typing.html#typing.List &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[dict]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[meta]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[encoding]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[priority]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[int]{.pre}](https://docs.python.org/3/library/functions.html#int &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[0]{.pre}]{.default_value}*, *[[dont_filter]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[bool]{.pre}](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*, *[[errback]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Callable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Callable &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[cb_kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[flags]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[List]{.pre}](https://docs.python.org/3/library/typing.html#typing.List &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[→]{.sig-return-icon} [[[Request]{.pre}](index.html#scrapy.http.Request &quot;scrapy.http.request.Request&quot;){.reference .internal}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response/text.html#TextResponse.follow){.reference .internal}[¶](#scrapy.http.TextResponse.follow &quot;Permalink to this definition&quot;){.headerlink}

:   Return a [[`Request`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal} instance to follow a link [`url`{.docutils .literal
    .notranslate}]{.pre}. It accepts the same arguments as
    [`Request.__init__`{.docutils .literal .notranslate}]{.pre}
    method, but [`url`{.docutils .literal .notranslate}]{.pre} can
    be not only an absolute URL, but also

    -   a relative URL

    -   a [[`Link`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}](index.html#scrapy.link.Link &quot;scrapy.link.Link&quot;){.reference
        .internal} object, e.g. the result of [[Link
        Extractors]{.std
        .std-ref}](index.html#topics-link-extractors){.hoverxref
        .tooltip .reference .internal}

    -   a [[`Selector`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}](index.html#scrapy.selector.Selector &quot;scrapy.selector.Selector&quot;){.reference
        .internal} object for a [`&lt;link&gt;`{.docutils .literal
        .notranslate}]{.pre} or [`&lt;a&gt;`{.docutils .literal
        .notranslate}]{.pre} element, e.g.
        [`response.css('a.my_link')[0]`{.docutils .literal
        .notranslate}]{.pre}

    -   an attribute [[`Selector`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](index.html#scrapy.selector.Selector &quot;scrapy.selector.Selector&quot;){.reference
        .internal} (not SelectorList), e.g.
        [`response.css('a::attr(href)')[0]`{.docutils .literal
        .notranslate}]{.pre} or
        [`response.xpath('//img/@src')[0]`{.docutils .literal
        .notranslate}]{.pre}

    See [[A shortcut for creating Requests]{.std
    .std-ref}](index.html#response-follow-example){.hoverxref
    .tooltip .reference .internal} for usage examples.

[[follow_all]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[urls]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Iterable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Iterable &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Link]{.pre}](index.html#scrapy.link.Link &quot;scrapy.link.Link&quot;){.reference .internal}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[,]{.pre}]{.p}[ ]{.w}[SelectorList]{.pre}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[callback]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Callable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Callable &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[method]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[\'GET\']{.pre}]{.default_value}*, *[[headers]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Mapping]{.pre}](https://docs.python.org/3/library/typing.html#typing.Mapping &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[AnyStr]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[,]{.pre}]{.p}[ ]{.w}[[Iterable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Iterable &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Tuple]{.pre}](https://docs.python.org/3/library/typing.html#typing.Tuple &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[AnyStr]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[body]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[bytes]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[cookies]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Union]{.pre}](https://docs.python.org/3/library/typing.html#typing.Union &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[dict]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[List]{.pre}](https://docs.python.org/3/library/typing.html#typing.List &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[dict]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[meta]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[encoding]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[priority]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[int]{.pre}](https://docs.python.org/3/library/functions.html#int &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[0]{.pre}]{.default_value}*, *[[dont_filter]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[bool]{.pre}](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*, *[[errback]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Callable]{.pre}](https://docs.python.org/3/library/typing.html#typing.Callable &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[cb_kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[flags]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[List]{.pre}](https://docs.python.org/3/library/typing.html#typing.List &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[css]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[xpath]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Optional]{.pre}](https://docs.python.org/3/library/typing.html#typing.Optional &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[→]{.sig-return-icon} [[[Generator]{.pre}](https://docs.python.org/3/library/typing.html#typing.Generator &quot;(in Python v3.12)&quot;){.reference .external}[[\[]{.pre}]{.p}[[Request]{.pre}](index.html#scrapy.http.Request &quot;scrapy.http.request.Request&quot;){.reference .internal}[[,]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None &quot;(in Python v3.12)&quot;){.reference .external}[[,]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None &quot;(in Python v3.12)&quot;){.reference .external}[[\]]{.pre}]{.p}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response/text.html#TextResponse.follow_all){.reference .internal}[¶](#scrapy.http.TextResponse.follow_all &quot;Permalink to this definition&quot;){.headerlink}

:   A generator that produces [[`Request`{.xref .py .py-class
    .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal} instances to follow all links in [`urls`{.docutils
    .literal .notranslate}]{.pre}. It accepts the same arguments as
    the [[`Request`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#scrapy.http.Request &quot;scrapy.http.Request&quot;){.reference
    .internal}'s [`__init__`{.docutils .literal .notranslate}]{.pre}
    method, except that each [`urls`{.docutils .literal
    .notranslate}]{.pre} element does not need to be an absolute
    URL, it can be any of the following:

    -   a relative URL

    -   a [[`Link`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}](index.html#scrapy.link.Link &quot;scrapy.link.Link&quot;){.reference
        .internal} object, e.g. the result of [[Link
        Extractors]{.std
        .std-ref}](index.html#topics-link-extractors){.hoverxref
        .tooltip .reference .internal}

    -   a [[`Selector`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}](index.html#scrapy.selector.Selector &quot;scrapy.selector.Selector&quot;){.reference
        .internal} object for a [`&lt;link&gt;`{.docutils .literal
        .notranslate}]{.pre} or [`&lt;a&gt;`{.docutils .literal
        .notranslate}]{.pre} element, e.g.
        [`response.css('a.my_link')[0]`{.docutils .literal
        .notranslate}]{.pre}

    -   an attribute [[`Selector`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](index.html#scrapy.selector.Selector &quot;scrapy.selector.Selector&quot;){.reference
        .internal} (not SelectorList), e.g.
        [`response.css('a::attr(href)')[0]`{.docutils .literal
        .notranslate}]{.pre} or
        [`response.xpath('//img/@src')[0]`{.docutils .literal
        .notranslate}]{.pre}

    In addition, [`css`{.docutils .literal .notranslate}]{.pre} and
    [`xpath`{.docutils .literal .notranslate}]{.pre} arguments are
    accepted to perform the link extraction within the
    [`follow_all`{.docutils .literal .notranslate}]{.pre} method
    (only one of [`urls`{.docutils .literal .notranslate}]{.pre},
    [`css`{.docutils .literal .notranslate}]{.pre} and
    [`xpath`{.docutils .literal .notranslate}]{.pre} is accepted).

    Note that when passing a [`SelectorList`{.docutils .literal
    .notranslate}]{.pre} as argument for the [`urls`{.docutils
    .literal .notranslate}]{.pre} parameter or using the
    [`css`{.docutils .literal .notranslate}]{.pre} or
    [`xpath`{.docutils .literal .notranslate}]{.pre} parameters,
    this method will not produce requests for selectors from which
    links cannot be obtained (for instance, anchor tags without an
    [`href`{.docutils .literal .notranslate}]{.pre} attribute)

[[json]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response/text.html#TextResponse.json){.reference .internal}[¶](#scrapy.http.TextResponse.json &quot;Permalink to this definition&quot;){.headerlink}

:   ::: versionadded
    [New in version 2.2.]{.versionmodified .added}
    :::

    Deserialize a JSON document to a Python object.

    Returns a Python object from deserialized JSON document. The
    result is cached after the first call.

[[urljoin]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[url]{.pre}]{.n}*[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/http/response/text.html#TextResponse.urljoin){.reference .internal}[¶](#scrapy.http.TextResponse.urljoin &quot;Permalink to this definition&quot;){.headerlink}

:   Constructs an absolute url by combining the Response's base url
    with a possible relative url. The base url shall be extracted
    from the [`&lt;base&gt;`{.docutils .literal .notranslate}]{.pre} tag,
    or just the Response's [`url`{.xref .py .py-attr .docutils
    .literal .notranslate}]{.pre} if there is no such tag.
</code></pre>
<p>:::</p>
<p>::: {#htmlresponse-objects .section}</p>
<h5 id="htmlresponse-objectsheaderlink"><a class="header" href="#htmlresponse-objectsheaderlink">HtmlResponse objects<a href="#htmlresponse-objects" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.http.]{.pre}]{.sig-prename .descclassname}[[HtmlResponse]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[url]{.pre}]{.n}</em>[[]{.optional}, <em>[[...]{.pre}]{.n}</em>[]]{.optional}[)]{.sig-paren}<a href="_modules/scrapy/http/response/html.html#HtmlResponse">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.http.HtmlResponse" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   The <a href="#scrapy.http.HtmlResponse" title="scrapy.http.HtmlResponse">[<code>HtmlResponse</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} class is a subclass of <a href="#scrapy.http.TextResponse" title="scrapy.http.TextResponse">[<code>TextResponse</code>{.xref .py
.py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} which adds encoding auto-discovering support by looking
into the HTML <a href="https://www.w3schools.com/TAGS/att_meta_http_equiv.asp">meta
http-equiv</a>{.reference
.external} attribute. See <a href="#scrapy.http.TextResponse.encoding" title="scrapy.http.TextResponse.encoding">[<code>TextResponse.encoding</code>{.xref .py
.py-attr .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}.
:::</p>
<p>::: {#xmlresponse-objects .section}</p>
<h5 id="xmlresponse-objectsheaderlink"><a class="header" href="#xmlresponse-objectsheaderlink">XmlResponse objects<a href="#xmlresponse-objects" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.http.]{.pre}]{.sig-prename .descclassname}[[XmlResponse]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[url]{.pre}]{.n}</em>[[]{.optional}, <em>[[...]{.pre}]{.n}</em>[]]{.optional}[)]{.sig-paren}<a href="_modules/scrapy/http/response/xml.html#XmlResponse">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.http.XmlResponse" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   The <a href="#scrapy.http.XmlResponse" title="scrapy.http.XmlResponse">[<code>XmlResponse</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} class is a subclass of <a href="#scrapy.http.TextResponse" title="scrapy.http.TextResponse">[<code>TextResponse</code>{.xref .py
.py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} which adds encoding auto-discovering support by looking
into the XML declaration line. See <a href="#scrapy.http.TextResponse.encoding" title="scrapy.http.TextResponse.encoding">[<code>TextResponse.encoding</code>{.xref
.py .py-attr .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}.
:::
:::
:::</p>
<p>[]{#document-topics/link-extractors}</p>
<p>::: {#link-extractors .section}
[]{#topics-link-extractors}</p>
<h3 id="link-extractorsheaderlink"><a class="header" href="#link-extractorsheaderlink">Link Extractors<a href="#link-extractors" title="Permalink to this heading">¶</a>{.headerlink}</a></h3>
<p>A link extractor is an object that extracts links from responses.</p>
<p>The [<code>__init__</code>{.docutils .literal .notranslate}]{.pre} method of
<a href="#scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor" title="scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor">[<code>LxmlLinkExtractor</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} takes settings that determine which links may be extracted.
<a href="#scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor.extract_links" title="scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor.extract_links">[<code>LxmlLinkExtractor.extract_links</code>{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal} returns a list of matching <a href="#scrapy.link.Link" title="scrapy.link.Link">[<code>Link</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} objects from a <a href="index.html#scrapy.http.Response" title="scrapy.http.Response">[<code>Response</code>{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal} object.</p>
<p>Link extractors are used in <a href="index.html#scrapy.spiders.CrawlSpider" title="scrapy.spiders.CrawlSpider">[<code>CrawlSpider</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} spiders through a set of <a href="index.html#scrapy.spiders.Rule" title="scrapy.spiders.Rule">[<code>Rule</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} objects.</p>
<p>You can also use link extractors in regular spiders. For example, you
can instantiate <a href="#scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor" title="scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor">[<code>LinkExtractor</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} into a class variable in your spider, and use it from your
spider callbacks:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
def parse(self, response):
for link in self.link_extractor.extract_links(response):
yield Request(link.url, callback=self.parse)
:::
:::</p>
<p>::: {#module-scrapy.linkextractors .section}
[]{#link-extractor-reference}[]{#topics-link-extractors-ref}</p>
<h4 id="link-extractor-referenceheaderlink"><a class="header" href="#link-extractor-referenceheaderlink">Link extractor reference<a href="#module-scrapy.linkextractors" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>The link extractor class is
<a href="#scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor" title="scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor">[<code>scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor</code>{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}. For convenience it can also be imported as
[<code>scrapy.linkextractors.LinkExtractor</code>{.docutils .literal
.notranslate}]{.pre}:</p>
<p>::: {.highlight-default .notranslate}
::: highlight
from scrapy.linkextractors import LinkExtractor
:::
:::</p>
<p>::: {#module-scrapy.linkextractors.lxmlhtml .section}
[]{#lxmllinkextractor}</p>
<h5 id="lxmllinkextractorheaderlink"><a class="header" href="#lxmllinkextractorheaderlink">LxmlLinkExtractor<a href="#module-scrapy.linkextractors.lxmlhtml" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.linkextractors.lxmlhtml.]{.pre}]{.sig-prename .descclassname}[[LxmlLinkExtractor]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[allow]{.pre}]{.n}[[=]{.pre}]{.o}[[()]{.pre}]{.default_value}</em>, <em>[[deny]{.pre}]{.n}[[=]{.pre}]{.o}[[()]{.pre}]{.default_value}</em>, <em>[[allow_domains]{.pre}]{.n}[[=]{.pre}]{.o}[[()]{.pre}]{.default_value}</em>, <em>[[deny_domains]{.pre}]{.n}[[=]{.pre}]{.o}[[()]{.pre}]{.default_value}</em>, <em>[[deny_extensions]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}</em>, <em>[[restrict_xpaths]{.pre}]{.n}[[=]{.pre}]{.o}[[()]{.pre}]{.default_value}</em>, <em>[[restrict_css]{.pre}]{.n}[[=]{.pre}]{.o}[[()]{.pre}]{.default_value}</em>, <em>[[tags]{.pre}]{.n}[[=]{.pre}]{.o}[[('a',]{.pre} ['area')]{.pre}]{.default_value}</em>, <em>[[attrs]{.pre}]{.n}[[=]{.pre}]{.o}[[('href',)]{.pre}]{.default_value}</em>, <em>[[canonicalize]{.pre}]{.n}[[=]{.pre}]{.o}[[False]{.pre}]{.default_value}</em>, <em>[[unique]{.pre}]{.n}[[=]{.pre}]{.o}[[True]{.pre}]{.default_value}</em>, <em>[[process_value]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}</em>, <em>[[strip]{.pre}]{.n}[[=]{.pre}]{.o}[[True]{.pre}]{.default_value}</em>[)]{.sig-paren}<a href="_modules/scrapy/linkextractors/lxmlhtml.html#LxmlLinkExtractor">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   LxmlLinkExtractor is the recommended link extractor with handy
filtering options. It is implemented using lxml's robust HTMLParser.</p>
<pre><code>Parameters

:   -   **allow**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- a single regular expression (or list of
        regular expressions) that the (absolute) urls must match in
        order to be extracted. If not given (or empty), it will
        match all links.

    -   **deny**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- a single regular expression (or list of
        regular expressions) that the (absolute) urls must match in
        order to be excluded (i.e. not extracted). It has precedence
        over the [`allow`{.docutils .literal .notranslate}]{.pre}
        parameter. If not given (or empty) it won't exclude any
        links.

    -   **allow_domains**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- a single value or a list of string containing
        domains which will be considered for extracting the links

    -   **deny_domains**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- a single value or a list of strings
        containing domains which won't be considered for extracting
        the links

    -   **deny_extensions**
        ([*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) --

        a single value or list of strings containing extensions that
        should be ignored when extracting links. If not given, it
        will default to
        [`scrapy.linkextractors.IGNORED_EXTENSIONS`{.xref .py
        .py-data .docutils .literal .notranslate}]{.pre}.

        ::: versionchanged
        [Changed in version 2.0: ]{.versionmodified
        .changed}[`IGNORED_EXTENSIONS`{.xref .py .py-data .docutils
        .literal .notranslate}]{.pre} now includes [`7z`{.docutils
        .literal .notranslate}]{.pre}, [`7zip`{.docutils .literal
        .notranslate}]{.pre}, [`apk`{.docutils .literal
        .notranslate}]{.pre}, [`bz2`{.docutils .literal
        .notranslate}]{.pre}, [`cdr`{.docutils .literal
        .notranslate}]{.pre}, [`dmg`{.docutils .literal
        .notranslate}]{.pre}, [`ico`{.docutils .literal
        .notranslate}]{.pre}, [`iso`{.docutils .literal
        .notranslate}]{.pre}, [`tar`{.docutils .literal
        .notranslate}]{.pre}, [`tar.gz`{.docutils .literal
        .notranslate}]{.pre}, [`webm`{.docutils .literal
        .notranslate}]{.pre}, and [`xz`{.docutils .literal
        .notranslate}]{.pre}.
        :::

    -   **restrict_xpaths**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- is an XPath (or list of XPath's) which
        defines regions inside the response where links should be
        extracted from. If given, only the text selected by those
        XPath will be scanned for links. See examples below.

    -   **restrict_css**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- a CSS selector (or list of selectors) which
        defines regions inside the response where links should be
        extracted from. Has the same behaviour as
        [`restrict_xpaths`{.docutils .literal .notranslate}]{.pre}.

    -   **restrict_text**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- a single regular expression (or list of
        regular expressions) that the link's text must match in
        order to be extracted. If not given (or empty), it will
        match all links. If a list of regular expressions is given,
        the link will be extracted if it matches at least one.

    -   **tags**
        ([*str*](https://docs.python.org/3/library/stdtypes.html#str &quot;(in Python v3.12)&quot;){.reference
        .external} *or*
        [*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- a tag or a list of tags to consider when
        extracting links. Defaults to [`('a',`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`'area')`{.docutils .literal
        .notranslate}]{.pre}.

    -   **attrs**
        ([*list*](https://docs.python.org/3/library/stdtypes.html#list &quot;(in Python v3.12)&quot;){.reference
        .external}) -- an attribute or list of attributes which
        should be considered when looking for links to extract (only
        for those tags specified in the [`tags`{.docutils .literal
        .notranslate}]{.pre} parameter). Defaults to
        [`('href',)`{.docutils .literal .notranslate}]{.pre}

    -   **canonicalize**
        ([*bool*](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference
        .external}) -- canonicalize each extracted url (using
        w3lib.url.canonicalize_url). Defaults to [`False`{.docutils
        .literal .notranslate}]{.pre}. Note that canonicalize_url is
        meant for duplicate checking; it can change the URL visible
        at server side, so the response can be different for
        requests with canonicalized and raw URLs. If you're using
        LinkExtractor to follow links it is more robust to keep the
        default [`canonicalize=False`{.docutils .literal
        .notranslate}]{.pre}.

    -   **unique**
        ([*bool*](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference
        .external}) -- whether duplicate filtering should be applied
        to extracted links.

    -   **process_value**
        ([*collections.abc.Callable*](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable &quot;(in Python v3.12)&quot;){.reference
        .external}) --

        a function which receives each value extracted from the tag
        and attributes scanned and can modify the value and return a
        new one, or return [`None`{.docutils .literal
        .notranslate}]{.pre} to ignore the link altogether. If not
        given, [`process_value`{.docutils .literal
        .notranslate}]{.pre} defaults to [`lambda`{.docutils
        .literal .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`x:`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`x`{.docutils .literal .notranslate}]{.pre}.

        For example, to extract links from this code:

        ::: {.highlight-html .notranslate}
        ::: highlight
            &lt;a href=&quot;javascript:goToPage('../other/page.html'); return false&quot;&gt;Link text&lt;/a&gt;
        :::
        :::

        You can use the following function in
        [`process_value`{.docutils .literal .notranslate}]{.pre}:

        ::: {.highlight-python .notranslate}
        ::: highlight
            def process_value(value):
                m = re.search(r&quot;javascript:goToPage\('(.*?)'&quot;, value)
                if m:
                    return m.group(1)
        :::
        :::

    -   **strip**
        ([*bool*](https://docs.python.org/3/library/functions.html#bool &quot;(in Python v3.12)&quot;){.reference
        .external}) -- whether to strip whitespaces from extracted
        attributes. According to HTML5 standard, leading and
        trailing whitespaces must be stripped from [`href`{.docutils
        .literal .notranslate}]{.pre} attributes of [`&lt;a&gt;`{.docutils
        .literal .notranslate}]{.pre}, [`&lt;area&gt;`{.docutils .literal
        .notranslate}]{.pre} and many other elements,
        [`src`{.docutils .literal .notranslate}]{.pre} attribute of
        [`&lt;img&gt;`{.docutils .literal .notranslate}]{.pre},
        [`&lt;iframe&gt;`{.docutils .literal .notranslate}]{.pre}
        elements, etc., so LinkExtractor strips space chars by
        default. Set [`strip=False`{.docutils .literal
        .notranslate}]{.pre} to turn it off (e.g. if you're
        extracting urls from elements or attributes which allow
        leading/trailing whitespaces).

[[extract_links]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[response]{.pre}]{.n}*[)]{.sig-paren}[[[\[source\]]{.pre}]{.viewcode-link}](_modules/scrapy/linkextractors/lxmlhtml.html#LxmlLinkExtractor.extract_links){.reference .internal}[¶](#scrapy.linkextractors.lxmlhtml.LxmlLinkExtractor.extract_links &quot;Permalink to this definition&quot;){.headerlink}

:   Returns a list of [[`Link`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#scrapy.link.Link &quot;scrapy.link.Link&quot;){.reference
    .internal} objects from the specified [[`response`{.xref .py
    .py-class .docutils .literal
    .notranslate}]{.pre}](index.html#scrapy.http.Response &quot;scrapy.http.Response&quot;){.reference
    .internal}.

    Only links that match the settings passed to the
    [`__init__`{.docutils .literal .notranslate}]{.pre} method of
    the link extractor are returned.

    Duplicate links are omitted if the [`unique`{.docutils .literal
    .notranslate}]{.pre} attribute is set to [`True`{.docutils
    .literal .notranslate}]{.pre}, otherwise they are returned.
</code></pre>
<p>:::</p>
<p>::: {#module-scrapy.link .section}
[]{#link}</p>
<h5 id="linkheaderlink"><a class="header" href="#linkheaderlink">Link<a href="#module-scrapy.link" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p><em>[class]{.pre}[ ]{.w}</em>[[scrapy.link.]{.pre}]{.sig-prename .descclassname}[[Link]{.pre}]{.sig-name .descname}[(]{.sig-paren}<em>[[url]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">[str]{.pre}</a>{.reference .external}]{.n}</em>, <em>[[text]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">[str]{.pre}</a>{.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[['']{.pre}]{.default_value}</em>, <em>[[fragment]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">[str]{.pre}</a>{.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[['']{.pre}]{.default_value}</em>, <em>[[nofollow]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[<a href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)">[bool]{.pre}</a>{.reference .external}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}</em>[)]{.sig-paren}<a href="_modules/scrapy/link.html#Link">[[[source]]{.pre}]{.viewcode-link}</a>{.reference .internal}<a href="#scrapy.link.Link" title="Permalink to this definition">¶</a>{.headerlink}</p>
<p>:   Link objects represent an extracted link by the LinkExtractor.</p>
<pre><code>Using the anchor tag sample below to illustrate the parameters:

::: {.highlight-python .notranslate}
::: highlight
    &lt;a href=&quot;https://example.com/nofollow.html#foo&quot; rel=&quot;nofollow&quot;&gt;Dont follow this one&lt;/a&gt;
:::
:::

Parameters

:   -   **url** -- the absolute url being linked to in the anchor
        tag. From the sample, this is
        [`https://example.com/nofollow.html`{.docutils .literal
        .notranslate}]{.pre}.

    -   **text** -- the text in the anchor tag. From the sample,
        this is [`Dont`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`follow`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`this`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`one`{.docutils .literal .notranslate}]{.pre}.

    -   **fragment** -- the part of the url after the hash symbol.
        From the sample, this is [`foo`{.docutils .literal
        .notranslate}]{.pre}.

    -   **nofollow** -- an indication of the presence or absence of
        a nofollow value in the [`rel`{.docutils .literal
        .notranslate}]{.pre} attribute of the anchor tag.
</code></pre>
<p>:::
:::
:::</p>
<p>[]{#document-topics/settings}</p>
<p>::: {#settings .section}
[]{#topics-settings}</p>
<h3 id="settingsheaderlink-1"><a class="header" href="#settingsheaderlink-1">Settings<a href="#settings" title="Permalink to this heading">¶</a>{.headerlink}</a></h3>
<p>The Scrapy settings allows you to customize the behaviour of all Scrapy
components, including the core, extensions, pipelines and spiders
themselves.</p>
<p>The infrastructure of the settings provides a global namespace of
key-value mappings that the code can use to pull configuration values
from. The settings can be populated through different mechanisms, which
are described below.</p>
<p>The settings are also the mechanism for selecting the currently active
Scrapy project (in case you have many).</p>
<p>For a list of available built-in settings see: <a href="#topics-settings-ref">[Built-in settings
reference]{.std .std-ref}</a>{.hoverxref .tooltip
.reference .internal}.</p>
<p>::: {#designating-the-settings .section}
[]{#topics-settings-module-envvar}</p>
<h4 id="designating-the-settingsheaderlink"><a class="header" href="#designating-the-settingsheaderlink">Designating the settings<a href="#designating-the-settings" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>When you use Scrapy, you have to tell it which settings you're using.
You can do this by using an environment variable,
[<code>SCRAPY_SETTINGS_MODULE</code>{.docutils .literal .notranslate}]{.pre}.</p>
<p>The value of [<code>SCRAPY_SETTINGS_MODULE</code>{.docutils .literal
.notranslate}]{.pre} should be in Python path syntax, e.g.
[<code>myproject.settings</code>{.docutils .literal .notranslate}]{.pre}. Note that
the settings module should be on the Python <a href="https://docs.python.org/3/tutorial/modules.html#tut-searchpath" title="(in Python v3.12)">[import search path]{.xref
.std
.std-ref}</a>{.reference
.external}.
:::</p>
<p>::: {#populating-the-settings .section}
[]{#populating-settings}</p>
<h4 id="populating-the-settingsheaderlink"><a class="header" href="#populating-the-settingsheaderlink">Populating the settings<a href="#populating-the-settings" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>Settings can be populated using different mechanisms, each of which
having a different precedence. Here is the list of them in decreasing
order of precedence:</p>
<blockquote>
<div>
<ol>
<li>
<p>Command line options (most precedence)</p>
</li>
<li>
<p>Settings per-spider</p>
</li>
<li>
<p>Project settings module</p>
</li>
<li>
<p>Settings set by add-ons</p>
</li>
<li>
<p>Default settings per-command</p>
</li>
<li>
<p>Default global settings (less precedence)</p>
</li>
</ol>
</div>
</blockquote>
<p>The population of these settings sources is taken care of internally,
but a manual handling is possible using API calls. See the <a href="index.html#topics-api-settings">[Settings
API]{.std .std-ref}</a>{.hoverxref .tooltip
.reference .internal} topic for reference.</p>
<p>These mechanisms are described in more detail below.</p>
<p>::: {#command-line-options .section}</p>
<h5 id="1-command-line-optionsheaderlink"><a class="header" href="#1-command-line-optionsheaderlink">1. Command line options<a href="#command-line-options" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Arguments provided by the command line are the ones that take most
precedence, overriding any other options. You can explicitly override
one (or more) settings using the [<code>-s</code>{.docutils .literal
.notranslate}]{.pre} (or [<code>--set</code>{.docutils .literal
.notranslate}]{.pre}) command line option.</p>
<p>Example:</p>
<p>::: {.highlight-sh .notranslate}
::: highlight
scrapy crawl myspider -s LOG_FILE=scrapy.log
:::
:::
:::</p>
<p>::: {#settings-per-spider .section}</p>
<h5 id="2-settings-per-spiderheaderlink"><a class="header" href="#2-settings-per-spiderheaderlink">2. Settings per-spider<a href="#settings-per-spider" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Spiders (See the <a href="index.html#topics-spiders">[Spiders]{.std
.std-ref}</a>{.hoverxref .tooltip .reference
.internal} chapter for reference) can define their own settings that
will take precedence and override the project ones. One way to do so is
by setting their <a href="index.html#scrapy.Spider.custom_settings" title="scrapy.Spider.custom_settings">[<code>custom_settings</code>{.xref .py .py-attr .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal} attribute:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
import scrapy</p>
<pre><code>class MySpider(scrapy.Spider):
    name = &quot;myspider&quot;

    custom_settings = {
        &quot;SOME_SETTING&quot;: &quot;some value&quot;,
    }
</code></pre>
<p>:::
:::</p>
<p>It's often better to implement <a href="index.html#scrapy.Spider.update_settings" title="scrapy.Spider.update_settings">[<code>update_settings()</code>{.xref .py .py-meth
.docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} instead, and settings set there should use the &quot;spider&quot;
priority explicitly:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
import scrapy</p>
<pre><code>class MySpider(scrapy.Spider):
    name = &quot;myspider&quot;

    @classmethod
    def update_settings(cls, settings):
        super().update_settings(settings)
        settings.set(&quot;SOME_SETTING&quot;, &quot;some value&quot;, priority=&quot;spider&quot;)
</code></pre>
<p>:::
:::</p>
<p>::: versionadded
[New in version 2.11.]{.versionmodified .added}
:::</p>
<p>It's also possible to modify the settings in the
<a href="index.html#scrapy.Spider.from_crawler" title="scrapy.Spider.from_crawler">[<code>from_crawler()</code>{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} method, e.g. based on <a href="index.html#spiderargs">[spider arguments]{.std
.std-ref}</a>{.hoverxref .tooltip .reference
.internal} or other logic:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
import scrapy</p>
<pre><code>class MySpider(scrapy.Spider):
    name = &quot;myspider&quot;

    @classmethod
    def from_crawler(cls, crawler, *args, **kwargs):
        spider = super().from_crawler(crawler, *args, **kwargs)
        if &quot;some_argument&quot; in kwargs:
            spider.settings.set(
                &quot;SOME_SETTING&quot;, kwargs[&quot;some_argument&quot;], priority=&quot;spider&quot;
            )
        return spider
</code></pre>
<p>:::
:::
:::</p>
<p>::: {#project-settings-module .section}</p>
<h5 id="3-project-settings-moduleheaderlink"><a class="header" href="#3-project-settings-moduleheaderlink">3. Project settings module<a href="#project-settings-module" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The project settings module is the standard configuration file for your
Scrapy project, it's where most of your custom settings will be
populated. For a standard Scrapy project, this means you'll be adding or
changing the settings in the [<code>settings.py</code>{.docutils .literal
.notranslate}]{.pre} file created for your project.
:::</p>
<p>::: {#settings-set-by-add-ons .section}</p>
<h5 id="4-settings-set-by-add-onsheaderlink"><a class="header" href="#4-settings-set-by-add-onsheaderlink">4. Settings set by add-ons<a href="#settings-set-by-add-ons" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p><a href="index.html#topics-addons">[Add-ons]{.std .std-ref}</a>{.hoverxref .tooltip
.reference .internal} can modify settings. They should do this with this
priority, though this is not enforced.
:::</p>
<p>::: {#default-settings-per-command .section}</p>
<h5 id="5-default-settings-per-commandheaderlink"><a class="header" href="#5-default-settings-per-commandheaderlink">5. Default settings per-command<a href="#default-settings-per-command" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Each <a href="index.html#document-topics/commands">[Scrapy
tool]{.doc}</a>{.reference .internal}
command can have its own default settings, which override the global
default settings. Those custom command settings are specified in the
[<code>default_settings</code>{.docutils .literal .notranslate}]{.pre} attribute of
the command class.
:::</p>
<p>::: {#default-global-settings .section}</p>
<h5 id="6-default-global-settingsheaderlink"><a class="header" href="#6-default-global-settingsheaderlink">6. Default global settings<a href="#default-global-settings" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>The global defaults are located in the
[<code>scrapy.settings.default_settings</code>{.docutils .literal
.notranslate}]{.pre} module and documented in the <a href="#topics-settings-ref">[Built-in settings
reference]{.std .std-ref}</a>{.hoverxref .tooltip
.reference .internal} section.
:::
:::</p>
<p>::: {#compatibility-with-pickle .section}</p>
<h4 id="compatibility-with-pickleheaderlink"><a class="header" href="#compatibility-with-pickleheaderlink">Compatibility with pickle<a href="#compatibility-with-pickle" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>Setting values must be <a href="https://docs.python.org/3/library/pickle.html#pickle-picklable" title="(in Python v3.12)">[picklable]{.xref .std
.std-ref}</a>{.reference
.external}.
:::</p>
<p>::: {#import-paths-and-classes .section}</p>
<h4 id="import-paths-and-classesheaderlink"><a class="header" href="#import-paths-and-classesheaderlink">Import paths and classes<a href="#import-paths-and-classes" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>::: versionadded
[New in version 2.4.0.]{.versionmodified .added}
:::</p>
<p>When a setting references a callable object to be imported by Scrapy,
such as a class or a function, there are two different ways you can
specify that object:</p>
<ul>
<li>
<p>As a string containing the import path of that object</p>
</li>
<li>
<p>As the object itself</p>
</li>
</ul>
<p>For example:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
from mybot.pipelines.validate import ValidateMyItem</p>
<pre><code>ITEM_PIPELINES = {
    # passing the classname...
    ValidateMyItem: 300,
    # ...equals passing the class path
    &quot;mybot.pipelines.validate.ValidateMyItem&quot;: 300,
}
</code></pre>
<p>:::
:::</p>
<p>::: {.admonition .note}
Note</p>
<p>Passing non-callable objects is not supported.
:::
:::</p>
<p>::: {#how-to-access-settings .section}</p>
<h4 id="how-to-access-settingsheaderlink"><a class="header" href="#how-to-access-settingsheaderlink">How to access settings<a href="#how-to-access-settings" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>In a spider, the settings are available through
[<code>self.settings</code>{.docutils .literal .notranslate}]{.pre}:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
class MySpider(scrapy.Spider):
name = &quot;myspider&quot;
start_urls = [&quot;http://example.com&quot;]</p>
<pre><code>    def parse(self, response):
        print(f&quot;Existing settings: {self.settings.attributes.keys()}&quot;)
</code></pre>
<p>:::
:::</p>
<p>::: {.admonition .note}
Note</p>
<p>The [<code>settings</code>{.docutils .literal .notranslate}]{.pre} attribute is set
in the base Spider class after the spider is initialized. If you want to
use the settings before the initialization (e.g., in your spider's
[<code>__init__()</code>{.docutils .literal .notranslate}]{.pre} method), you'll
need to override the <a href="index.html#scrapy.Spider.from_crawler" title="scrapy.Spider.from_crawler">[<code>from_crawler()</code>{.xref .py .py-meth .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal} method.
:::</p>
<p>Settings can be accessed through the
<a href="index.html#scrapy.crawler.Crawler.settings" title="scrapy.crawler.Crawler.settings">[<code>scrapy.crawler.Crawler.settings</code>{.xref .py .py-attr .docutils
.literal
.notranslate}]{.pre}</a>{.reference
.internal} attribute of the Crawler that is passed to
[<code>from_crawler</code>{.docutils .literal .notranslate}]{.pre} method in
extensions, middlewares and item pipelines:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
class MyExtension:
def <strong>init</strong>(self, log_is_enabled=False):
if log_is_enabled:
print(&quot;log is enabled!&quot;)</p>
<pre><code>    @classmethod
    def from_crawler(cls, crawler):
        settings = crawler.settings
        return cls(settings.getbool(&quot;LOG_ENABLED&quot;))
</code></pre>
<p>:::
:::</p>
<p>The settings object can be used like a dict (e.g.,
[<code>settings['LOG_ENABLED']</code>{.docutils .literal .notranslate}]{.pre}), but
it's usually preferred to extract the setting in the format you need it
to avoid type errors, using one of the methods provided by the
<a href="index.html#scrapy.settings.Settings" title="scrapy.settings.Settings">[<code>Settings</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} API.
:::</p>
<p>::: {#rationale-for-setting-names .section}</p>
<h4 id="rationale-for-setting-namesheaderlink"><a class="header" href="#rationale-for-setting-namesheaderlink">Rationale for setting names<a href="#rationale-for-setting-names" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>Setting names are usually prefixed with the component that they
configure. For example, proper setting names for a fictional robots.txt
extension would be [<code>ROBOTSTXT_ENABLED</code>{.docutils .literal
.notranslate}]{.pre}, [<code>ROBOTSTXT_OBEY</code>{.docutils .literal
.notranslate}]{.pre}, [<code>ROBOTSTXT_CACHEDIR</code>{.docutils .literal
.notranslate}]{.pre}, etc.
:::</p>
<p>::: {#built-in-settings-reference .section}
[]{#topics-settings-ref}</p>
<h4 id="built-in-settings-referenceheaderlink"><a class="header" href="#built-in-settings-referenceheaderlink">Built-in settings reference<a href="#built-in-settings-reference" title="Permalink to this heading">¶</a>{.headerlink}</a></h4>
<p>Here's a list of all available Scrapy settings, in alphabetical order,
along with their default values and the scope where they apply.</p>
<p>The scope, where available, shows where the setting is being used, if
it's tied to any particular component. In that case the module of that
component will be shown, typically an extension, middleware or pipeline.
It also means that the component must be enabled in order for the
setting to have any effect.</p>
<p>::: {#addons .section}
[]{#std-setting-ADDONS}</p>
<h5 id="addonsheaderlink"><a class="header" href="#addonsheaderlink">ADDONS<a href="#addons" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>{}</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>A dict containing paths to the add-ons enabled in your project and their
priorities. For more information, see <a href="index.html#topics-addons">[Add-ons]{.std
.std-ref}</a>{.hoverxref .tooltip .reference
.internal}.
:::</p>
<p>::: {#aws-access-key-id .section}
[]{#std-setting-AWS_ACCESS_KEY_ID}</p>
<h5 id="aws_access_key_idheaderlink"><a class="header" href="#aws_access_key_idheaderlink">AWS_ACCESS_KEY_ID<a href="#aws-access-key-id" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The AWS access key used by code that requires access to <a href="https://aws.amazon.com/">Amazon Web
services</a>{.reference .external}, such as the
<a href="index.html#topics-feed-storage-s3">[S3 feed storage backend]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}.
:::</p>
<p>::: {#aws-secret-access-key .section}
[]{#std-setting-AWS_SECRET_ACCESS_KEY}</p>
<h5 id="aws_secret_access_keyheaderlink"><a class="header" href="#aws_secret_access_keyheaderlink">AWS_SECRET_ACCESS_KEY<a href="#aws-secret-access-key" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The AWS secret key used by code that requires access to <a href="https://aws.amazon.com/">Amazon Web
services</a>{.reference .external}, such as the
<a href="index.html#topics-feed-storage-s3">[S3 feed storage backend]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}.
:::</p>
<p>::: {#aws-session-token .section}
[]{#std-setting-AWS_SESSION_TOKEN}</p>
<h5 id="aws_session_tokenheaderlink"><a class="header" href="#aws_session_tokenheaderlink">AWS_SESSION_TOKEN<a href="#aws-session-token" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The AWS security token used by code that requires access to <a href="https://aws.amazon.com/">Amazon Web
services</a>{.reference .external}, such as the
<a href="index.html#topics-feed-storage-s3">[S3 feed storage backend]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}, when using <a href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#temporary-access-keys">temporary security
credentials</a>{.reference
.external}.
:::</p>
<p>::: {#aws-endpoint-url .section}
[]{#std-setting-AWS_ENDPOINT_URL}</p>
<h5 id="aws_endpoint_urlheaderlink"><a class="header" href="#aws_endpoint_urlheaderlink">AWS_ENDPOINT_URL<a href="#aws-endpoint-url" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Endpoint URL used for S3-like storage, for example Minio or s3.scality.
:::</p>
<p>::: {#aws-use-ssl .section}
[]{#std-setting-AWS_USE_SSL}</p>
<h5 id="aws_use_sslheaderlink"><a class="header" href="#aws_use_sslheaderlink">AWS_USE_SSL<a href="#aws-use-ssl" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Use this option if you want to disable SSL connection for communication
with S3 or S3-like storage. By default SSL will be used.
:::</p>
<p>::: {#aws-verify .section}
[]{#std-setting-AWS_VERIFY}</p>
<h5 id="aws_verifyheaderlink"><a class="header" href="#aws_verifyheaderlink">AWS_VERIFY<a href="#aws-verify" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Verify SSL connection between Scrapy and S3 or S3-like storage. By
default SSL verification will occur.
:::</p>
<p>::: {#aws-region-name .section}
[]{#std-setting-AWS_REGION_NAME}</p>
<h5 id="aws_region_nameheaderlink"><a class="header" href="#aws_region_nameheaderlink">AWS_REGION_NAME<a href="#aws-region-name" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The name of the region associated with the AWS client.
:::</p>
<p>::: {#asyncio-event-loop .section}
[]{#std-setting-ASYNCIO_EVENT_LOOP}</p>
<h5 id="asyncio_event_loopheaderlink"><a class="header" href="#asyncio_event_loopheaderlink">ASYNCIO_EVENT_LOOP<a href="#asyncio-event-loop" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>None</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Import path of a given [<code>asyncio</code>{.docutils .literal
.notranslate}]{.pre} event loop class.</p>
<p>If the asyncio reactor is enabled (see <a href="#std-setting-TWISTED_REACTOR">[<code>TWISTED_REACTOR</code>{.xref .std
.std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal}) this setting can be used to specify the asyncio
event loop to be used with it. Set the setting to the import path of the
desired asyncio event loop class. If the setting is set to
[<code>None</code>{.docutils .literal .notranslate}]{.pre} the default asyncio
event loop will be used.</p>
<p>If you are installing the asyncio reactor manually using the
<a href="#scrapy.utils.reactor.install_reactor" title="scrapy.utils.reactor.install_reactor">[<code>install_reactor()</code>{.xref .py .py-func .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal} function, you can use the [<code>event_loop_path</code>{.docutils
.literal .notranslate}]{.pre} parameter to indicate the import path of
the event loop class to be used.</p>
<p>Note that the event loop class must inherit from
<a href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop" title="(in Python v3.12)">[<code>asyncio.AbstractEventLoop</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.external}.</p>
<p>::: {.admonition .caution}
Caution</p>
<p>Please be aware that, when using a non-default event loop (either
defined via <a href="#std-setting-ASYNCIO_EVENT_LOOP">[<code>ASYNCIO_EVENT_LOOP</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} or installed with
<a href="#scrapy.utils.reactor.install_reactor" title="scrapy.utils.reactor.install_reactor">[<code>install_reactor()</code>{.xref .py .py-func .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}), Scrapy will call <a href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.set_event_loop" title="(in Python v3.12)">[<code>asyncio.set_event_loop()</code>{.xref .py
.py-func .docutils .literal
.notranslate}]{.pre}</a>{.reference
.external}, which will set the specified event loop as the current loop
for the current OS thread.
:::
:::</p>
<p>::: {#bot-name .section}
[]{#std-setting-BOT_NAME}</p>
<h5 id="bot_nameheaderlink"><a class="header" href="#bot_nameheaderlink">BOT_NAME<a href="#bot-name" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>'scrapybot'</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The name of the bot implemented by this Scrapy project (also known as
the project name). This name will be used for the logging too.</p>
<p>It's automatically populated with your project name when you create your
project with the <a href="index.html#std-command-startproject">[<code>startproject</code>{.xref .std .std-command .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} command.
:::</p>
<p>::: {#concurrent-items .section}
[]{#std-setting-CONCURRENT_ITEMS}</p>
<h5 id="concurrent_itemsheaderlink"><a class="header" href="#concurrent_itemsheaderlink">CONCURRENT_ITEMS<a href="#concurrent-items" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>100</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Maximum number of concurrent items (per response) to process in parallel
in <a href="index.html#topics-item-pipeline">[item pipelines]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}.
:::</p>
<p>::: {#concurrent-requests .section}
[]{#std-setting-CONCURRENT_REQUESTS}</p>
<h5 id="concurrent_requestsheaderlink"><a class="header" href="#concurrent_requestsheaderlink">CONCURRENT_REQUESTS<a href="#concurrent-requests" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>16</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The maximum number of concurrent (i.e. simultaneous) requests that will
be performed by the Scrapy downloader.
:::</p>
<p>::: {#concurrent-requests-per-domain .section}
[]{#std-setting-CONCURRENT_REQUESTS_PER_DOMAIN}</p>
<h5 id="concurrent_requests_per_domainheaderlink"><a class="header" href="#concurrent_requests_per_domainheaderlink">CONCURRENT_REQUESTS_PER_DOMAIN<a href="#concurrent-requests-per-domain" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>8</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The maximum number of concurrent (i.e. simultaneous) requests that will
be performed to any single domain.</p>
<p>See also: <a href="index.html#topics-autothrottle">[AutoThrottle extension]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal} and its <a href="index.html#std-setting-AUTOTHROTTLE_TARGET_CONCURRENCY">[<code>AUTOTHROTTLE_TARGET_CONCURRENCY</code>{.xref
.std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} option.
:::</p>
<p>::: {#concurrent-requests-per-ip .section}
[]{#std-setting-CONCURRENT_REQUESTS_PER_IP}</p>
<h5 id="concurrent_requests_per_ipheaderlink"><a class="header" href="#concurrent_requests_per_ipheaderlink">CONCURRENT_REQUESTS_PER_IP<a href="#concurrent-requests-per-ip" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>0</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The maximum number of concurrent (i.e. simultaneous) requests that will
be performed to any single IP. If non-zero, the
<a href="#std-setting-CONCURRENT_REQUESTS_PER_DOMAIN">[<code>CONCURRENT_REQUESTS_PER_DOMAIN</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} setting is ignored, and this one is used
instead. In other words, concurrency limits will be applied per IP, not
per domain.</p>
<p>This setting also affects <a href="#std-setting-DOWNLOAD_DELAY">[<code>DOWNLOAD_DELAY</code>{.xref .std .std-setting
.docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal} and <a href="index.html#topics-autothrottle">[AutoThrottle extension]{.std
.std-ref}</a>{.hoverxref .tooltip
.reference .internal}: if <a href="#std-setting-CONCURRENT_REQUESTS_PER_IP">[<code>CONCURRENT_REQUESTS_PER_IP</code>{.xref .std
.std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} is non-zero, download delay is enforced
per IP, not per domain.
:::</p>
<p>::: {#default-item-class .section}
[]{#std-setting-DEFAULT_ITEM_CLASS}</p>
<h5 id="default_item_classheaderlink"><a class="header" href="#default_item_classheaderlink">DEFAULT_ITEM_CLASS<a href="#default-item-class" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>'scrapy.Item'</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>The default class that will be used for instantiating items in the <a href="index.html#topics-shell">[the
Scrapy shell]{.std .std-ref}</a>{.hoverxref
.tooltip .reference .internal}.
:::</p>
<p>::: {#default-request-headers .section}
[]{#std-setting-DEFAULT_REQUEST_HEADERS}</p>
<h5 id="default_request_headersheaderlink"><a class="header" href="#default_request_headersheaderlink">DEFAULT_REQUEST_HEADERS<a href="#default-request-headers" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
{
&quot;Accept&quot;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,<em>/</em>;q=0.8&quot;,
&quot;Accept-Language&quot;: &quot;en&quot;,
}
:::
:::</p>
<p>The default headers used for Scrapy HTTP Requests. They're populated in
the <a href="index.html#scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware" title="scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware">[<code>DefaultHeadersMiddleware</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}</a>{.reference
.internal}.</p>
<p>::: {.admonition .caution}
Caution</p>
<p>Cookies set via the [<code>Cookie</code>{.docutils .literal .notranslate}]{.pre}
header are not considered by the <a href="index.html#cookies-mw">[CookiesMiddleware]{.std
.std-ref}</a>{.hoverxref .tooltip .reference
.internal}. If you need to set cookies for a request, use the
[<code>Request.cookies</code>{.xref .py .py-class .docutils .literal
.notranslate}]{.pre} parameter. This is a known current limitation that
is being worked on.
:::
:::</p>
<p>::: {#depth-limit .section}
[]{#std-setting-DEPTH_LIMIT}</p>
<h5 id="depth_limitheaderlink"><a class="header" href="#depth_limitheaderlink">DEPTH_LIMIT<a href="#depth-limit" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>0</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Scope: [<code>scrapy.spidermiddlewares.depth.DepthMiddleware</code>{.docutils
.literal .notranslate}]{.pre}</p>
<p>The maximum depth that will be allowed to crawl for any site. If zero,
no limit will be imposed.
:::</p>
<p>::: {#depth-priority .section}
[]{#std-setting-DEPTH_PRIORITY}</p>
<h5 id="depth_priorityheaderlink"><a class="header" href="#depth_priorityheaderlink">DEPTH_PRIORITY<a href="#depth-priority" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>0</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Scope: [<code>scrapy.spidermiddlewares.depth.DepthMiddleware</code>{.docutils
.literal .notranslate}]{.pre}</p>
<p>An integer that is used to adjust the [<code>priority</code>{.xref .py .py-attr
.docutils .literal .notranslate}]{.pre} of a [<code>Request</code>{.xref .py
.py-class .docutils .literal .notranslate}]{.pre} based on its depth.</p>
<p>The priority of a request is adjusted as follows:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
request.priority = request.priority - (depth * DEPTH_PRIORITY)
:::
:::</p>
<p>As depth increases, positive values of [<code>DEPTH_PRIORITY</code>{.docutils
.literal .notranslate}]{.pre} decrease request priority (BFO), while
negative values increase request priority (DFO). See also <a href="index.html#faq-bfo-dfo">[Does Scrapy
crawl in breadth-first or depth-first order?]{.std
.std-ref}</a>{.hoverxref .tooltip .reference
.internal}.</p>
<p>::: {.admonition .note}
Note</p>
<p>This setting adjusts priority <strong>in the opposite way</strong> compared to other
priority settings <a href="#std-setting-REDIRECT_PRIORITY_ADJUST">[<code>REDIRECT_PRIORITY_ADJUST</code>{.xref .std .std-setting
.docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} and <a href="index.html#std-setting-RETRY_PRIORITY_ADJUST">[<code>RETRY_PRIORITY_ADJUST</code>{.xref .std
.std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.
:::
:::</p>
<p>::: {#depth-stats-verbose .section}
[]{#std-setting-DEPTH_STATS_VERBOSE}</p>
<h5 id="depth_stats_verboseheaderlink"><a class="header" href="#depth_stats_verboseheaderlink">DEPTH_STATS_VERBOSE<a href="#depth-stats-verbose" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>False</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Scope: [<code>scrapy.spidermiddlewares.depth.DepthMiddleware</code>{.docutils
.literal .notranslate}]{.pre}</p>
<p>Whether to collect verbose depth stats. If this is enabled, the number
of requests for each depth is collected in the stats.
:::</p>
<p>::: {#dnscache-enabled .section}
[]{#std-setting-DNSCACHE_ENABLED}</p>
<h5 id="dnscache_enabledheaderlink"><a class="header" href="#dnscache_enabledheaderlink">DNSCACHE_ENABLED<a href="#dnscache-enabled" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>True</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Whether to enable DNS in-memory cache.
:::</p>
<p>::: {#dnscache-size .section}
[]{#std-setting-DNSCACHE_SIZE}</p>
<h5 id="dnscache_sizeheaderlink"><a class="header" href="#dnscache_sizeheaderlink">DNSCACHE_SIZE<a href="#dnscache-size" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>10000</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>DNS in-memory cache size.
:::</p>
<p>::: {#dns-resolver .section}
[]{#std-setting-DNS_RESOLVER}</p>
<h5 id="dns_resolverheaderlink"><a class="header" href="#dns_resolverheaderlink">DNS_RESOLVER<a href="#dns-resolver" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>::: versionadded
[New in version 2.0.]{.versionmodified .added}
:::</p>
<p>Default: [<code>'scrapy.resolver.CachingThreadedResolver'</code>{.docutils .literal
.notranslate}]{.pre}</p>
<p>The class to be used to resolve DNS names. The default
[<code>scrapy.resolver.CachingThreadedResolver</code>{.docutils .literal
.notranslate}]{.pre} supports specifying a timeout for DNS requests via
the <a href="#std-setting-DNS_TIMEOUT">[<code>DNS_TIMEOUT</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal} setting, but works only with IPv4 addresses.
Scrapy provides an alternative resolver,
[<code>scrapy.resolver.CachingHostnameResolver</code>{.docutils .literal
.notranslate}]{.pre}, which supports IPv4/IPv6 addresses but does not
take the <a href="#std-setting-DNS_TIMEOUT">[<code>DNS_TIMEOUT</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref .tooltip
.reference .internal} setting into account.
:::</p>
<p>::: {#dns-timeout .section}
[]{#std-setting-DNS_TIMEOUT}</p>
<h5 id="dns_timeoutheaderlink"><a class="header" href="#dns_timeoutheaderlink">DNS_TIMEOUT<a href="#dns-timeout" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>60</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Timeout for processing of DNS queries in seconds. Float is supported.
:::</p>
<p>::: {#downloader .section}
[]{#std-setting-DOWNLOADER}</p>
<h5 id="downloaderheaderlink"><a class="header" href="#downloaderheaderlink">DOWNLOADER<a href="#downloader" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>'scrapy.core.downloader.Downloader'</code>{.docutils .literal
.notranslate}]{.pre}</p>
<p>The downloader to use for crawling.
:::</p>
<p>::: {#downloader-httpclientfactory .section}
[]{#std-setting-DOWNLOADER_HTTPCLIENTFACTORY}</p>
<h5 id="downloader_httpclientfactoryheaderlink"><a class="header" href="#downloader_httpclientfactoryheaderlink">DOWNLOADER_HTTPCLIENTFACTORY<a href="#downloader-httpclientfactory" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default:
[<code>'scrapy.core.downloader.webclient.ScrapyHTTPClientFactory'</code>{.docutils
.literal .notranslate}]{.pre}</p>
<p>Defines a Twisted [<code>protocol.ClientFactory</code>{.docutils .literal
.notranslate}]{.pre} class to use for HTTP/1.0 connections (for
[<code>HTTP10DownloadHandler</code>{.docutils .literal .notranslate}]{.pre}).</p>
<p>::: {.admonition .note}
Note</p>
<p>HTTP/1.0 is rarely used nowadays so you can safely ignore this setting,
unless you really want to use HTTP/1.0 and override
<a href="#std-setting-DOWNLOAD_HANDLERS">[<code>DOWNLOAD_HANDLERS</code>{.xref .std .std-setting .docutils .literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} for [<code>http(s)</code>{.docutils .literal
.notranslate}]{.pre} scheme accordingly, i.e. to
[<code>'scrapy.core.downloader.handlers.http.HTTP10DownloadHandler'</code>{.docutils
.literal .notranslate}]{.pre}.
:::
:::</p>
<p>::: {#downloader-clientcontextfactory .section}
[]{#std-setting-DOWNLOADER_CLIENTCONTEXTFACTORY}</p>
<h5 id="downloader_clientcontextfactoryheaderlink"><a class="header" href="#downloader_clientcontextfactoryheaderlink">DOWNLOADER_CLIENTCONTEXTFACTORY<a href="#downloader-clientcontextfactory" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default:
[<code>'scrapy.core.downloader.contextfactory.ScrapyClientContextFactory'</code>{.docutils
.literal .notranslate}]{.pre}</p>
<p>Represents the classpath to the ContextFactory to use.</p>
<p>Here, &quot;ContextFactory&quot; is a Twisted term for SSL/TLS contexts, defining
the TLS/SSL protocol version to use, whether to do certificate
verification, or even enable client-side authentication (and various
other things).</p>
<p>::: {.admonition .note}
Note</p>
<p>Scrapy default context factory <strong>does NOT perform remote server
certificate verification</strong>. This is usually fine for web scraping.</p>
<p>If you do need remote server certificate verification enabled, Scrapy
also has another context factory class that you can set,
[<code>'scrapy.core.downloader.contextfactory.BrowserLikeContextFactory'</code>{.docutils
.literal .notranslate}]{.pre}, which uses the platform's certificates to
validate remote endpoints.
:::</p>
<p>If you do use a custom ContextFactory, make sure its
[<code>__init__</code>{.docutils .literal .notranslate}]{.pre} method accepts a
[<code>method</code>{.docutils .literal .notranslate}]{.pre} parameter (this is the
[<code>OpenSSL.SSL</code>{.docutils .literal .notranslate}]{.pre} method mapping
<a href="#std-setting-DOWNLOADER_CLIENT_TLS_METHOD">[<code>DOWNLOADER_CLIENT_TLS_METHOD</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}), a [<code>tls_verbose_logging</code>{.docutils
.literal .notranslate}]{.pre} parameter ([<code>bool</code>{.docutils .literal
.notranslate}]{.pre}) and a [<code>tls_ciphers</code>{.docutils .literal
.notranslate}]{.pre} parameter (see
<a href="#std-setting-DOWNLOADER_CLIENT_TLS_CIPHERS">[<code>DOWNLOADER_CLIENT_TLS_CIPHERS</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}).
:::</p>
<p>::: {#downloader-client-tls-ciphers .section}
[]{#std-setting-DOWNLOADER_CLIENT_TLS_CIPHERS}</p>
<h5 id="downloader_client_tls_ciphersheaderlink"><a class="header" href="#downloader_client_tls_ciphersheaderlink">DOWNLOADER_CLIENT_TLS_CIPHERS<a href="#downloader-client-tls-ciphers" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>'DEFAULT'</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Use this setting to customize the TLS/SSL ciphers used by the default
HTTP/1.1 downloader.</p>
<p>The setting should contain a string in the <a href="https://www.openssl.org/docs/manmaster/man1/openssl-ciphers.html#CIPHER-LIST-FORMAT">OpenSSL cipher list
format</a>{.reference
.external}, these ciphers will be used as client ciphers. Changing this
setting may be necessary to access certain HTTPS websites: for example,
you may need to use [<code>'DEFAULT:!DH'</code>{.docutils .literal
.notranslate}]{.pre} for a website with weak DH parameters or enable a
specific cipher that is not included in [<code>DEFAULT</code>{.docutils .literal
.notranslate}]{.pre} if a website requires it.
:::</p>
<p>::: {#downloader-client-tls-method .section}
[]{#std-setting-DOWNLOADER_CLIENT_TLS_METHOD}</p>
<h5 id="downloader_client_tls_methodheaderlink"><a class="header" href="#downloader_client_tls_methodheaderlink">DOWNLOADER_CLIENT_TLS_METHOD<a href="#downloader-client-tls-method" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>'TLS'</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Use this setting to customize the TLS/SSL method used by the default
HTTP/1.1 downloader.</p>
<p>This setting must be one of these string values:</p>
<ul>
<li>
<p>[<code>'TLS'</code>{.docutils .literal .notranslate}]{.pre}: maps to OpenSSL's
[<code>TLS_method()</code>{.docutils .literal .notranslate}]{.pre} (a.k.a
[<code>SSLv23_method()</code>{.docutils .literal .notranslate}]{.pre}), which
allows protocol negotiation, starting from the highest supported by
the platform; <strong>default, recommended</strong></p>
</li>
<li>
<p>[<code>'TLSv1.0'</code>{.docutils .literal .notranslate}]{.pre}: this value
forces HTTPS connections to use TLS version 1.0 ; set this if you
want the behavior of Scrapy&lt;1.1</p>
</li>
<li>
<p>[<code>'TLSv1.1'</code>{.docutils .literal .notranslate}]{.pre}: forces TLS
version 1.1</p>
</li>
<li>
<p>[<code>'TLSv1.2'</code>{.docutils .literal .notranslate}]{.pre}: forces TLS
version 1.2
:::</p>
</li>
</ul>
<p>::: {#downloader-client-tls-verbose-logging .section}
[]{#std-setting-DOWNLOADER_CLIENT_TLS_VERBOSE_LOGGING}</p>
<h5 id="downloader_client_tls_verbose_loggingheaderlink"><a class="header" href="#downloader_client_tls_verbose_loggingheaderlink">DOWNLOADER_CLIENT_TLS_VERBOSE_LOGGING<a href="#downloader-client-tls-verbose-logging" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default: [<code>False</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>Setting this to [<code>True</code>{.docutils .literal .notranslate}]{.pre} will
enable DEBUG level messages about TLS connection parameters after
establishing HTTPS connections. The kind of information logged depends
on the versions of OpenSSL and pyOpenSSL.</p>
<p>This setting is only used for the default
<a href="#std-setting-DOWNLOADER_CLIENTCONTEXTFACTORY">[<code>DOWNLOADER_CLIENTCONTEXTFACTORY</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal}.
:::</p>
<p>::: {#downloader-middlewares .section}
[]{#std-setting-DOWNLOADER_MIDDLEWARES}</p>
<h5 id="downloader_middlewaresheaderlink"><a class="header" href="#downloader_middlewaresheaderlink">DOWNLOADER_MIDDLEWARES<a href="#downloader-middlewares" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default:: [<code>{}</code>{.docutils .literal .notranslate}]{.pre}</p>
<p>A dict containing the downloader middlewares enabled in your project,
and their orders. For more info see <a href="index.html#topics-downloader-middleware-setting">[Activating a downloader
middleware]{.std
.std-ref}</a>{.hoverxref
.tooltip .reference .internal}.
:::</p>
<p>::: {#downloader-middlewares-base .section}
[]{#std-setting-DOWNLOADER_MIDDLEWARES_BASE}</p>
<h5 id="downloader_middlewares_baseheaderlink"><a class="header" href="#downloader_middlewares_baseheaderlink">DOWNLOADER_MIDDLEWARES_BASE<a href="#downloader-middlewares-base" title="Permalink to this heading">¶</a>{.headerlink}</a></h5>
<p>Default:</p>
<p>::: {.highlight-python .notranslate}
::: highlight
{
&quot;scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware&quot;: 100,
&quot;scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware&quot;: 300,
&quot;scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware&quot;: 350,
&quot;scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware&quot;: 400,
&quot;scrapy.downloadermiddlewares.useragent.UserAgentMiddleware&quot;: 500,
&quot;scrapy.downloadermiddlewares.retry.RetryMiddleware&quot;: 550,
&quot;scrapy.downloadermiddlewares.ajaxcrawl.AjaxCrawlMiddleware&quot;: 560,
&quot;scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware&quot;: 580,
&quot;scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware&quot;: 590,
&quot;scrapy.downloadermiddlewares.redirect.RedirectMiddleware&quot;: 600,
&quot;scrapy.downloadermiddlewares.cookies.CookiesMiddleware&quot;: 700,
&quot;scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware&quot;: 750,
&quot;scrapy.downloadermiddlewares.stats.DownloaderStats&quot;: 850,
&quot;scrapy.downloadermiddlewares.httpcache.HttpCacheMiddleware&quot;: 900,
}
:::
:::</p>
<p>A dict containing the downloader middlewares enabled by default in
Scrapy. Low orders are closer to the engine, high orders are closer to
the downloader. You should never modify this setting in your project,
modify <a href="#std-setting-DOWNLOADER_MIDDLEWARES">[<code>DOWNLOADER_MIDDLEWARES</code>{.xref .std .std-setting .docutils
.literal
.notranslate}]{.pre}</a>{.hoverxref
.tooltip .reference .internal} instead. For more info see [[Activating a
downloader middleware]{.std</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../Scrapy/Scrapy2.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../Scrapy/Scrapy4.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../Scrapy/Scrapy2.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../Scrapy/Scrapy4.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>



        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
