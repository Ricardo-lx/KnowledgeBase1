 to run
a block of statements repeatedly. We saw a kind of iteration,
using recursion, in Section&#XA0;<a href="thinkpython2006.html#recursion">5.8</a>.
We saw another kind, using a <span class="c004">for</span> loop,
in Section&#XA0;<a href="thinkpython2005.html#repetition">4.2</a>. In this chapter we&#X2019;ll see yet another
kind, using a <span class="c004">while</span> statement.
But first I want to say a little more about variable assignment.</p>
<h2 class="section" id="sec82">7.1&#XA0;&#XA0;Reassignment</h2>
<p>
<a id="hevea_default493"></a>
<a id="hevea_default494"></a>
<a id="hevea_default495"></a></p><p>As you may have discovered, it is legal to make more than one
assignment to the same variable. A new assignment makes an existing
variable refer to a new value (and stop referring to the old value).</p><pre class="verbatim">&gt;&gt;&gt; x = 5
&gt;&gt;&gt; x
5
&gt;&gt;&gt; x = 7
&gt;&gt;&gt; x
7
</pre><p>
The first time we display 
<span class="c004">x</span>, its value is 5; the second time, its
value is 7.</p><p>Figure&#XA0;<a href="#fig.assign2">7.1</a> shows what <span class="c010">reassignment</span> looks
like in a state diagram. <a id="hevea_default496"></a> <a id="hevea_default497"></a></p><p>At this point I want to address a common source of
confusion.
Because Python uses the equal sign (<span class="c004">=</span>) for assignment, it is
tempting to interpret a statement like <span class="c004">a = b</span> as a
mathematical
proposition of equality; that is, the claim that <span class="c004">a</span> and
<span class="c004">b</span> are equal. But this interpretation is wrong.
<a id="hevea_default498"></a></p><p>First, equality is a symmetric relationship and assignment is not. For
example, in mathematics, if <span class="c009">a</span>=7 then 7=<span class="c009">a</span>. But in Python, the
statement <span class="c004">a = 7</span> is legal and <span class="c004">7 = a</span> is not.</p><p>Also, in mathematics, a proposition of equality is either true or
false for all time. If <span class="c009">a</span>=<span class="c009">b</span> now, then <span class="c009">a</span> will always equal <span class="c009">b</span>.
In Python, an assignment statement can make two variables equal, but
they don&#X2019;t have to stay that way:</p><pre class="verbatim">&gt;&gt;&gt; a = 5
&gt;&gt;&gt; b = a    # a and b are now equal
&gt;&gt;&gt; a = 3    # a and b are no longer equal
&gt;&gt;&gt; b
5
</pre><p>
The third line changes the value of <span class="c004">a</span> but does not change the
value of <span class="c004">b</span>, so they are no longer equal. </p><p>Reassigning variables is often useful, but you should use it
with caution. If the values of variables change frequently, it can
make the code difficult to read and debug.</p><blockquote class="figure"><div class="center"><hr class="c019"></div>
<div class="center"><img src="thinkpython2008.png"></div>
<div class="caption"><table class="c001 cellpading0"><tr><td class="c018">Figure 7.1: State diagram.</td></tr>
</table></div>
<a id="fig.assign2"></a>
<div class="center"><hr class="c019"></div></blockquote>
<h2 class="section" id="sec83">7.2&#XA0;&#XA0;Updating variables</h2>
<p>
<a id="update"></a></p><p><a id="hevea_default499"></a>
<a id="hevea_default500"></a></p><p>A common kind of reassignment is an <span class="c010">update</span>,
where the new value of the variable depends on the old.</p><pre class="verbatim">&gt;&gt;&gt; x = x + 1
</pre><p>
This means &#X201C;get the current value of <span class="c004">x</span>, add one, and then
update <span class="c004">x</span> with the new value.&#X201D;</p><p>If you try to update a variable that doesn&#X2019;t exist, you get an
error, because Python evaluates the right side before it assigns
a value to <span class="c004">x</span>:</p><pre class="verbatim">&gt;&gt;&gt; x = x + 1
NameError: name 'x' is not defined
</pre><p>
Before you can update a variable, you have to <span class="c010">initialize</span>
it, usually with a simple assignment:
<a id="hevea_default501"></a></p><pre class="verbatim">&gt;&gt;&gt; x = 0
&gt;&gt;&gt; x = x + 1
</pre><p>
Updating a variable by adding 1 is called an <span class="c010">increment</span>;
subtracting 1 is called a <span class="c010">decrement</span>.
<a id="hevea_default502"></a>
<a id="hevea_default503"></a></p>
<h2 class="section" id="sec84">7.3&#XA0;&#XA0;The <span class="c004">while</span> statement</h2>
<p>
<a id="hevea_default504"></a>
<a id="hevea_default505"></a>
<a id="hevea_default506"></a>
<a id="hevea_default507"></a></p><p>Computers are often used to automate repetitive tasks. Repeating
identical or similar tasks without making errors is something that
computers do well and people do poorly. In a computer program,
repetition is also called <span class="c010">iteration</span>.</p><p>We have already seen two functions, <span class="c004">countdown</span> and
<code>print_n</code>, that iterate using recursion. Because iteration is so
common, Python provides language features to make it easier.
One is the <span class="c004">for</span> statement we saw in Section&#XA0;<a href="thinkpython2005.html#repetition">4.2</a>.
We&#X2019;ll get back to that later.</p><p>Another is the <span class="c004">while</span> statement. Here is a version of <span class="c004">countdown</span> that uses a <span class="c004">while</span> statement:</p><pre class="verbatim">def countdown(n):
    while n &gt; 0:
        print(n)
        n = n - 1
    print('Blastoff!')
</pre><p>
You can almost read the <span class="c004">while</span> statement as if it were English.
It means, &#X201C;While <span class="c004">n</span> is greater than 0,
display the value of <span class="c004">n</span> and then decrement
<span class="c004">n</span>. When you get to 0, display the word <span class="c004">Blastoff!</span>&#X201D;
<a id="hevea_default508"></a></p><p>More formally, here is the flow of execution for a <span class="c004">while</span> statement:</p><ol class="enumerate" type=1><li class="li-enumerate">Determine whether the condition is true or false.</li><li class="li-enumerate">If false, exit the <span class="c004">while</span> statement
and continue execution at the next statement.</li><li class="li-enumerate">If the condition is true, run the
body and then go back to step 1.</li></ol><p>This type of flow is called a loop because the third step
loops back around to the top. 
<a id="hevea_default509"></a>
<a id="hevea_default510"></a>
<a id="hevea_default511"></a></p><p>The body of the loop should change the value of one or more variables
so that the condition becomes false eventually and the loop
terminates. Otherwise the loop will repeat forever, which is called
an <span class="c010">infinite loop</span>. An endless source of amusement for computer
scientists is the observation that the directions on shampoo,
&#X201C;Lather, rinse, repeat&#X201D;, are an infinite loop.
<a id="hevea_default512"></a>
<a id="hevea_default513"></a></p><p>In the case of <span class="c004">countdown</span>, we can prove that the loop
terminates: if <span class="c004">n</span> is zero or negative, the loop never runs.
Otherwise, <span class="c004">n</span> gets smaller each time through the
loop, so eventually we have to get to 0.</p><p>For some other loops, it is not so easy to tell. For example:</p><pre class="verbatim">def sequence(n):
    while n != 1:
        print(n)
        if n % 2 == 0:        # n is even
            n = n / 2
        else:                 # n is odd
            n = n*3 + 1
</pre><p>
The condition for this loop is <span class="c004">n != 1</span>, so the loop will continue
until <span class="c004">n</span> is <span class="c004">1</span>, which makes the condition false.</p><p>Each time through the loop, the program outputs the value of <span class="c004">n</span>
and then checks whether it is even or odd. If it is even, <span class="c004">n</span> is
divided by 2. If it is odd, the value of <span class="c004">n</span> is replaced with
<span class="c004">n*3 + 1</span>. For example, if the argument passed to <span class="c004">sequence</span>
is 3, the resulting values of <span class="c004">n</span> are 3, 10, 5, 16, 8, 4, 2, 1.</p><p>Since <span class="c004">n</span> sometimes increases and sometimes decreases, there is no
obvious proof that <span class="c004">n</span> will ever reach 1, or that the program
terminates. For some particular values of <span class="c004">n</span>, we can prove
termination. For example, if the starting value is a power of two,
<span class="c004">n</span> will be even every time through the loop
until it reaches 1. The previous example ends with such a sequence,
starting with 16.
<a id="hevea_default514"></a></p><p>The hard question is whether we can prove that this program terminates
for <em>all</em> positive values of <span class="c004">n</span>. So far, no one has
been able to prove it <em>or</em> disprove it! (See
<a href="http://en.wikipedia.org/wiki/Collatz_conjecture"><span class="c004">http://en.wikipedia.org/wiki/Collatz_conjecture</span></a>.)</p><p>As an exercise, rewrite the function <code>print_n</code> from
Section&#XA0;<a href="thinkpython2006.html#recursion">5.8</a> using iteration instead of recursion.</p>
<h2 class="section" id="sec85">7.4&#XA0;&#XA0;<span class="c004">break</span></h2>
<p>
<a id="hevea_default515"></a>
<a id="hevea_default516"></a></p><p>Sometimes you don&#X2019;t know it&#X2019;s time to end a loop until you get half
way through the body. In that case you can use the <span class="c004">break</span>
statement to jump out of the loop.</p><p>For example, suppose you want to take input from the user until they
type <span class="c004">done</span>. You could write:</p><pre class="verbatim">while True:
    line = input('&gt; ')
    if line == 'done':
        break
    print(line)

print('Done!')
</pre><p>
The loop condition is <span class="c004">True</span>, which is always true, so the
loop runs until it hits the break statement.</p><p>Each time through, it prompts the user with an angle bracket.
If the user types <span class="c004">done</span>, the <span class="c004">break</span> statement exits
the loop. Otherwise the program echoes whatever the user types
and goes back to the top of the loop. Here&#X2019;s a sample run:</p><pre class="verbatim">&gt; not done
not done
&gt; done
Done!
</pre><p>
This way of writing <span class="c004">while</span> loops is common because you
can check the condition anywhere in the loop (not just at the
top) and you can express the stop condition affirmatively
(&#X201C;stop when this happens&#X201D;) rather than negatively (&#X201C;keep going
until that happens&#X201D;).</p>
<h2 class="section" id="sec86">7.5&#XA0;&#XA0;Square roots</h2>
<p>
<a id="squareroot"></a>
<a id="hevea_default517"></a></p><p>Loops are often used in programs that compute
numerical results by starting with an approximate answer and
iteratively improving it.
<a id="hevea_default518"></a></p><p>For example, one way of computing square roots is Newton&#X2019;s method.
Suppose that you want to know the square root of <span class="c009">a</span>. If you start
with almost any estimate, <span class="c009">x</span>, you can compute a better
estimate with the following formula:</p><table class="display dcenter"><tr class="c017"><td class="dcell"><span class="c009">y</span>&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c011"><span class="c009">x</span>&#XA0;+&#XA0;<span class="c009">a</span>/<span class="c009">x</span></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c011">2</td></tr>
</table></td><td class="dcell">&#XA0;</td></tr>
</table><p>
For example, if <span class="c009">a</span> is 4 and <span class="c009">x</span> is 3:</p><pre class="verbatim">&gt;&gt;&gt; a = 4
&gt;&gt;&gt; x = 3
&gt;&gt;&gt; y = (x + a/x) / 2
&gt;&gt;&gt; y
2.16666666667
</pre><p>
The result is closer to the correct answer (&#X221A;<span class="c016">4</span> = 2). If we
repeat the process with the new estimate, it gets even closer:</p><pre class="verbatim">&gt;&gt;&gt; x = y
&gt;&gt;&gt; y = (x + a/x) / 2
&gt;&gt;&gt; y
2.00641025641
</pre><p>
After a few more updates, the estimate is almost exact:
<a id="hevea_default519"></a></p><pre class="verbatim">&gt;&gt;&gt; x = y
&gt;&gt;&gt; y = (x + a/x) / 2
&gt;&gt;&gt; y
2.00001024003
&gt;&gt;&gt; x = y
&gt;&gt;&gt; y = (x + a/x) / 2
&gt;&gt;&gt; y
2.00000000003
</pre><p>
In general we don&#X2019;t know ahead of time how many steps it takes
to get to the right answer, but we know when we get there
because the estimate
stops changing:</p><pre class="verbatim">&gt;&gt;&gt; x = y
&gt;&gt;&gt; y = (x + a/x) / 2
&gt;&gt;&gt; y
2.0
&gt;&gt;&gt; x = y
&gt;&gt;&gt; y = (x + a/x) / 2
&gt;&gt;&gt; y
2.0
</pre><p>
When <span class="c004">y == x</span>, we can stop. Here is a loop that starts
with an initial estimate, <span class="c004">x</span>, and improves it until it
stops changing:</p><pre class="verbatim">while True:
    print(x)
    y = (x + a/x) / 2
    if y == x:
        break
    x = y
</pre><p>
For most values of <span class="c004">a</span> this works fine, but in general it is
dangerous to test <span class="c004">float</span> equality.
Floating-point values are only approximately right:
most rational numbers, like 1/3, and irrational numbers, like
&#X221A;<span class="c016">2</span>, can&#X2019;t be represented exactly with a <span class="c004">float</span>.
<a id="hevea_default520"></a>
<a id="hevea_default521"></a></p><p>Rather than checking whether <span class="c004">x</span> and <span class="c004">y</span> are exactly equal, it
is safer to use the built-in function <span class="c004">abs</span> to compute the
absolute value, or magnitude, of the difference between them:</p><pre class="verbatim">    if abs(y-x) &lt; epsilon:
        break
</pre><p>
Where <code>epsilon</code> has a value like <span class="c004">0.0000001</span> that
determines how close is close enough.</p>
<h2 class="section" id="sec87">7.6&#XA0;&#XA0;Algorithms</h2>
<p>
<a id="hevea_default522"></a></p><p>Newton&#X2019;s method is an example of an <span class="c010">algorithm</span>: it is a
mechanical process for solving a category of problems (in this
case, computing square roots).</p><p>To understand what an algorithm is, it might help to start with
something that is not an algorithm. When you learned to multiply
single-digit numbers, you probably memorized the multiplication table.
In effect, you memorized 100 specific solutions. That kind of
knowledge is not algorithmic.</p><p>But if you were &#X201C;lazy&#X201D;, you might have learned a few
tricks. For example, to find the product of <span class="c009">n</span> and 9, you can
write <span class="c009">n</span>&#X2212;1 as the first digit and 10&#X2212;<span class="c009">n</span> as the second
digit. This trick is a general solution for multiplying any
single-digit number by 9. That&#X2019;s an algorithm!
<a id="hevea_default523"></a>
<a id="hevea_default524"></a>
<a id="hevea_default525"></a>
<a id="hevea_default526"></a></p><p>Similarly, the techniques you learned for addition with carrying,
subtraction with borrowing, and long division are all algorithms. One
of the characteristics of algorithms is that they do not require any
intelligence to carry out. They are mechanical processes where
each step follows from the last according to a simple set of rules.</p><p>Executing algorithms is boring, but designing them is interesting,
intellectually challenging, and a central part of computer science.</p><p>Some of the things that people do naturally, without difficulty or
conscious thought, are the hardest to express algorithmically.
Understanding natural language is a good example. We all do it, but
so far no one has been able to explain <em>how</em> we do it, at least
not in the form of an algorithm.</p>
<h2 class="section" id="sec88">7.7&#XA0;&#XA0;Debugging</h2>
<p>
<a id="bisectbug"></a></p><p>As you start writing bigger programs, you might find yourself
spending more time debugging. More code means more chances to
make an error and more places for bugs to hide.
<a id="hevea_default527"></a>
<a id="hevea_default528"></a></p><p>One way to cut your debugging time is &#X201C;debugging by bisection&#X201D;.
For example, if there are 100 lines in your program and you
check them one at a time, it would take 100 steps.</p><p>Instead, try to break the problem in half. Look at the middle
of the program, or near it, for an intermediate value you
can check. Add a <span class="c004">print</span> statement (or something else
that has a verifiable effect) and run the program.</p><p>If the mid-point check is incorrect, there must be a problem in the
first half of the program. If it is correct, the problem is
in the second half.</p><p>Every time you perform a check like this, you halve the number of
lines you have to search. After six steps (which is fewer than 100),
you would be down to one or two lines of code, at least in theory.</p><p>In practice it is not always clear what
the &#X201C;middle of the program&#X201D; is and not always possible to
check it. It doesn&#X2019;t make sense to count lines and find the
exact midpoint. Instead, think about places
in the program where there might be errors and places where it
is easy to put a check. Then choose a spot where you
think the chances are about the same that the bug is before
or after the check.</p>
<h2 class="section" id="sec89">7.8&#XA0;&#XA0;Glossary</h2>
<dl class="description"><dt class="dt-description"><span class="c010">reassignment:</span></dt><dd class="dd-description"> Assigning a new value to a variable that
already exists.
<a id="hevea_default529"></a></dd><dt class="dt-description"><span class="c010">update:</span></dt><dd class="dd-description"> An assignment where the new value of the variable
depends on the old.
<a id="hevea_default530"></a></dd><dt class="dt-description"><span class="c010">initialization:</span></dt><dd class="dd-description"> An assignment that gives an initial value to
a variable that will be updated.
<a id="hevea_default531"></a></dd><dt class="dt-description"><span class="c010">increment:</span></dt><dd class="dd-description"> An update that increases the value of a variable
(often by one).
<a id="hevea_default532"></a></dd><dt class="dt-description"><span class="c010">decrement:</span></dt><dd class="dd-description"> An update that decreases the value of a variable.
<a id="hevea_default533"></a></dd><dt class="dt-description"><span class="c010">iteration:</span></dt><dd class="dd-description"> Repeated execution of a set of statements using
either a recursive function call or a loop.
<a id="hevea_default534"></a></dd><dt class="dt-description"><span class="c010">infinite loop:</span></dt><dd class="dd-description"> A loop in which the terminating condition is
never satisfied.
<a id="hevea_default535"></a></dd><dt class="dt-description"><span class="c010">algorithm:</span></dt><dd class="dd-description"> A general process for solving a category of
problems.
<a id="hevea_default536"></a></dd></dl>
<h2 class="section" id="sec90">7.9&#XA0;&#XA0;Exercises</h2>
<div class="theorem"><span class="c010">Exercise&#XA0;1</span>&#XA0;&#XA0;
<a id="hevea_default537"></a><p><em>Copy the loop from Section&#XA0;</em><a href="#squareroot"><em>7.5</em></a><em>
and encapsulate it in a function called
<code>mysqrt</code> that takes <span class="c004">a</span> as a parameter, chooses a
reasonable value of <span class="c004">x</span>, and returns an estimate of the square
root of <span class="c004">a</span>. </em><a id="hevea_default538"></a></p><p><em>To test it, write a function named <code>test_square_root</code>
that prints a table like this:</em></p><pre class="verbatim"><em>a   mysqrt(a)     math.sqrt(a)  diff
-   ---------     ------------  ----
1.0 1.0           1.0           0.0
2.0 1.41421356237 1.41421356237 2.22044604925e-16
3.0 1.73205080757 1.73205080757 0.0
4.0 2.0           2.0           0.0
5.0 2.2360679775  2.2360679775  0.0
6.0 2.44948974278 2.44948974278 0.0
7.0 2.64575131106 2.64575131106 0.0
8.0 2.82842712475 2.82842712475 4.4408920985e-16
9.0 3.0           3.0           0.0
</em></pre><p><em>
The first column is a number, </em><span class="c009">a</span><em>; the second column is the square
root of </em><span class="c009">a</span><em> computed with <code>mysqrt</code>; the third column is the
square root computed by <span class="c004">math.sqrt</span>; the fourth column is the
absolute value of the difference between the two estimates.
</em></p></div><div class="theorem"><span class="c010">Exercise&#XA0;2</span>&#XA0;&#XA0;
<a id="hevea_default539"></a>
<a id="hevea_default540"></a><p><em>The built-in function <span class="c004">eval</span> takes a string and evaluates
it using the Python interpreter. For example:</em></p><pre class="verbatim"><em>&gt;&gt;&gt; eval('1 + 2 * 3')
7
&gt;&gt;&gt; import math
&gt;&gt;&gt; eval('math.sqrt(5)')
2.2360679774997898
&gt;&gt;&gt; eval('type(math.pi)')
&lt;class 'float'&gt;
</em></pre><p><em>
Write a function called <code>eval_loop</code> that iteratively
prompts the user, takes the resulting input and evaluates
it using <span class="c004">eval</span>, and prints the result.</em></p><p><em>It should continue until the user enters <code>'done'</code>, and then
return the value of the last expression it evaluated.</em></p></div><div class="theorem"><span class="c010">Exercise&#XA0;3</span>&#XA0;&#XA0;
<a id="hevea_default541"></a><p><em>The mathematician Srinivasa Ramanujan found an
infinite series
that can be used to generate a numerical
approximation of </em>1 / &#X3C0;<em>:
</em><a id="hevea_default542"></a></p><table class="display dcenter"><tr class="c017"><td class="dcell"><table class="display"><tr><td class="dcell c011">1</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c011">&#X3C0;</td></tr>
</table></td><td class="dcell">&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c011"><table class="display"><tr class="c017"><td class="dcell">2</td><td class="dcell"><span class="c008">&#X221A;</span></td><td class="dcell"><table class="c002 cellpadding0"><tr><td class="hbar"></td></tr>
<tr><td class="c012">2</td></tr>
</table></td></tr>
</table></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c011">9801</td></tr>
</table></td><td class="dcell">&#XA0;
</td><td class="dcell"><table class="display"><tr><td class="dcell c011">&#X221E;</td></tr>
<tr><td class="dcell c011"><span style="font-size:xx-large">&#X2211;</span></td></tr>
<tr><td class="dcell c011"><span class="c009">k</span>=0</td></tr>
</table></td><td class="dcell">&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c011">(4<span class="c009">k</span>)!(1103+26390<span class="c009">k</span>)</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c011">(<span class="c009">k</span>!)<sup>4</sup>&#XA0;396<sup>4<span class="c009">k</span></sup></td></tr>
</table></td><td class="dcell">&#XA0;</td></tr>
</table><p><em>Write a function called <code>estimate_pi</code> that uses this formula
to compute and return an estimate of </em>&#X3C0;<em>. It should use a <span class="c004">while</span>
loop to compute terms of the summation until the last term is
smaller than <span class="c004">1e-15</span> (which is Python notation for </em>10<sup>&#X2212;15</sup><em>).
You can check the result by comparing it to <span class="c004">math.pi</span>.</em></p><p><em>Solution: </em><a href="https://thinkpython.com/code/pi.py"><em><span class="c004">https://thinkpython.com/code/pi.py</span></em></a><em>.</em></p></div>
<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

</td>

<td width=130 valign="top">

<h4>Contribute</h4>
If you would like to make a contribution to support my books,
you can use the button below and pay with PayPal.  Thank you!

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="RAAYAZ7Y48S2A">
<table>
<tr><td><input type="hidden" name="on0" value="Pay what you want!">Pay what you want:</td></tr><tr><td><select name="os0">
	<option value="Small">Small $1.00 USD</option>
	<option value="Medium">Medium $5.00 USD</option>
	<option value="Large">Large $10.00 USD</option>
	<option value="X-Large">X-Large $20.00 USD</option>
	<option value="XX-Large">XX-Large $50.00 USD</option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

  
<p>
<h4>Are you using one of our books in a class?</h4>  We'd like to know
about it.  Please consider filling out <a href="http://spreadsheets.google.com/viewform?formkey=dC0tNUZkMjBEdXVoRGljNm9FRmlTMHc6MA" onClick="javascript: pageTracker._trackPageview('/outbound/survey');">this short survey</a>.

<p>
<br>

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=2JJH4SWCAVVYSQHO">Think DSP</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=CTV7PDT7E5EGGJUM"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491938455&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=ZY6MAYM33ZTNSCNZ">Think Java</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=PT77ANWARUNNU3UK"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491929561&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20">Think Bayes</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449370780&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=FJKSQ3IHEMY2F2VA">Think Python 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">


<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=ZZ454DLQ3IXDHNHX"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491939362&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=O7WYM6H6YBYUFNWU">Think Stats 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=JVSYKQHYSUIEYRHL"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1491907339&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_tl?ie=UTF8&tag=greenteapre01-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1449314635">Think Complexity</a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449314635&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449314635&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">


</td>
</tr>
</table>
<hr>
<a href="thinkpython2007.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2009.html"><img src="next.png" ALT="Next"></a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.32">
<link rel="stylesheet" type="text/css" href="thinkpython2.css">
<title>Strings</title>
</head>
<body>
<a href="thinkpython2008.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2010.html"><img src="next.png" ALT="Next"></a>
<hr>
<table>

<tr>

<td valign="top" width="100" bgcolor="#b6459a">
</td>

<td valign="top" width="600" style="padding: 20px 20px;">

<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

<h1 class="chapter" id="sec91">Chapter&#XA0;8&#XA0;&#XA0;Strings</h1>
<p>
<a id="strings"></a></p><p>Strings are not like integers, floats, and booleans. A string
is a <span class="c010">sequence</span>, which means it is
an ordered collection of other values. In this chapter you&#X2019;ll see
how to access the characters that make up a string, and you&#X2019;ll
learn about some of the methods strings provide.
<a id="hevea_default543"></a></p>
<h2 class="section" id="sec92">8.1&#XA0;&#XA0;A string is a sequence</h2>
<p><a id="hevea_default544"></a>
<a id="hevea_default545"></a>
<a id="hevea_default546"></a>
<a id="hevea_default547"></a>
A string is a sequence of characters. 
You can access the characters one at a time with the
bracket operator:</p><pre class="verbatim">&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; letter = fruit[1]
</pre><p>
The second statement selects character number 1 from <span class="c004">fruit</span> and assigns it to <span class="c004">letter</span>. 
<a id="hevea_default548"></a></p><p>The expression in brackets is called an <span class="c010">index</span>. 
The index indicates which character in the sequence you
want (hence the name).</p><p>But you might not get what you expect:</p><pre class="verbatim">&gt;&gt;&gt; letter
'a'
</pre><p>
For most people, the first letter of <code>'banana'</code> is <span class="c004">b</span>, not
<span class="c004">a</span>. But for computer scientists, the index is an offset from the
beginning of the string, and the offset of the first letter is zero.</p><pre class="verbatim">&gt;&gt;&gt; letter = fruit[0]
&gt;&gt;&gt; letter
'b'
</pre><p>
So <span class="c004">b</span> is the 0th letter (&#X201C;zero-eth&#X201D;) of <code>'banana'</code>, <span class="c004">a</span> is the 1th letter (&#X201C;one-eth&#X201D;), and <span class="c004">n</span> is the 2th letter
(&#X201C;two-eth&#X201D;). <a id="hevea_default549"></a> <a id="hevea_default550"></a></p><p>As an index you can use an expression that contains variables and
operators:
<a id="hevea_default551"></a></p><pre class="verbatim">&gt;&gt;&gt; i = 1
&gt;&gt;&gt; fruit[i]
'a'
&gt;&gt;&gt; fruit[i+1]
'n'
</pre><p>But the value of the index has to be an integer. Otherwise you
get:
<a id="hevea_default552"></a>
<a id="hevea_default553"></a></p><pre class="verbatim">&gt;&gt;&gt; letter = fruit[1.5]
TypeError: string indices must be integers
</pre>
<h2 class="section" id="sec93">8.2&#XA0;&#XA0;<span class="c004">len</span></h2>
<p>
<a id="hevea_default554"></a>
<a id="hevea_default555"></a></p><p><span class="c004">len</span> is a built-in function that returns the number of characters
in a string:</p><pre class="verbatim">&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; len(fruit)
6
</pre><p>
To get the last letter of a string, you might be tempted to try something
like this:
<a id="hevea_default556"></a>
<a id="hevea_default557"></a></p><pre class="verbatim">&gt;&gt;&gt; length = len(fruit)
&gt;&gt;&gt; last = fruit[length]
IndexError: string index out of range
</pre><p>
The reason for the <span class="c004">IndexError</span> is that there is no letter in <span class="c004">&#X2019;banana&#X2019;</span> with the index 6. Since we started counting at zero, the
six letters are numbered 0 to 5. To get the last character, you have
to subtract 1 from <span class="c004">length</span>:</p><pre class="verbatim">&gt;&gt;&gt; last = fruit[length-1]
&gt;&gt;&gt; last
'a'
</pre><p>
Or you can use negative indices, which count backward from
the end of the string. The expression <span class="c004">fruit[-1]</span> yields the last
letter, <span class="c004">fruit[-2]</span> yields the second to last, and so on.
<a id="hevea_default558"></a>
<a id="hevea_default559"></a></p>
<h2 class="section" id="sec94">8.3&#XA0;&#XA0;Traversal with a <span class="c004">for</span> loop</h2>
<p>
<a id="for"></a>
<a id="hevea_default560"></a>
<a id="hevea_default561"></a>
<a id="hevea_default562"></a>
<a id="hevea_default563"></a>
<a id="hevea_default564"></a>
<a id="hevea_default565"></a></p><p>A lot of computations involve processing a string one character at a
time. Often they start at the beginning, select each character in
turn, do something to it, and continue until the end. This pattern of
processing is called a <span class="c010">traversal</span>. One way to write a traversal
is with a <span class="c004">while</span> loop:</p><pre class="verbatim">index = 0
while index &lt; len(fruit):
    letter = fruit[index]
    print(letter)
    index = index + 1
</pre><p>
This loop traverses the string and displays each letter on a line by
itself. The loop condition is <span class="c004">index &lt; len(fruit)</span>, so
when <span class="c004">index</span> is equal to the length of the string, the
condition is false, and the body of the loop doesn&#X2019;t run. The
last character accessed is the one with the index <span class="c004">len(fruit)-1</span>,
which is the last character in the string.</p><p>As an exercise, write a function that takes a string as an argument
and displays the letters backward, one per line.</p><p>Another way to write a traversal is with a <span class="c004">for</span> loop:</p><pre class="verbatim">for letter in fruit:
    print(letter)
</pre><p>
Each time through the loop, the next character in the string is assigned
to the variable <span class="c004">letter</span>. The loop continues until no characters are
left.
<a id="hevea_default566"></a>
<a id="hevea_default567"></a>
<a id="hevea_default568"></a></p><p>The following example shows how to use concatenation (string addition)
and a <span class="c004">for</span> loop to generate an abecedarian series (that is, in
alphabetical order). In Robert McCloskey&#X2019;s book <em>Make
Way for Ducklings</em>, the names of the ducklings are Jack, Kack, Lack,
Mack, Nack, Ouack, Pack, and Quack. This loop outputs these names in
order:</p><pre class="verbatim">prefixes = 'JKLMNOPQ'
suffix = 'ack'

for letter in prefixes:
    print(letter + suffix)
</pre><p>
The output is:</p><pre class="verbatim">Jack
Kack
Lack
Mack
Nack
Oack
Pack
Qack
</pre><p>
Of course, that&#X2019;s not quite right because &#X201C;Ouack&#X201D; and &#X201C;Quack&#X201D; are
misspelled. As an exercise, modify the program to fix this error.</p>
<h2 class="section" id="sec95">8.4&#XA0;&#XA0;String slices</h2>
<p>
<a id="slice"></a>
<a id="hevea_default569"></a> <a id="hevea_default570"></a> <a id="hevea_default571"></a>
<a id="hevea_default572"></a> <a id="hevea_default573"></a></p><p>A segment of a string is called a <span class="c010">slice</span>. Selecting a slice is
similar to selecting a character:</p><pre class="verbatim">&gt;&gt;&gt; s = 'Monty Python'
&gt;&gt;&gt; s[0:5]
'Monty'
&gt;&gt;&gt; s[6:12]
'Python'
</pre><p>
The operator <span class="c004">[n:m]</span> returns the part of the string from the 
&#X201C;n-eth&#X201D; character to the &#X201C;m-eth&#X201D; character, including the first but
excluding the last. This behavior is counterintuitive, but it might
help to imagine the indices pointing <em>between</em> the
characters, as in Figure&#XA0;<a href="#fig.banana">8.1</a>.</p><blockquote class="figure"><div class="center"><hr class="c019"></div>
<div class="center"><img src="thinkpython2009.png"></div>
<div class="caption"><table class="c001 cellpading0"><tr><td class="c018">Figure 8.1: Slice indices.</td></tr>
</table></div>
<a id="fig.banana"></a>
<div class="center"><hr class="c019"></div></blockquote><p>If you omit the first index (before the colon), the slice starts at
the beginning of the string. If you omit the second index, the slice
goes to the end of the string:</p><pre class="verbatim">&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; fruit[:3]
'ban'
&gt;&gt;&gt; fruit[3:]
'ana'
</pre><p>
If the first index is greater than or equal to the second the result
is an <span class="c010">empty string</span>, represented by two quotation marks:
<a id="hevea_default574"></a></p><pre class="verbatim">&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; fruit[3:3]
''
</pre><p>
An empty string contains no characters and has length 0, but other
than that, it is the same as any other string.</p><p>Continuing this example, what do you think 
<span class="c004">fruit[:]</span> means? Try it and see.
<a id="hevea_default575"></a>
<a id="hevea_default576"></a></p>
<h2 class="section" id="sec96">8.5&#XA0;&#XA0;Strings are immutable</h2>
<p>
<a id="hevea_default577"></a>
<a id="hevea_default578"></a>
<a id="hevea_default579"></a></p><p>It is tempting to use the <span class="c004">[]</span> operator on the left side of an
assignment, with the intention of changing a character in a string.
For example:
<a id="hevea_default580"></a>
<a id="hevea_default581"></a></p><pre class="verbatim">&gt;&gt;&gt; greeting = 'Hello, world!'
&gt;&gt;&gt; greeting[0] = 'J'
TypeError: 'str' object does not support item assignment
</pre><p>
The &#X201C;object&#X201D; in this case is the string and the &#X201C;item&#X201D; is
the character you tried to assign. For now, an object is
the same thing as a value, but we will refine that definition
later (Section&#XA0;<a href="thinkpython2011.html#equivalence">10.10</a>). 
<a id="hevea_default582"></a>
<a id="hevea_default583"></a>
<a id="hevea_default584"></a>
<a id="hevea_default585"></a>
<a id="hevea_default586"></a></p><p>The reason for the error is that
strings are <span class="c010">immutable</span>, which means you can&#X2019;t change an
existing string. The best you can do is create a new string
that is a variation on the original:</p><pre class="verbatim">&gt;&gt;&gt; greeting = 'Hello, world!'
&gt;&gt;&gt; new_greeting = 'J' + greeting[1:]
&gt;&gt;&gt; new_greeting
'Jello, world!'
</pre><p>
This example concatenates a new first letter onto
a slice of <span class="c004">greeting</span>. It has no effect on
the original string.
<a id="hevea_default587"></a></p>
<h2 class="section" id="sec97">8.6&#XA0;&#XA0;Searching</h2>
<p>
<a id="find"></a></p><p>What does the following function do?
<a id="hevea_default588"></a>
<a id="hevea_default589"></a></p><pre class="verbatim">def find(word, letter):
    index = 0
    while index &lt; len(word):
        if word[index] == letter:
            return index
        index = index + 1
    return -1
</pre><p>
In a sense, <span class="c004">find</span> is the inverse of the <span class="c004">[]</span> operator.
Instead of taking an index and extracting the corresponding character,
it takes a character and finds the index where that character
appears. If the character is not found, the function returns <span class="c004">-1</span>.</p><p>This is the first example we have seen of a <span class="c004">return</span> statement
inside a loop. If <span class="c004">word[index] == letter</span>, the function breaks
out of the loop and returns immediately.</p><p>If the character doesn&#X2019;t appear in the string, the program
exits the loop normally and returns <span class="c004">-1</span>.</p><p>This pattern of computation&#X2014;traversing a sequence and returning
when we find what we are looking for&#X2014;is called a <span class="c010">search</span>.
<a id="hevea_default590"></a>
<a id="hevea_default591"></a>
<a id="hevea_default592"></a></p><p>As an exercise, modify <span class="c004">find</span> so that it has a
third parameter, the index in <span class="c004">word</span> where it should start
looking.</p>
<h2 class="section" id="sec98">8.7&#XA0;&#XA0;Looping and counting</h2>
<p>
<a id="counter"></a>
<a id="hevea_default593"></a>
<a id="hevea_default594"></a>
<a id="hevea_default595"></a>
<a id="hevea_default596"></a></p><p>The following program counts the number of times the letter <span class="c004">a</span>
appears in a string:</p><pre class="verbatim">word = 'banana'
count = 0
for letter in word:
    if letter == 'a':
        count = count + 1
print(count)
</pre><p>
This program demonstrates another pattern of computation called a <span class="c010">counter</span>. The variable <span class="c004">count</span> is initialized to 0 and then
incremented each time an <span class="c004">a</span> is found.
When the loop exits, <span class="c004">count</span>
contains the result&#X2014;the total number of <span class="c004">a</span>&#X2019;s.</p><p><a id="hevea_default597"></a>
As an exercise, encapsulate this code in a function named <span class="c004">count</span>, and generalize it so that it accepts the string and the
letter as arguments.</p><p>Then rewrite the function so that instead of
traversing the string, it uses the three-parameter version of <span class="c004">find</span> from the previous section.</p>
<h2 class="section" id="sec99">8.8&#XA0;&#XA0;String methods</h2>
<p>
<a id="optional"></a></p><p>Strings provide methods that perform a variety of useful operations.
A method is similar to a function&#X2014;it takes arguments and
returns a value&#X2014;but the syntax is different. For example, the
method <span class="c004">upper</span> takes a string and returns a new string with
all uppercase letters.
<a id="hevea_default598"></a>
<a id="hevea_default599"></a></p><p>Instead of the function syntax <span class="c004">upper(word)</span>, it uses
the method syntax <span class="c004">word.upper()</span>.</p><pre class="verbatim">&gt;&gt;&gt; word = 'banana'
&gt;&gt;&gt; new_word = word.upper()
&gt;&gt;&gt; new_word
'BANANA'
</pre><p>
This form of dot notation specifies the name of the method, <span class="c004">upper</span>, and the name of the string to apply the method to, <span class="c004">word</span>. The empty parentheses indicate that this method takes no
arguments.
<a id="hevea_default600"></a>
<a id="hevea_default601"></a></p><p>A method call is called an <span class="c010">invocation</span>; in this case, we would
say that we are invoking <span class="c004">upper</span> on <span class="c004">word</span>.
<a id="hevea_default602"></a></p><p>As it turns out, there is a string method named <span class="c004">find</span> that
is remarkably similar to the function we wrote:</p><pre class="verbatim">&gt;&gt;&gt; word = 'banana'
&gt;&gt;&gt; index = word.find('a')
&gt;&gt;&gt; index
1
</pre><p>
In this example, we invoke <span class="c004">find</span> on <span class="c004">word</span> and pass
the letter we are looking for as a parameter.</p><p>Actually, the <span class="c004">find</span> method is more general than our function;
it can find substrings, not just characters:</p><pre class="verbatim">&gt;&gt;&gt; word.find('na')
2
</pre><p>
By default, <span class="c004">find</span> starts at the beginning of the string, but
it can take a second argument, the index where it should start:
<a id="hevea_default603"></a>
<a id="hevea_default604"></a></p><pre class="verbatim">&gt;&gt;&gt; word.find('na', 3)
4
</pre><p>
This is an example of an <span class="c010">optional argument</span>;
<span class="c004">find</span> can
also take a third argument, the index where it should stop:</p><pre class="verbatim">&gt;&gt;&gt; name = 'bob'
&gt;&gt;&gt; name.find('b', 1, 2)
-1
</pre><p>
This search fails because <span class="c004">b</span> does not
appear in the index range from <span class="c004">1</span> to <span class="c004">2</span>, not including <span class="c004">2</span>. Searching up to, but not including, the second index makes
<span class="c004">find</span> consistent with the slice operator.</p>
<h2 class="section" id="sec100">8.9&#XA0;&#XA0;The <span class="c004">in</span> operator</h2>
<p>
<a id="inboth"></a>
<a id="hevea_default605"></a>
<a id="hevea_default606"></a>
<a id="hevea_default607"></a>
<a id="hevea_default608"></a></p><p>The word <span class="c004">in</span> is a boolean operator that takes two strings and
returns <span class="c004">True</span> if the first appears as a substring in the second:</p><pre class="verbatim">&gt;&gt;&gt; 'a' in 'banana'
True
&gt;&gt;&gt; 'seed' in 'banana'
False
</pre><p>
For example, the following function prints all the
letters from <span class="c004">word1</span> that also appear in <span class="c004">word2</span>:</p><pre class="verbatim">def in_both(word1, word2):
    for letter in word1:
        if letter in word2:
            print(letter)
</pre><p>
With well-chosen variable names,
Python sometimes reads like English. You could read
this loop, &#X201C;for (each) letter in (the first) word, if (the) letter 
(appears) in (the second) word, print (the) letter.&#X201D;</p><p>Here&#X2019;s what you get if you compare apples and oranges:</p><pre class="verbatim">&gt;&gt;&gt; in_both('apples', 'oranges')
a
e
s
</pre>
<h2 class="section" id="sec101">8.10&#XA0;&#XA0;String comparison</h2>
<p>
<a id="hevea_default609"></a>
<a id="hevea_default610"></a></p><p>The relational operators work on strings. To see if two strings are equal:</p><pre class="verbatim">if word == 'banana':
    print('All right, bananas.')
</pre><p>
Other relational operations are useful for putting words in alphabetical
order:</p><pre class="verbatim">if word &lt; 'banana':
    print('Your word, ' + word + ', comes before banana.')
elif word &gt; 'banana':
    print('Your word, ' + word + ', comes after banana.')
else:
    print('All right, bananas.')
</pre><p>
Python does not handle uppercase and lowercase letters the same way
people do. All the uppercase letters come before all the
lowercase letters, so:</p><pre class="verbatim">Your word, Pineapple, comes before banana.
</pre><p>
A common way to address this problem is to convert strings to a
standard format, such as all lowercase, before performing the
comparison. Keep that in mind in case you have to defend yourself
against a man armed with a Pineapple.</p>
<h2 class="section" id="sec102">8.11&#XA0;&#XA0;Debugging</h2>
<p>
<a id="hevea_default611"></a>
<a id="hevea_default612"></a></p><p>When you use indices to traverse the values in a sequence,
it is tricky to get the beginning and end of the traversal
right. Here is a function that is supposed to compare two
words and return <span class="c004">True</span> if one of the words is the reverse
of the other, but it contains two errors:</p><pre class="verbatim">def is_reverse(word1, word2):
    if len(word1) != len(word2):
        return False
    
    i = 0
    j = len(word2)

    while j &gt; 0:
        if word1[i] != word2[j]:
            return False
        i = i+1
        j = j-1

    return True
</pre><p>
The first <span class="c004">if</span> statement checks whether the words are the
same length. If not, we can return <span class="c004">False</span> immediately.
Otherwise, for the rest of the function, we can assume that the words
are the same length. This is an example of the guardian pattern
in Section&#XA0;<a href="thinkpython2007.html#guardian">6.8</a>.
<a id="hevea_default613"></a>
<a id="hevea_default614"></a>
<a id="hevea_default615"></a></p><p><span class="c004">i</span> and <span class="c004">j</span> are indices: <span class="c004">i</span> traverses <span class="c004">word1</span>
forward while <span class="c004">j</span> traverses <span class="c004">word2</span> backward. If we find
two letters that don&#X2019;t match, we can return <span class="c004">False</span> immediately.
If we get through the whole loop and all the letters match, we
return <span class="c004">True</span>.</p><p>If we test this function with the words &#X201C;pots&#X201D; and &#X201C;stop&#X201D;, we
expect the return value <span class="c004">True</span>, but we get an IndexError:
<a id="hevea_default616"></a>
<a id="hevea_default617"></a></p><pre class="verbatim">&gt;&gt;&gt; is_reverse('pots', 'stop')
...
  File "reverse.py", line 15, in is_reverse
    if word1[i] != word2[j]:
IndexError: string index out of range
</pre><p>
For debugging this kind of error, my first move is to
print the values of the indices immediately before the line
where the error appears.</p><pre class="verbatim">    while j &gt; 0:
        print(i, j)        # print here
        
        if word1[i] != word2[j]:
            return False
        i = i+1
        j = j-1
</pre><p>
Now when I run the program again, I get more information:</p><pre class="verbatim">&gt;&gt;&gt; is_reverse('pots', 'stop')
0 4
...
IndexError: string index out of range
</pre><p>
The first time through the loop, the value of <span class="c004">j</span> is 4,
which is out of range for the string <code>'pots'</code>.
The index of the last character is 3, so the
initial value for <span class="c004">j</span> should be <span class="c004">len(word2)-1</span>.</p><p>If I fix that error and run the program again, I get:</p><pre class="verbatim">&gt;&gt;&gt; is_reverse('pots', 'stop')
0 3
1 2
2 1
True
</pre><p>
This time we get the right answer, but it looks like the loop only ran
three times, which is suspicious. To get a better idea of what is
happening, it is useful to draw a state diagram. During the first
iteration, the frame for <code>is_reverse</code> is shown in
Figure&#XA0;<a href="#fig.state4">8.2</a>. <a id="hevea_default618"></a> <a id="hevea_default619"></a></p><blockquote class="figure"><div class="center"><hr class="c019"></div>
<div class="center"><img src="thinkpython2010.png"></div>
<div class="caption"><table class="c001 cellpading0"><tr><td class="c018">Figure 8.2: State diagram.</td></tr>
</table></div>
<a id="fig.state4"></a>
<div class="center"><hr class="c019"></div></blockquote><p>I took some license by arranging the variables in the frame
and adding dotted lines to show that the values of <span class="c004">i</span> and
<span class="c004">j</span> indicate characters in <span class="c004">word1</span> and <span class="c004">word2</span>.</p><p>Starting with this diagram, run the program on paper, changing the
values of <span class="c004">i</span> and <span class="c004">j</span> during each iteration. Find and fix the
second error in this function.
<a id="isreverse"></a></p>
<h2 class="section" id="sec103">8.12&#XA0;&#XA0;Glossary</h2>
<dl class="description"><dt class="dt-description"><span class="c010">object:</span></dt><dd class="dd-description"> Something a variable can refer to. For now,
you can use &#X201C;object&#X201D; and &#X201C;value&#X201D; interchangeably.
<a id="hevea_default620"></a></dd><dt class="dt-description"><span class="c010">sequence:</span></dt><dd class="dd-description"> An ordered collection of
values where each value is identified by an integer index.
<a id="hevea_default621"></a></dd><dt class="dt-description"><span class="c010">item:</span></dt><dd class="dd-description"> One of the values in a sequence.
<a id="hevea_default622"></a></dd><dt class="dt-description"><span class="c010">index:</span></dt><dd class="dd-description"> An integer value used to select an item in
a sequence, such as a character in a string. In Python
indices start from 0.
<a id="hevea_default623"></a></dd><dt class="dt-description"><span class="c010">slice:</span></dt><dd class="dd-description"> A part of a string specified by a range of indices.
<a id="hevea_default624"></a></dd><dt class="dt-description"><span class="c010">empty string:</span></dt><dd class="dd-description"> A string with no characters and length 0, represented
by two quotation marks.
<a id="hevea_default625"></a></dd><dt class="dt-description"><span class="c010">immutable:</span></dt><dd class="dd-description"> The property of a sequence whose items cannot
be changed.
<a id="hevea_default626"></a></dd><dt class="dt-description"><span class="c010">traverse:</span></dt><dd class="dd-description"> To iterate through the items in a sequence,
performing a similar operation on each.
<a id="hevea_default627"></a></dd><dt class="dt-description"><span class="c010">search:</span></dt><dd class="dd-description"> A pattern of traversal that stops
when it finds what it is looking for.
<a id="hevea_default628"></a>
<a id="hevea_default629"></a></dd><dt class="dt-description"><span class="c010">counter:</span></dt><dd class="dd-description"> A variable used to count something, usually initialized
to zero and then incremented.
<a id="hevea_default630"></a></dd><dt class="dt-description"><span class="c010">invocation:</span></dt><dd class="dd-description"> A statement that calls a method.
<a id="hevea_default631"></a></dd><dt class="dt-description"><span class="c010">optional argument:</span></dt><dd class="dd-description"> A function or method argument that is not
required.
<a id="hevea_default632"></a>
<a id="hevea_default633"></a></dd></dl>
<h2 class="section" id="sec104">8.13&#XA0;&#XA0;Exercises</h2>
<div class="theorem"><span class="c010">Exercise&#XA0;1</span>&#XA0;&#XA0;
<a id="hevea_default634"></a>
<a id="hevea_default635"></a><p><em>Read the documentation of the string methods at
</em><a href="http://docs.python.org/3/library/stdtypes.html#string-methods"><span class="c004"><em>http://docs.python.org/3/library/stdtypes.html#string-methods</em></span></a><em>.
You might want to experiment with some of them to make sure you
understand how they work. <span class="c004">strip</span> and <span class="c004">replace</span> are
particularly useful.</em></p><p><em>The documentation uses a syntax that might be confusing.
For example, in <code>find(sub[, start[, end]])</code>, the brackets
indicate optional arguments. So <span class="c004">sub</span> is required, but
<span class="c004">start</span> is optional, and if you include <span class="c004">start</span>,
then <span class="c004">end</span> is optional.
</em><a id="hevea_default636"></a>
<a id="hevea_default637"></a></p></div><div class="theorem"><span class="c010">Exercise&#XA0;2</span>&#XA0;&#XA0;
<a id="hevea_default638"></a>
<a id="hevea_default639"></a><p><em>There is a string method called <span class="c004">count</span> that is similar
to the function in Section&#XA0;</em><a href="#counter"><em>8.7</em></a><em>. Read the documentation
of this method
and write an invocation that counts the number of <span class="c004">a</span>&#X2019;s
in <code>'banana'</code>.
</em></p></div><div class="theorem"><span class="c010">Exercise&#XA0;3</span>&#XA0;&#XA0;
<a id="hevea_default640"></a>
<a id="hevea_default641"></a>
<a id="hevea_default642"></a><p><em>A string slice can take a third index that specifies the &#X201C;step
size&#X201D;; that is, the number of spaces between successive characters.
A step size of 2 means every other character; 3 means every third,
etc.</em></p><pre class="verbatim"><em>&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; fruit[0:5:2]
'bnn'
</em></pre><p><em>A step size of -1 goes through the word backwards, so
the slice <code>[::-1]</code> generates a reversed string.
</em><a id="hevea_default643"></a></p><p><em>Use this idiom to write a one-line version of <code>is_palindrome</code>
from Exercise&#XA0;</em><a href="thinkpython2007.html#palindrome"><em>3</em></a><em>.
</em></p></div><div class="theorem"><span class="c010">Exercise&#XA0;4</span>&#XA0;&#XA0;<p><em>The following functions are all </em>intended<em> to check whether a
string contains any lowercase letters, but at least some of them are
wrong. For each function, describe what the function actually does
(assuming that the parameter is a string).</em></p><pre class="verbatim"><em>def any_lowercase1(s):
    for c in s:
        if c.islower():
            return True
        else:
            return False

def any_lowercase2(s):
    for c in s:
        if 'c'.islower():
            return 'True'
        else:
            return 'False'

def any_lowercase3(s):
    for c in s:
        flag = c.islower()
    return flag

def any_lowercase4(s):
    flag = False
    for c in s:
        flag = flag or c.islower()
    return flag

def any_lowercase5(s):
    for c in s:
        if not c.islower():
            return False
    return True
</em></pre></div><div class="theorem"><span class="c010">Exercise&#XA0;5</span>&#XA0;&#XA0;
<a id="hevea_default644"></a>
<a id="hevea_default645"></a><p><a id="exrotate"></a><em>
A Caesar cypher is a weak form of encryption that involves &#X201C;rotating&#X201D; each
letter by a fixed number of places. To rotate a letter means
to shift it through the alphabet, wrapping around to the beginning if
necessary, so &#X2019;A&#X2019; rotated by 3 is &#X2019;D&#X2019; and &#X2019;Z&#X2019; rotated by 1 is &#X2019;A&#X2019;.</em></p><p><em>To rotate a word, rotate each letter by the same amount.
For example, &#X201C;cheer&#X201D; rotated by 7 is &#X201C;jolly&#X201D; and &#X201C;melon&#X201D; rotated
by -10 is &#X201C;cubed&#X201D;. In the movie </em>2001: A Space Odyssey<em>, the 
ship computer is called HAL, which is IBM rotated by -1.</em></p><p><em>Write a function called <code>rotate_word</code>
that takes a string and an integer as parameters, and returns
a new string that contains the letters from the original string
rotated by the given amount. </em></p><p><em>You might want to use the built-in function <span class="c004">ord</span>, which converts
a character to a numeric code, and <span class="c004">chr</span>, which converts numeric
codes to characters. Letters of the alphabet are encoded in alphabetical
order, so for example:</em></p><pre class="verbatim"><em>&gt;&gt;&gt; ord('c') - ord('a')
2
</em></pre><p><em>Because <code>'c'</code> is the two-eth letter of the alphabet. But
beware: the numeric codes for upper case letters are different.</em></p><p><em>Potentially offensive jokes on the Internet are sometimes encoded in
ROT13, which is a Caesar cypher with rotation 13. If you are not
easily offended, find and decode some of them. Solution:
</em><a href="https://thinkpython.com/code/rotate.py"><em><span class="c004">https://thinkpython.com/code/rotate.py</span></em></a><em>.</em></p></div>
<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

</td>

<td width=130 valign="top">

<h4>Contribute</h4>
If you would like to make a contribution to support my books,
you can use the button below and pay with PayPal.  Thank you!

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="RAAYAZ7Y48S2A">
<table>
<tr><td><input type="hidden" name="on0" value="Pay what you want!">Pay what you want:</td></tr><tr><td><select name="os0">
	<option value="Small">Small $1.00 USD</option>
	<option value="Medium">Medium $5.00 USD</option>
	<option value="Large">Large $10.00 USD</option>
	<option value="X-Large">X-Large $20.00 USD</option>
	<option value="XX-Large">XX-Large $50.00 USD</option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

  
<p>
<h4>Are you using one of our books in a class?</h4>  We'd like to know
about it.  Please consider filling out <a href="http://spreadsheets.google.com/viewform?formkey=dC0tNUZkMjBEdXVoRGljNm9FRmlTMHc6MA" onClick="javascript: pageTracker._trackPageview('/outbound/survey');">this short survey</a>.

<p>
<br>

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=2JJH4SWCAVVYSQHO">Think DSP</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=CTV7PDT7E5EGGJUM"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491938455&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=ZY6MAYM33ZTNSCNZ">Think Java</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=PT77ANWARUNNU3UK"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491929561&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20">Think Bayes</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449370780&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=FJKSQ3IHEMY2F2VA">Think Python 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">


<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=ZZ454DLQ3IXDHNHX"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491939362&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=O7WYM6H6YBYUFNWU">Think Stats 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=JVSYKQHYSUIEYRHL"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1491907339&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_tl?ie=UTF8&tag=greenteapre01-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1449314635">Think Complexity</a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449314635&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449314635&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">


</td>
</tr>
</table>
<hr>
<a href="thinkpython2008.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2010.html"><img src="next.png" ALT="Next"></a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.32">
<link rel="stylesheet" type="text/css" href="thinkpython2.css">
<title>Case study: word play</title>
</head>
<body>
<a href="thinkpython2009.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2011.html"><img src="next.png" ALT="Next"></a>
<hr>
<table>

<tr>

<td valign="top" width="100" bgcolor="#b6459a">
</td>

<td valign="top" width="600" style="padding: 20px 20px;">

<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

<h1 class="chapter" id="sec105">Chapter&#XA0;9&#XA0;&#XA0;Case study: word play</h1>
<p>
<a id="wordplay"></a></p><p>This chapter presents the second case study, which involves
solving word puzzles by searching for words that have certain
properties. For example, we&#X2019;ll find the longest palindromes
in English and search for words whose letters appear in
alphabetical order. And I will present another program development
plan: reduction to a previously solved problem.</p>
<h2 class="section" id="sec106">9.1&#XA0;&#XA0;Reading word lists</h2>
<p>
<a id="wordlist"></a></p><p>For the exercises in this chapter we need a list of English words.
There are lots of word lists available on the Web, but the one most
suitable for our purpose is one of the word lists collected and
contributed to the public domain by Grady Ward as part of the Moby
lexicon project (see <a href="http://wikipedia.org/wiki/Moby_Project"><span class="c004">http://wikipedia.org/wiki/Moby_Project</span></a>). It
is a list of 113,809 official crosswords; that is, words that are
considered valid in crossword puzzles and other word games. In the
Moby collection, the filename is <span class="c004">113809of.fic</span>; you can download
a copy, with the simpler name <span class="c004">words.txt</span>, from
<a href="https://thinkpython.com/code/words.txt"><span class="c004">https://thinkpython.com/code/words.txt</span></a>.
<a id="hevea_default646"></a>
<a id="hevea_default647"></a></p><p>This file is in plain text, so you can open it with a text
editor, but you can also read it from Python. The built-in
function <span class="c004">open</span> takes the name of the file as a parameter
and returns a <span class="c010">file object</span> you can use to read the file.
<a id="hevea_default648"></a>
<a id="hevea_default649"></a>
<a id="hevea_default650"></a>
<a id="hevea_default651"></a>
<a id="hevea_default652"></a>
<a id="hevea_default653"></a></p><pre class="verbatim">&gt;&gt;&gt; fin = open('words.txt')
</pre><p>
<span class="c004">fin</span> is a common name for a file object used for input. The file
object provides several methods for reading, including <span class="c004">readline</span>,
which reads characters from the file until it gets to a newline and
returns the result as a string: <a id="hevea_default654"></a>
<a id="hevea_default655"></a></p><pre class="verbatim">&gt;&gt;&gt; fin.readline()
'aa\n'
</pre><p>
The first word in this particular list is &#X201C;aa&#X201D;, which is a kind of
lava. The sequence <code>\n</code> represents the newline character that 
separates this word from the next.</p><p>The file object keeps track of where it is in the file, so
if you call <span class="c004">readline</span> again, you get the next word:</p><pre class="verbatim">&gt;&gt;&gt; fin.readline()
'aah\n'
</pre><p>
The next word is &#X201C;aah&#X201D;, which is a perfectly legitimate
word, so stop looking at me like that.
Or, if it&#X2019;s the newline character that&#X2019;s bothering you,
we can get rid of it with the string method <span class="c004">strip</span>:
<a id="hevea_default656"></a>
<a id="hevea_default657"></a></p><pre class="verbatim">&gt;&gt;&gt; line = fin.readline()
&gt;&gt;&gt; word = line.strip()
&gt;&gt;&gt; word
'aahed'
</pre><p>
You can also use a file object as part of a <span class="c004">for</span> loop.
This program reads <span class="c004">words.txt</span> and prints each word, one
per line:
<a id="hevea_default658"></a>
<a id="hevea_default659"></a></p><pre class="verbatim">fin = open('words.txt')
for line in fin:
    word = line.strip()
    print(word)
</pre>
<h2 class="section" id="sec107">9.2&#XA0;&#XA0;Exercises</h2>
<p>There are solutions to these exercises in the next section.
You should at least attempt each one before you read the solutions.</p><div class="theorem"><span class="c010">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
Write a program that reads <span class="c004">words.txt</span> and prints only the
words with more than 20 characters (not counting whitespace).
</em><a id="hevea_default660"></a></div><div class="theorem"><span class="c010">Exercise&#XA0;2</span>&#XA0;&#XA0;<p><em>In 1939 Ernest Vincent Wright published a 50,000 word novel called
</em>Gadsby<em> that does not contain the letter &#X201C;e&#X201D;. Since &#X201C;e&#X201D; is
the most common letter in English, that&#X2019;s not easy to do.</em></p><p><em>In fact, it is difficult to construct a solitary thought without using
that most common symbol. It is slow going at first, but with caution
and hours of training you can gradually gain facility.</em></p><p><em>All right, I&#X2019;ll stop now.</em></p><p><em>Write a function called <code>has_no_e</code> that returns <span class="c004">True</span> if
the given word doesn&#X2019;t have the letter &#X201C;e&#X201D; in it.</em></p><p><em>Write a program that reads <span class="c004">words.txt</span> and prints only the words
that have no &#X201C;e&#X201D;. Compute the percentage of words in the list
that have no &#X201C;e&#X201D;.
</em><a id="hevea_default661"></a></p></div><div class="theorem"><span class="c010">Exercise&#XA0;3</span>&#XA0;&#XA0; <p><em>Write a function named <span class="c004">avoids</span>
that takes a word and a string of forbidden letters, and
that returns <span class="c004">True</span> if the word doesn&#X2019;t use any of the forbidden
letters.</em></p><p><em>Write a program that prompts the user to enter a string
of forbidden letters and then prints the number of words that
don&#X2019;t contain any of them.
Can you find a combination of 5 forbidden letters that
excludes the smallest number of words?</em></p></div><div class="theorem"><span class="c010">Exercise&#XA0;4</span>&#XA0;&#XA0;<p><em>Write a function named <code>uses_only</code> that takes a word and a
string of letters, and that returns <span class="c004">True</span> if the word contains
only letters in the list. Can you make a sentence using only the
letters <span class="c004">acefhlo</span>? Other than &#X201C;Hoe alfalfa&#X201D;?</em></p></div><div class="theorem"><span class="c010">Exercise&#XA0;5</span>&#XA0;&#XA0; <p><em>Write a function named <code>uses_all</code> that takes a word and a
string of required letters, and that returns <span class="c004">True</span> if the word
uses all the required letters at least once. How many words are there
that use all the vowels <span class="c004">aeiou</span>? How about <span class="c004">aeiouy</span>?</em></p></div><div class="theorem"><span class="c010">Exercise&#XA0;6</span>&#XA0;&#XA0;<p><em>Write a function called <code>is_abecedarian</code> that returns
<span class="c004">True</span> if the letters in a word appear in alphabetical order
(double letters are ok). 
How many abecedarian words are there?</em></p><p><a id="hevea_default662"></a></p></div>
<h2 class="section" id="sec108">9.3&#XA0;&#XA0;Search</h2>
<p>
<a id="search"></a>
<a id="hevea_default663"></a>
<a id="hevea_default664"></a></p><p>All of the exercises in the previous section have something
in common; they can be solved with the search pattern we saw
in Section&#XA0;<a href="thinkpython2009.html#find">8.6</a>. The simplest example is:</p><pre class="verbatim">def has_no_e(word):
    for letter in word:
        if letter == 'e':
            return False
    return True
</pre><p>
The <span class="c004">for</span> loop traverses the characters in <span class="c004">word</span>. If we find
the letter &#X201C;e&#X201D;, we can immediately return <span class="c004">False</span>; otherwise we
have to go to the next letter. If we exit the loop normally, that
means we didn&#X2019;t find an &#X201C;e&#X201D;, so we return <span class="c004">True</span>.
<a id="hevea_default665"></a></p><p><a id="hevea_default666"></a>
<a id="hevea_default667"></a>
You could write this function more concisely using the <span class="c004">in</span>
operator, but I started with this version because it 
demonstrates the logic of the search pattern.</p><p><a id="hevea_default668"></a>
<span class="c004">avoids</span> is a more general version of <code>has_no_e</code> but it
has the same structure:</p><pre class="verbatim">def avoids(word, forbidden):
    for letter in word:
        if letter in forbidden:
            return False
    return True
</pre><p>
We can return <span class="c004">False</span> as soon as we find a forbidden letter;
if we get to the end of the loop, we return <span class="c004">True</span>.</p><p><code>uses_only</code> is similar except that the sense of the condition
is reversed:</p><pre class="verbatim">def uses_only(word, available):
    for letter in word: 
        if letter not in available:
            return False
    return True
</pre><p>
Instead of a list of forbidden letters, we have a list of available
letters. If we find a letter in <span class="c004">word</span> that is not in
<span class="c004">available</span>, we can return <span class="c004">False</span>.</p><p><code>uses_all</code> is similar except that we reverse the role
of the word and the string of letters:</p><pre class="verbatim">def uses_all(word, required):
    for letter in required: 
        if letter not in word:
            return False
    return True
</pre><p>
Instead of traversing the letters in <span class="c004">word</span>, the loop
traverses the required letters. If any of the required letters
do not appear in the word, we can return <span class="c004">False</span>.
<a id="hevea_default669"></a></p><p>If you were really thinking like a computer scientist, you would
have recognized that <code>uses_all</code> was an instance of a
previously solved problem, and you would have written:</p><pre class="verbatim">def uses_all(word, required):
    return uses_only(required, word)
</pre><p>
This is an example of a program development plan called <span class="c010">reduction to a previously solved problem</span>, which means that you
recognize the problem you are working on as an instance of a solved
problem and apply an existing solution. <a id="hevea_default670"></a> <a id="hevea_default671"></a></p>
<h2 class="section" id="sec109">9.4&#XA0;&#XA0;Looping with indices</h2>
<p>
<a id="hevea_default672"></a>
<a id="hevea_default673"></a></p><p>I wrote the functions in the previous section with <span class="c004">for</span>
loops because I only needed the characters in the strings; I didn&#X2019;t
have to do anything with the indices.</p><p>For <code>is_abecedarian</code> we have to compare adjacent letters,
which is a little tricky with a <span class="c004">for</span> loop:</p><pre class="verbatim">def is_abecedarian(word):
    previous = word[0]
    for c in word:
        if c &lt; previous:
            return False
        previous = c
    return True
</pre><p>An alternative is to use recursion:</p><pre class="verbatim">def is_abecedarian(word):
    if len(word) &lt;= 1:
        return True
    if word[0] &gt; word[1]:
        return False
    return is_abecedarian(word[1:])
</pre><p>Another option is to use a <span class="c004">while</span> loop:</p><pre class="verbatim">def is_abecedarian(word):
    i = 0
    while i &lt; len(word)-1:
        if word[i+1] &lt; word[i]:
            return False
        i = i+1
    return True
</pre><p>
The loop starts at <span class="c004">i=0</span> and ends when <span class="c004">i=len(word)-1</span>. Each
time through the loop, it compares the <span class="c009">i</span>th character (which you can
think of as the current character) to the <span class="c009">i</span>+1th character (which you
can think of as the next).</p><p>If the next character is less than (alphabetically before) the current
one, then we have discovered a break in the abecedarian trend, and
we return <span class="c004">False</span>.</p><p>If we get to the end of the loop without finding a fault, then the
word passes the test. To convince yourself that the loop ends
correctly, consider an example like <code>'flossy'</code>. The
length of the word is 6, so
the last time the loop runs is when <span class="c004">i</span> is 4, which is the
index of the second-to-last character. On the last iteration,
it compares the second-to-last character to the last, which is
what we want.
<a id="hevea_default674"></a></p><p>Here is a version of <code>is_palindrome</code> (see
Exercise&#XA0;<a href="thinkpython2007.html#palindrome">3</a>) that uses two indices; one starts at the
beginning and goes up; the other starts at the end and goes down.</p><pre class="verbatim">def is_palindrome(word):
    i = 0
    j = len(word)-1

    while i&lt;j:
        if word[i] != word[j]:
            return False
        i = i+1
        j = j-1

    return True
</pre><p>Or we could reduce to a previously solved
problem and write:
<a id="hevea_default675"></a>
<a id="hevea_default676"></a></p><pre class="verbatim">def is_palindrome(word):
    return is_reverse(word, word)
</pre><p>
Using <code>is_reverse</code> from Section&#XA0;<a href="thinkpython2009.html#isreverse">8.11</a>.</p>
<h2 class="section" id="sec110">9.5&#XA0;&#XA0;Debugging</h2>
<p>
<a id="hevea_default677"></a>
<a id="hevea_default678"></a>
<a id="hevea_default679"></a></p><p>Testing programs is hard. The functions in this chapter are
relatively easy to test because you can check the results by hand.
Even so, it is somewhere between difficult and impossible to choose a
set of words that test for all possible errors.</p><p>Taking <code>has_no_e</code> as an example, there are two obvious
cases to check: words that have an &#X2018;e&#X2019; should return <span class="c004">False</span>, and
words that don&#X2019;t should return <span class="c004">True</span>. You should have no
trouble coming up with one of each.</p><p>Within each case, there are some less obvious subcases. Among the
words that have an &#X201C;e&#X201D;, you should test words with an &#X201C;e&#X201D; at the
beginning, the end, and somewhere in the middle. You should test long
words, short words, and very short words, like the empty string. The
empty string is an example of a <span class="c010">special case</span>, which is one of
the non-obvious cases where errors often lurk.
<a id="hevea_default680"></a></p><p>In addition to the test cases you generate, you can also test
your program with a word list like <span class="c004">words.txt</span>. By scanning
the output, you might be able to catch errors, but be careful:
you might catch one kind of error (words that should not be
included, but are) and not another (words that should be included,
but aren&#X2019;t).</p><p>In general, testing can help you find bugs, but it is not easy to
generate a good set of test cases, and even if you do, you can&#X2019;t
be sure your program is correct.
According to a legendary computer scientist:
<a id="hevea_default681"></a></p><blockquote class="quote">
Program testing can be used to show the presence of bugs, but never to
show their absence!<p>&#X2014; Edsger W. Dijkstra
</p></blockquote><p>
<a id="hevea_default682"></a></p>
<h2 class="section" id="sec111">9.6&#XA0;&#XA0;Glossary</h2>
<dl class="description"><dt class="dt-description"><span class="c010">file object:</span></dt><dd class="dd-description"> A value that represents an open file.
<a id="hevea_default683"></a>
<a id="hevea_default684"></a></dd><dt class="dt-description"><span class="c010">reduction to a previously solved problem:</span></dt><dd class="dd-description"> A way of solving a
problem by expressing it as an instance of a previously solved
problem. <a id="hevea_default685"></a>
<a id="hevea_default686"></a></dd><dt class="dt-description"><span class="c010">special case:</span></dt><dd class="dd-description"> A test case that is atypical or non-obvious
(and less likely to be handled correctly).
<a id="hevea_default687"></a></dd></dl>
<h2 class="section" id="sec112">9.7&#XA0;&#XA0;Exercises</h2>
<div class="theorem"><span class="c010">Exercise&#XA0;7</span>&#XA0;&#XA0;
<a id="hevea_default688"></a>
<a id="hevea_default689"></a>
<a id="hevea_default690"></a><p><em>This question is based on a Puzzler that was broadcast on the radio
program </em>Car Talk<em> 
(</em><a href="http://www.cartalk.com/content/puzzlers"><em><span class="c004">http://www.cartalk.com/content/puzzlers</span></em></a><em>):</em></p><blockquote class="quote"><em>
Give me a word with three consecutive double letters. I&#X2019;ll give you a
couple of words that almost qualify, but don&#X2019;t. For example, the word
committee, c-o-m-m-i-t-t-e-e. It would be great except for the &#X2018;i&#X2019; that
sneaks in there. Or Mississippi: M-i-s-s-i-s-s-i-p-p-i. If you could
take out those i&#X2019;s it would work. But there is a word that has three
consecutive pairs of letters and to the best of my knowledge this may
be the only word. Of course there are probably 500 more but I can only
think of one. What is the word?
</em></blockquote><p><em>Write a program to find it.
Solution: </em><a href="https://thinkpython.com/code/cartalk1.py"><em><span class="c004">https://thinkpython.com/code/cartalk1.py</span></em></a><em>.</em></p></div><div class="theorem"><span class="c010">Exercise&#XA0;8</span>&#XA0;&#XA0;<em>
Here&#X2019;s another </em>Car Talk<em>
Puzzler (</em><a href="http://www.cartalk.com/content/puzzlers"><span class="c004"><em>http://www.cartalk.com/content/puzzlers</em></span></a><em>):
</em><a id="hevea_default691"></a>
<a id="hevea_default692"></a>
<a id="hevea_default693"></a>
<a id="hevea_default694"></a><blockquote class="quote"><em>
&#X201C;I was driving on the highway the other day and I happened to
notice my odometer. Like most odometers, it shows six digits,
in whole miles only. So, if my car had 300,000
miles, for example, I&#X2019;d see 3-0-0-0-0-0.</em><p><em>&#X201C;Now, what I saw that day was very interesting. I noticed that the
last 4 digits were palindromic; that is, they read the same forward as
backward. For example, 5-4-4-5 is a palindrome, so my odometer
could have read 3-1-5-4-4-5.</em></p><p><em>&#X201C;One mile later, the last 5 numbers were palindromic. For example, it
could have read 3-6-5-4-5-6. One mile after that, the middle 4 out of
6 numbers were palindromic. And you ready for this? One mile later,
all 6 were palindromic!</em></p><p><em>&#X201C;The question is, what was on the odometer when I first looked?&#X201D;
</em></p></blockquote><p><em>Write a Python program that tests all the six-digit numbers and prints
any numbers that satisfy these requirements. 
Solution: </em><a href="https://thinkpython.com/code/cartalk2.py"><em><span class="c004">https://thinkpython.com/code/cartalk2.py</span></em></a><em>.</em></p></div><div class="theorem"><span class="c010">Exercise&#XA0;9</span>&#XA0;&#XA0;<em>
Here&#X2019;s another </em>Car Talk<em> Puzzler you can solve with a
search (</em><a href="http://www.cartalk.com/content/puzzlers"><span class="c004"><em>http://www.cartalk.com/content/puzzlers</em></span></a><em>):
</em><a id="hevea_default695"></a>
<a id="hevea_default696"></a>
<a id="hevea_default697"></a><blockquote class="quote"><em>
&#X201C;Recently I had a visit with my mom and we realized that
the two digits that make up my age when reversed resulted in her
age. For example, if she&#X2019;s 73, I&#X2019;m 37. We wondered how often this has
happened over the years but we got sidetracked with other topics and
we never came up with an answer.</em><p><em>&#X201C;When I got home I figured out that the digits of our ages have been
reversible six times so far. I also figured out that if we&#X2019;re lucky it
would happen again in a few years, and if we&#X2019;re really lucky it would
happen one more time after that. In other words, it would have
happened 8 times over all. So the question is, how old am I now?&#X201D;</em></p></blockquote><p><em>Write a Python program that searches for solutions to this Puzzler.
Hint: you might find the string method <span class="c004">zfill</span> useful.</em></p><p><em>Solution: </em><a href="https://thinkpython.com/code/cartalk3.py"><em><span class="c004">https://thinkpython.com/code/cartalk3.py</span></em></a><em>.</em></p></div>
<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

</td>

<td width=130 valign="top">

<h4>Contribute</h4>
If you would like to make a contribution to support my books,
you can use the button below and pay with PayPal.  Thank you!

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="RAAYAZ7Y48S2A">
<table>
<tr><td><input type="hidden" name="on0" value="Pay what you want!">Pay what you want:</td></tr><tr><td><select name="os0">
	<option value="Small">Small $1.00 USD</option>
	<option value="Medium">Medium $5.00 USD</option>
	<option value="Large">Large $10.00 USD</option>
	<option value="X-Large">X-Large $20.00 USD</option>
	<option value="XX-Large">XX-Large $50.00 USD</option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

  
<p>
<h4>Are you using one of our books in a class?</h4>  We'd like to know
about it.  Please consider filling out <a href="http://spreadsheets.google.com/viewform?formkey=dC0tNUZkMjBEdXVoRGljNm9FRmlTMHc6MA" onClick="javascript: pageTracker._trackPageview('/outbound/survey');">this short survey</a>.

<p>
<br>

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=2JJH4SWCAVVYSQHO">Think DSP</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=CTV7PDT7E5EGGJUM"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491938455&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=ZY6MAYM33ZTNSCNZ">Think Java</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=PT77ANWARUNNU3UK"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491929561&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20">Think Bayes</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449370780&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=FJKSQ3IHEMY2F2VA">Think Python 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">


<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=ZZ454DLQ3IXDHNHX"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491939362&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=O7WYM6H6YBYUFNWU">Think Stats 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=JVSYKQHYSUIEYRHL"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1491907339&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_tl?ie=UTF8&tag=greenteapre01-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1449314635">Think Complexity</a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449314635&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449314635&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">


</td>
</tr>
</table>
<hr>
<a href="thinkpython2009.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2011.html"><img src="next.png" ALT="Next"></a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.32">
<link rel="stylesheet" type="text/css" href="thinkpython2.css">
<title>Lists</title>
</head>
<body>
<a href="thinkpython2010.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2012.html"><img src="next.png" ALT="Next"></a>
<hr>
<table>

<tr>

<td valign="top" width="100" bgcolor="#b6459a">
</td>

<td valign="top" width="600" style="padding: 20px 20px;">

<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

<h1 class="chapter" id="sec113">Chapter&#XA0;10&#XA0;&#XA0;Lists</h1>
<p>This chapter presents one of Python&#X2019;s most useful built-in types, lists.
You will also learn more about objects and what can happen when you have
more than one name for the same object.</p>
<h2 class="section" id="sec114">10.1&#XA0;&#XA0;A list is a sequence</h2>
<p>
<a id="sequence"></a></p><p>Like a string, a <span class="c010">list</span> is a sequence of values. In a string, the
values are characters; in a list, they can be any type. The values in
a list are called <span class="c010">elements</span> or sometimes <span class="c010">items</span>.
<a id="hevea_default698"></a>
<a id="hevea_default699"></a>
<a id="hevea_default700"></a>
<a id="hevea_default701"></a>
<a id="hevea_default702"></a></p><p>There are several ways to create a new list; the simplest is to
enclose the elements in square brackets (<code>[</code> and <code>]</code>):</p><pre class="verbatim">[10, 20, 30, 40]
['crunchy frog', 'ram bladder', 'lark vomit']
</pre><p>
The first example is a list of four integers. The second is a list of
three strings. The elements of a list don&#X2019;t have to be the same type.
The following list contains a string, a float, an integer, and
(lo!) another list:</p><pre class="verbatim">['spam', 2.0, 5, [10, 20]]
</pre><p>
A list within another list is <span class="c010">nested</span>.
<a id="hevea_default703"></a>
<a id="hevea_default704"></a></p><p>A list that contains no elements is
called an empty list; you can create one with empty
brackets, <code>[]</code>.
<a id="hevea_default705"></a>
<a id="hevea_default706"></a></p><p>As you might expect, you can assign list values to variables:</p><pre class="verbatim">&gt;&gt;&gt; cheeses = ['Cheddar', 'Edam', 'Gouda']
&gt;&gt;&gt; numbers = [42, 123]
&gt;&gt;&gt; empty = []
&gt;&gt;&gt; print(cheeses, numbers, empty)
['Cheddar', 'Edam', 'Gouda'] [42, 123] []
</pre><p>
<a id="hevea_default707"></a></p>
<h2 class="section" id="sec115">10.2&#XA0;&#XA0;Lists are mutable</h2>
<p>
<a id="mutable"></a>
<a id="hevea_default708"></a>
<a id="hevea_default709"></a>
<a id="hevea_default710"></a>
<a id="hevea_default711"></a>
<a id="hevea_default712"></a></p><p>The syntax for accessing the elements of a list is the same as for
accessing the characters of a string&#X2014;the bracket operator. The
expression inside the brackets specifies the index. Remember that the
indices start at 0:</p><pre class="verbatim">&gt;&gt;&gt; cheeses[0]
'Cheddar'
</pre><p>
Unlike strings, lists are mutable. When the bracket operator appears
on the left side of an assignment, it identifies the element of the
list that will be assigned.
<a id="hevea_default713"></a></p><pre class="verbatim">&gt;&gt;&gt; numbers = [42, 123]
&gt;&gt;&gt; numbers[1] = 5
&gt;&gt;&gt; numbers
[42, 5]
</pre><p>
The one-eth element of <span class="c004">numbers</span>, which
used to be 123, is now 5.
<a id="hevea_default714"></a>
<a id="hevea_default715"></a></p><p>Figure&#XA0;<a href="#fig.liststate">10.1</a> shows 
the state diagram for <span class="c004">cheeses</span>, <span class="c004">numbers</span> and <span class="c004">empty</span>.
<a id="hevea_default716"></a>
<a id="hevea_default717"></a></p><blockquote class="figure"><div class="center"><hr class="c019"></div>
<div class="center"><img src="thinkpython2011.png"></div>
<div class="caption"><table class="c001 cellpading0"><tr><td class="c018">Figure 10.1: State diagram.</td></tr>
</table></div>
<a id="fig.liststate"></a>
<div class="center"><hr class="c019"></div></blockquote><p>Lists are represented by boxes with the word &#X201C;list&#X201D; outside
and the elements of the list inside. <span class="c004">cheeses</span> refers to
a list with three elements indexed 0, 1 and 2.
<span class="c004">numbers</span> contains two elements; the diagram shows that the
value of the second element has been reassigned from 123 to 5.
<span class="c004">empty</span> refers to a list with no elements.
<a id="hevea_default718"></a>
<a id="hevea_default719"></a>
<a id="hevea_default720"></a></p><p>List indices work the same way as string indices:</p><ul class="itemize"><li class="li-itemize">Any integer expression can be used as an index.</li><li class="li-itemize">If you try to read or write an element that does not exist, you
get an <span class="c004">IndexError</span>.
<a id="hevea_default721"></a>
<a id="hevea_default722"></a></li><li class="li-itemize">If an index has a negative value, it counts backward from the
end of the list.</li></ul><p>
<a id="hevea_default723"></a></p><p><a id="hevea_default724"></a>
<a id="hevea_default725"></a>
<a id="hevea_default726"></a>
<a id="hevea_default727"></a></p><p>The <span class="c004">in</span> operator also works on lists.</p><pre class="verbatim">&gt;&gt;&gt; cheeses = ['Cheddar', 'Edam', 'Gouda']
&gt;&gt;&gt; 'Edam' in cheeses
True
&gt;&gt;&gt; 'Brie' in cheeses
False
</pre>
<h2 class="section" id="sec116">10.3&#XA0;&#XA0;Traversing a list</h2>
<p>
<a id="hevea_default728"></a>
<a id="hevea_default729"></a>
<a id="hevea_default730"></a>
<a id="hevea_default731"></a>
<a id="hevea_default732"></a></p><p>The most common way to traverse the elements of a list is
with a <span class="c004">for</span> loop. The syntax is the same as for strings:</p><pre class="verbatim">for cheese in cheeses:
    print(cheese)
</pre><p>
This works well if you only need to read the elements of the
list. But if you want to write or update the elements, you
need the indices. A common way to do that is to combine
the built-in functions <span class="c004">range</span> and <span class="c004">len</span>:
<a id="hevea_default733"></a>
<a id="hevea_default734"></a></p><pre class="verbatim">for i in range(len(numbers)):
    numbers[i] = numbers[i] * 2
</pre><p>
This loop traverses the list and updates each element. <span class="c004">len</span>
returns the number of elements in the list. <span class="c004">range</span> returns
a list of indices from 0 to <span class="c009">n</span>&#X2212;1, where <span class="c009">n</span> is the length of
the list. Each time through the loop <span class="c004">i</span> gets the index
of the next element. The assignment statement in the body uses
<span class="c004">i</span> to read the old value of the element and to assign the
new value.
<a id="hevea_default735"></a>
<a id="hevea_default736"></a></p><p>A <span class="c004">for</span> loop over an empty list never runs the body:</p><pre class="verbatim">for x in []:
    print('This never happens.')
</pre><p>
Although a list can contain another list, the nested
list still counts as a single element. The length of this li