<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ThinkPython5</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../Scrapy/Scrapy.html"><strong aria-hidden="true">1.</strong> Scrapy(-v master)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Scrapy/Scrapy1.html"><strong aria-hidden="true">1.1.</strong> Scrapy1</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy2.html"><strong aria-hidden="true">1.2.</strong> Scrapy2</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy3.html"><strong aria-hidden="true">1.3.</strong> Scrapy3</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy4.html"><strong aria-hidden="true">1.4.</strong> Scrapy4</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy5.html"><strong aria-hidden="true">1.5.</strong> Scrapy5</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy6.html"><strong aria-hidden="true">1.6.</strong> Scrapy6</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy7.html"><strong aria-hidden="true">1.7.</strong> Scrapy7</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy8.html"><strong aria-hidden="true">1.8.</strong> Scrapy8</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy9.html"><strong aria-hidden="true">1.9.</strong> Scrapy9</a></li><li class="chapter-item expanded "><a href="../Scrapy/Scrapy10.html"><strong aria-hidden="true">1.10.</strong> Scrapy10</a></li></ol></li><li class="chapter-item expanded "><a href="../ThinkPython/merged_file.html"><strong aria-hidden="true">2.</strong> ThinkPython</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ThinkPython/part_1.html"><strong aria-hidden="true">2.1.</strong> ThinkPython1</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_2.html"><strong aria-hidden="true">2.2.</strong> ThinkPython2</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_3.html"><strong aria-hidden="true">2.3.</strong> ThinkPython3</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_4.html"><strong aria-hidden="true">2.4.</strong> ThinkPython4</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_5.html" class="active"><strong aria-hidden="true">2.5.</strong> ThinkPython5</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_6.html"><strong aria-hidden="true">2.6.</strong> ThinkPython6</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_7.html"><strong aria-hidden="true">2.7.</strong> ThinkPython7</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_8.html"><strong aria-hidden="true">2.8.</strong> ThinkPython8</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_9.html"><strong aria-hidden="true">2.9.</strong> ThinkPython9</a></li><li class="chapter-item expanded "><a href="../ThinkPython/part_10.html"><strong aria-hidden="true">2.10.</strong> ThinkPython10</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div class="table-wrapper"><table><thead><tr></tr></thead><tbody>
<tr><td>forward lookup; if</td><td></td></tr>
<tr><td></td><td>you have to do it</td><td></td></tr>
<tr><td></td><td>often, or if the</td><td></td></tr>
<tr><td></td><td>dictionary gets big,</td><td></td></tr>
<tr><td></td><td>the performance of</td><td></td></tr>
<tr><td></td><td>your program will</td><td></td></tr>
<tr><td></td><td>suffer.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>## 11.5 </td><td></td></tr>
<tr><td></td><td> Dictionaries and lis</td><td></td></tr>
<tr><td></td><td>ts {#sec134 .section}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#invert}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Lists can appear as</td><td></td></tr>
<tr><td></td><td>values in a</td><td></td></tr>
<tr><td></td><td>dictionary. For</td><td></td></tr>
<tr><td></td><td>example, if you are</td><td></td></tr>
<tr><td></td><td>given a dictionary</td><td></td></tr>
<tr><td></td><td>that maps from</td><td></td></tr>
<tr><td></td><td>letters to</td><td></td></tr>
<tr><td></td><td>frequencies, you</td><td></td></tr>
<tr><td></td><td>might want to invert</td><td></td></tr>
<tr><td></td><td>it; that is, create a</td><td></td></tr>
<tr><td></td><td>dictionary that maps</td><td></td></tr>
<tr><td></td><td>from frequencies to</td><td></td></tr>
<tr><td></td><td>letters. Since there</td><td></td></tr>
<tr><td></td><td>might be several</td><td></td></tr>
<tr><td></td><td>letters with the same</td><td></td></tr>
<tr><td></td><td>frequency, each value</td><td></td></tr>
<tr><td></td><td>in the inverted</td><td></td></tr>
<tr><td></td><td>dictionary should be</td><td></td></tr>
<tr><td></td><td>a list of letters.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default933}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default934}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Here is a function</td><td></td></tr>
<tr><td></td><td>that inverts a</td><td></td></tr>
<tr><td></td><td>dictionary:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>def invert_dict(d):</td><td></td></tr>
<tr><td></td><td>inverse = dict()</td><td></td></tr>
<tr><td></td><td>for key in d:</td><td></td></tr>
<tr><td></td><td>val = d[key]</td><td></td></tr>
<tr><td></td><td>i</td><td></td></tr>
<tr><td></td><td>f val not in inverse:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>inverse[val] = [key]</td><td></td></tr>
<tr><td></td><td>else:</td><td></td></tr>
<tr><td></td><td>inv</td><td></td></tr>
<tr><td></td><td>erse[val].append(key)</td><td></td></tr>
<tr><td></td><td>return inverse</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Each time through the</td><td></td></tr>
<tr><td></td><td>loop, [key]{.c004}</td><td></td></tr>
<tr><td></td><td>gets a key from</td><td></td></tr>
<tr><td></td><td>[d]{.c004} and</td><td></td></tr>
<tr><td></td><td>[val]{.c004} gets the</td><td></td></tr>
<tr><td></td><td>corresponding value.</td><td></td></tr>
<tr><td></td><td>If [val]{.c004} is</td><td></td></tr>
<tr><td></td><td>not in</td><td></td></tr>
<tr><td></td><td>[inverse]{.c004},</td><td></td></tr>
<tr><td></td><td>that means we haven't</td><td></td></tr>
<tr><td></td><td>seen it before, so we</td><td></td></tr>
<tr><td></td><td>create a new item and</td><td></td></tr>
<tr><td></td><td>initialize it with a</td><td></td></tr>
<tr><td></td><td>[singleton]{.c010} (a</td><td></td></tr>
<tr><td></td><td>list that contains a</td><td></td></tr>
<tr><td></td><td>single element).</td><td></td></tr>
<tr><td></td><td>Otherwise we have</td><td></td></tr>
<tr><td></td><td>seen this value</td><td></td></tr>
<tr><td></td><td>before, so we append</td><td></td></tr>
<tr><td></td><td>the corresponding key</td><td></td></tr>
<tr><td></td><td>to the list.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default935}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Here is an example:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>&gt;&gt;&gt; hist</td><td></td></tr>
<tr><td></td><td>= histogram('parrot')</td><td></td></tr>
<tr><td></td><td>&gt;&gt;&gt; hist</td><td></td></tr>
<tr><td></td><td>{'a': 1, 'p': 1, 'r</td><td></td></tr>
<tr><td></td><td>': 2, 't': 1, 'o': 1}</td><td></td></tr>
<tr><td></td><td>&gt;&gt;&gt; invers</td><td></td></tr>
<tr><td></td><td>e = invert_dict(hist)</td><td></td></tr>
<tr><td></td><td>&gt;&gt;&gt; inverse</td><td></td></tr>
<tr><td></td><td>{1: ['a', 'p',</td><td></td></tr>
<tr><td></td><td>'t', 'o'], 2: ['r']}</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>&gt; ::: center</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; -------------------</td><td></td></tr>
<tr><td></td><td>&gt; :::</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; ::: center</td><td></td></tr>
<tr><td></td><td>&gt; ![]</td><td></td></tr>
<tr><td></td><td>(thinkpython2016.png)</td><td></td></tr>
<tr><td></td><td>&gt; :::</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; ::: caption</td><td></td></tr>
<tr><td></td><td>&gt;   --------</td><td></td></tr>
<tr><td></td><td>---------------------</td><td></td></tr>
<tr><td></td><td>&gt;   Figure</td><td></td></tr>
<tr><td></td><td>11.1: State diagram.</td><td></td></tr>
<tr><td></td><td>&gt;   --------</td><td></td></tr>
<tr><td></td><td>---------------------</td><td></td></tr>
<tr><td></td><td>&gt; :::</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; []{#fig.dict1}</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; ::: center</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; -------------------</td><td></td></tr>
<tr><td></td><td>&gt; :::</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Figu</td><td></td></tr>
<tr><td></td><td>re <a href="#fig.dict1">11.1</a></td><td></td></tr>
<tr><td></td><td>is a state diagram</td><td></td></tr>
<tr><td></td><td>showing [hist]{.c004}</td><td></td></tr>
<tr><td></td><td>and [inverse]{.c004}.</td><td></td></tr>
<tr><td></td><td>A dictionary is</td><td></td></tr>
<tr><td></td><td>represented as a box</td><td></td></tr>
<tr><td></td><td>with the type</td><td></td></tr>
<tr><td></td><td>[dict]{.c004} above</td><td></td></tr>
<tr><td></td><td>it and the key-value</td><td></td></tr>
<tr><td></td><td>pairs inside. If the</td><td></td></tr>
<tr><td></td><td>values are integers,</td><td></td></tr>
<tr><td></td><td>floats or strings, I</td><td></td></tr>
<tr><td></td><td>draw them inside the</td><td></td></tr>
<tr><td></td><td>box, but I usually</td><td></td></tr>
<tr><td></td><td>draw lists outside</td><td></td></tr>
<tr><td></td><td>the box, just to keep</td><td></td></tr>
<tr><td></td><td>the diagram simple.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default936}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default937}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Lists can be values</td><td></td></tr>
<tr><td></td><td>in a dictionary, as</td><td></td></tr>
<tr><td></td><td>this example shows,</td><td></td></tr>
<tr><td></td><td>but they cannot be</td><td></td></tr>
<tr><td></td><td>keys. Here's what</td><td></td></tr>
<tr><td></td><td>happens if you try:</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default938}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default939}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>&gt;&gt;&gt; t = [1, 2, 3]</td><td></td></tr>
<tr><td></td><td>&gt;&gt;&gt; d = dict()</td><td></td></tr>
<tr><td></td><td>&gt;&gt;&gt; d[t] = 'oops'</td><td></td></tr>
<tr><td></td><td>Traceback (mo</td><td></td></tr>
<tr><td></td><td>st recent call last):</td><td></td></tr>
<tr><td></td><td>File &quot;&lt;</td><td></td></tr>
<tr><td></td><td>stdin&gt;&quot;, line 1, in ?</td><td></td></tr>
<tr><td></td><td>TypeError: list o</td><td></td></tr>
<tr><td></td><td>bjects are unhashable</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>I mentioned earlier</td><td></td></tr>
<tr><td></td><td>that a dictionary is</td><td></td></tr>
<tr><td></td><td>implemented using a</td><td></td></tr>
<tr><td></td><td>hashtable and that</td><td></td></tr>
<tr><td></td><td>means that the keys</td><td></td></tr>
<tr><td></td><td>have to be</td><td></td></tr>
<tr><td></td><td>[hashable]{.c010}.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default940}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default941}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>A [hash]{.c010} is a</td><td></td></tr>
<tr><td></td><td>function that takes a</td><td></td></tr>
<tr><td></td><td>value (of any kind)</td><td></td></tr>
<tr><td></td><td>and returns an</td><td></td></tr>
<tr><td></td><td>integer. Dictionaries</td><td></td></tr>
<tr><td></td><td>use these integers,</td><td></td></tr>
<tr><td></td><td>called hash values,</td><td></td></tr>
<tr><td></td><td>to store and look up</td><td></td></tr>
<tr><td></td><td>key-value pairs.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default942}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>This system works</td><td></td></tr>
<tr><td></td><td>fine if the keys are</td><td></td></tr>
<tr><td></td><td>immutable. But if the</td><td></td></tr>
<tr><td></td><td>keys are mutable,</td><td></td></tr>
<tr><td></td><td>like lists, bad</td><td></td></tr>
<tr><td></td><td>things happen. For</td><td></td></tr>
<tr><td></td><td>example, when you</td><td></td></tr>
<tr><td></td><td>create a key-value</td><td></td></tr>
<tr><td></td><td>pair, Python hashes</td><td></td></tr>
<tr><td></td><td>the key and stores it</td><td></td></tr>
<tr><td></td><td>in the corresponding</td><td></td></tr>
<tr><td></td><td>location. If you</td><td></td></tr>
<tr><td></td><td>modify the key and</td><td></td></tr>
<tr><td></td><td>then hash it again,</td><td></td></tr>
<tr><td></td><td>it would go to a</td><td></td></tr>
<tr><td></td><td>different location.</td><td></td></tr>
<tr><td></td><td>In that case you</td><td></td></tr>
<tr><td></td><td>might have two</td><td></td></tr>
<tr><td></td><td>entries for the same</td><td></td></tr>
<tr><td></td><td>key, or you might not</td><td></td></tr>
<tr><td></td><td>be able to find a</td><td></td></tr>
<tr><td></td><td>key. Either way, the</td><td></td></tr>
<tr><td></td><td>dictionary wouldn't</td><td></td></tr>
<tr><td></td><td>work correctly.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>That's why keys have</td><td></td></tr>
<tr><td></td><td>to be hashable, and</td><td></td></tr>
<tr><td></td><td>why mutable types</td><td></td></tr>
<tr><td></td><td>like lists aren't.</td><td></td></tr>
<tr><td></td><td>The simplest way to</td><td></td></tr>
<tr><td></td><td>get around this</td><td></td></tr>
<tr><td></td><td>limitation is to use</td><td></td></tr>
<tr><td></td><td>tuples, which we will</td><td></td></tr>
<tr><td></td><td>see in the next</td><td></td></tr>
<tr><td></td><td>chapter.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Since dictionaries</td><td></td></tr>
<tr><td></td><td>are mutable, they</td><td></td></tr>
<tr><td></td><td>can't be used as</td><td></td></tr>
<tr><td></td><td>keys, but they <em>can</em></td><td></td></tr>
<tr><td></td><td>be used as values.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>## 11.6  Mem</td><td></td></tr>
<tr><td></td><td>os {#sec135 .section}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#memoize}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>If you played with</td><td></td></tr>
<tr><td></td><td>the</td><td></td></tr>
<tr><td></td><td>[fibonacci]{.c004}</td><td></td></tr>
<tr><td></td><td>function from</td><td></td></tr>
<tr><td></td><td>Section [6.</td><td></td></tr>
<tr><td></td><td>7](thinkpython2007.ht</td><td></td></tr>
<tr><td></td><td>ml#one.more.example),</td><td></td></tr>
<tr><td></td><td>you might have</td><td></td></tr>
<tr><td></td><td>noticed that the</td><td></td></tr>
<tr><td></td><td>bigger the argument</td><td></td></tr>
<tr><td></td><td>you provide, the</td><td></td></tr>
<tr><td></td><td>longer the function</td><td></td></tr>
<tr><td></td><td>takes to run.</td><td></td></tr>
<tr><td></td><td>Furthermore, the run</td><td></td></tr>
<tr><td></td><td>time increases</td><td></td></tr>
<tr><td></td><td>quickly.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default943}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default944}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>To understand why,</td><td></td></tr>
<tr><td></td><td>consider</td><td></td></tr>
<tr><td></td><td>Figure [1</td><td></td></tr>
<tr><td></td><td>1.2](#fig.fibonacci),</td><td></td></tr>
<tr><td></td><td>which shows the [call</td><td></td></tr>
<tr><td></td><td>graph]{.c010} for</td><td></td></tr>
<tr><td></td><td>[fibonacci]{.c004}</td><td></td></tr>
<tr><td></td><td>with [n=4]{.c004}:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>&gt; ::: center</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; -------------------</td><td></td></tr>
<tr><td></td><td>&gt; :::</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; ::: center</td><td></td></tr>
<tr><td></td><td>&gt; ![]</td><td></td></tr>
<tr><td></td><td>(thinkpython2017.png)</td><td></td></tr>
<tr><td></td><td>&gt; :::</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; ::: caption</td><td></td></tr>
<tr><td></td><td>&gt;   -----</td><td></td></tr>
<tr><td></td><td>---------------------</td><td></td></tr>
<tr><td></td><td>&gt;   Fig</td><td></td></tr>
<tr><td></td><td>ure 11.2: Call graph.</td><td></td></tr>
<tr><td></td><td>&gt;   -----</td><td></td></tr>
<tr><td></td><td>---------------------</td><td></td></tr>
<tr><td></td><td>&gt; :::</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; []{#fig.fibonacci}</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; ::: center</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; -------------------</td><td></td></tr>
<tr><td></td><td>&gt; :::</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>A call graph shows a</td><td></td></tr>
<tr><td></td><td>set of function</td><td></td></tr>
<tr><td></td><td>frames, with lines</td><td></td></tr>
<tr><td></td><td>connecting each frame</td><td></td></tr>
<tr><td></td><td>to the frames of the</td><td></td></tr>
<tr><td></td><td>functions it calls.</td><td></td></tr>
<tr><td></td><td>At the top of the</td><td></td></tr>
<tr><td></td><td>graph,</td><td></td></tr>
<tr><td></td><td>[fibonacci]{.c004}</td><td></td></tr>
<tr><td></td><td>with [n=4]{.c004}</td><td></td></tr>
<tr><td></td><td>calls</td><td></td></tr>
<tr><td></td><td>[fibonacci]{.c004}</td><td></td></tr>
<tr><td></td><td>with [n=3]{.c004} and</td><td></td></tr>
<tr><td></td><td>[n=2]{.c004}. In</td><td></td></tr>
<tr><td></td><td>turn,</td><td></td></tr>
<tr><td></td><td>[fibonacci]{.c004}</td><td></td></tr>
<tr><td></td><td>with [n=3]{.c004}</td><td></td></tr>
<tr><td></td><td>calls</td><td></td></tr>
<tr><td></td><td>[fibonacci]{.c004}</td><td></td></tr>
<tr><td></td><td>with [n=2]{.c004} and</td><td></td></tr>
<tr><td></td><td>[n=1]{.c004}. And so</td><td></td></tr>
<tr><td></td><td>on.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default945}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default946}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default947}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Count how many times</td><td></td></tr>
<tr><td></td><td>[fibonacci(0)]{.c004}</td><td></td></tr>
<tr><td></td><td>and</td><td></td></tr>
<tr><td></td><td>[fibonacci(1)]{.c004}</td><td></td></tr>
<tr><td></td><td>are called. This is</td><td></td></tr>
<tr><td></td><td>an inefficient</td><td></td></tr>
<tr><td></td><td>solution to the</td><td></td></tr>
<tr><td></td><td>problem, and it gets</td><td></td></tr>
<tr><td></td><td>worse as the argument</td><td></td></tr>
<tr><td></td><td>gets bigger.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default948}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>One solution is to</td><td></td></tr>
<tr><td></td><td>keep track of values</td><td></td></tr>
<tr><td></td><td>that have already</td><td></td></tr>
<tr><td></td><td>been computed by</td><td></td></tr>
<tr><td></td><td>storing them in a</td><td></td></tr>
<tr><td></td><td>dictionary. A</td><td></td></tr>
<tr><td></td><td>previously computed</td><td></td></tr>
<tr><td></td><td>value that is stored</td><td></td></tr>
<tr><td></td><td>for later use is</td><td></td></tr>
<tr><td></td><td>called a</td><td></td></tr>
<tr><td></td><td>[memo]{.c010}. Here</td><td></td></tr>
<tr><td></td><td>is a &quot;memoized&quot;</td><td></td></tr>
<tr><td></td><td>version of</td><td></td></tr>
<tr><td></td><td>[fibonacci]{.c004}:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>known = {0:0, 1:1}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>def fibonacci(n):</td><td></td></tr>
<tr><td></td><td>if n in known:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>return known[n]</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>res = fibonacci(</td><td></td></tr>
<tr><td></td><td>n-1) + fibonacci(n-2)</td><td></td></tr>
<tr><td></td><td>known[n] = res</td><td></td></tr>
<tr><td></td><td>return res</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[known]{.c004} is a</td><td></td></tr>
<tr><td></td><td>dictionary that keeps</td><td></td></tr>
<tr><td></td><td>track of the</td><td></td></tr>
<tr><td></td><td>Fibonacci numbers we</td><td></td></tr>
<tr><td></td><td>already know. It</td><td></td></tr>
<tr><td></td><td>starts with two</td><td></td></tr>
<tr><td></td><td>items: 0 maps to 0</td><td></td></tr>
<tr><td></td><td>and 1 maps to 1.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Whenever</td><td></td></tr>
<tr><td></td><td>[fibonacci]{.c004} is</td><td></td></tr>
<tr><td></td><td>called, it checks</td><td></td></tr>
<tr><td></td><td>[known]{.c004}. If</td><td></td></tr>
<tr><td></td><td>the result is already</td><td></td></tr>
<tr><td></td><td>there, it can return</td><td></td></tr>
<tr><td></td><td>immediately.</td><td></td></tr>
<tr><td></td><td>Otherwise it has to</td><td></td></tr>
<tr><td></td><td>compute the new</td><td></td></tr>
<tr><td></td><td>value, add it to the</td><td></td></tr>
<tr><td></td><td>dictionary, and</td><td></td></tr>
<tr><td></td><td>return it.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>If you run this</td><td></td></tr>
<tr><td></td><td>version of</td><td></td></tr>
<tr><td></td><td>[fibonacci]{.c004}</td><td></td></tr>
<tr><td></td><td>and compare it with</td><td></td></tr>
<tr><td></td><td>the original, you</td><td></td></tr>
<tr><td></td><td>will find that it is</td><td></td></tr>
<tr><td></td><td>much faster.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>##</td><td></td></tr>
<tr><td></td><td>11.7  Global variabl</td><td></td></tr>
<tr><td></td><td>es {#sec136 .section}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default949}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default950}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>In the previous</td><td></td></tr>
<tr><td></td><td>example,</td><td></td></tr>
<tr><td></td><td>[known]{.c004} is</td><td></td></tr>
<tr><td></td><td>created outside the</td><td></td></tr>
<tr><td></td><td>function, so it</td><td></td></tr>
<tr><td></td><td>belongs to the</td><td></td></tr>
<tr><td></td><td>special frame called</td><td></td></tr>
<tr><td></td><td><code>__main__</code>. Variables</td><td></td></tr>
<tr><td></td><td>in <code>__main__</code> are</td><td></td></tr>
<tr><td></td><td>sometimes called</td><td></td></tr>
<tr><td></td><td>[global]{.c010}</td><td></td></tr>
<tr><td></td><td>because they can be</td><td></td></tr>
<tr><td></td><td>accessed from any</td><td></td></tr>
<tr><td></td><td>function. Unlike</td><td></td></tr>
<tr><td></td><td>local variables,</td><td></td></tr>
<tr><td></td><td>which disappear when</td><td></td></tr>
<tr><td></td><td>their function ends,</td><td></td></tr>
<tr><td></td><td>global variables</td><td></td></tr>
<tr><td></td><td>persist from one</td><td></td></tr>
<tr><td></td><td>function call to the</td><td></td></tr>
<tr><td></td><td>next.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default951}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default952}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>It is common to use</td><td></td></tr>
<tr><td></td><td>global variables for</td><td></td></tr>
<tr><td></td><td>[flags]{.c010}; that</td><td></td></tr>
<tr><td></td><td>is, boolean variables</td><td></td></tr>
<tr><td></td><td>that indicate</td><td></td></tr>
<tr><td></td><td>(&quot;flag&quot;) whether a</td><td></td></tr>
<tr><td></td><td>condition is true.</td><td></td></tr>
<tr><td></td><td>For example, some</td><td></td></tr>
<tr><td></td><td>programs use a flag</td><td></td></tr>
<tr><td></td><td>named</td><td></td></tr>
<tr><td></td><td>[verbose]{.c004} to</td><td></td></tr>
<tr><td></td><td>control the level of</td><td></td></tr>
<tr><td></td><td>detail in the output:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>verbose = True</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>def example1():</td><td></td></tr>
<tr><td></td><td>if verbose:</td><td></td></tr>
<tr><td></td><td>prin</td><td></td></tr>
<tr><td></td><td>t('Running example1')</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>If you try to</td><td></td></tr>
<tr><td></td><td>reassign a global</td><td></td></tr>
<tr><td></td><td>variable, you might</td><td></td></tr>
<tr><td></td><td>be surprised. The</td><td></td></tr>
<tr><td></td><td>following example is</td><td></td></tr>
<tr><td></td><td>supposed to keep</td><td></td></tr>
<tr><td></td><td>track of whether the</td><td></td></tr>
<tr><td></td><td>function has been</td><td></td></tr>
<tr><td></td><td>called:</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default953}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>been_called = False</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>def example2():</td><td></td></tr>
<tr><td></td><td>been_called =</td><td></td></tr>
<tr><td></td><td>True         # WRONG</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>But if you run it you</td><td></td></tr>
<tr><td></td><td>will see that the</td><td></td></tr>
<tr><td></td><td>value of</td><td></td></tr>
<tr><td></td><td><code>been_called</code> doesn't</td><td></td></tr>
<tr><td></td><td>change. The problem</td><td></td></tr>
<tr><td></td><td>is that</td><td></td></tr>
<tr><td></td><td>[example2]{.c004}</td><td></td></tr>
<tr><td></td><td>creates a new local</td><td></td></tr>
<tr><td></td><td>variable named</td><td></td></tr>
<tr><td></td><td><code>been_called</code>. The</td><td></td></tr>
<tr><td></td><td>local variable goes</td><td></td></tr>
<tr><td></td><td>away when the</td><td></td></tr>
<tr><td></td><td>function ends, and</td><td></td></tr>
<tr><td></td><td>has no effect on the</td><td></td></tr>
<tr><td></td><td>global variable.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default954}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default955}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default956}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>To reassign a global</td><td></td></tr>
<tr><td></td><td>variable inside a</td><td></td></tr>
<tr><td></td><td>function you have to</td><td></td></tr>
<tr><td></td><td>[declare]{.c010} the</td><td></td></tr>
<tr><td></td><td>global variable</td><td></td></tr>
<tr><td></td><td>before you use it:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>been_called = False</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>def example2():</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>global been_called</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>been_called = True</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>The [global</td><td></td></tr>
<tr><td></td><td>statement]{.c010}</td><td></td></tr>
<tr><td></td><td>tells the interpreter</td><td></td></tr>
<tr><td></td><td>something like, &quot;In</td><td></td></tr>
<tr><td></td><td>this function, when I</td><td></td></tr>
<tr><td></td><td>say <code>been_called</code>, I</td><td></td></tr>
<tr><td></td><td>mean the global</td><td></td></tr>
<tr><td></td><td>variable; don't</td><td></td></tr>
<tr><td></td><td>create a local one.&quot;</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default957}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default958}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Here's an example</td><td></td></tr>
<tr><td></td><td>that tries to update</td><td></td></tr>
<tr><td></td><td>a global variable:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>count = 0</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>def example3():</td><td></td></tr>
<tr><td></td><td>count = count</td><td></td></tr>
<tr><td></td><td>+ 1          # WRONG</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>If you run it you</td><td></td></tr>
<tr><td></td><td>get:</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default959}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default960}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>Unbound</td><td></td></tr>
<tr><td></td><td>LocalError: local var</td><td></td></tr>
<tr><td></td><td>iable 'count' referen</td><td></td></tr>
<tr><td></td><td>ced before assignment</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Python assumes that</td><td></td></tr>
<tr><td></td><td>[count]{.c004} is</td><td></td></tr>
<tr><td></td><td>local, and under that</td><td></td></tr>
<tr><td></td><td>assumption you are</td><td></td></tr>
<tr><td></td><td>reading it before</td><td></td></tr>
<tr><td></td><td>writing it. The</td><td></td></tr>
<tr><td></td><td>solution, again, is</td><td></td></tr>
<tr><td></td><td>to declare</td><td></td></tr>
<tr><td></td><td>[count]{.c004}</td><td></td></tr>
<tr><td></td><td>global.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default961}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>def example3():</td><td></td></tr>
<tr><td></td><td>global count</td><td></td></tr>
<tr><td></td><td>count += 1</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>If a global variable</td><td></td></tr>
<tr><td></td><td>refers to a mutable</td><td></td></tr>
<tr><td></td><td>value, you can modify</td><td></td></tr>
<tr><td></td><td>the value without</td><td></td></tr>
<tr><td></td><td>declaring the</td><td></td></tr>
<tr><td></td><td>variable:</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default962}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>known = {0:0, 1:1}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>def example4():</td><td></td></tr>
<tr><td></td><td>known[2] = 1</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>So you can add,</td><td></td></tr>
<tr><td></td><td>remove and replace</td><td></td></tr>
<tr><td></td><td>elements of a global</td><td></td></tr>
<tr><td></td><td>list or dictionary,</td><td></td></tr>
<tr><td></td><td>but if you want to</td><td></td></tr>
<tr><td></td><td>reassign the</td><td></td></tr>
<tr><td></td><td>variable, you have to</td><td></td></tr>
<tr><td></td><td>declare it:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>``` verbatim</td><td></td></tr>
<tr><td></td><td>def example5():</td><td></td></tr>
<tr><td></td><td>global known</td><td></td></tr>
<tr><td></td><td>known = dict()</td><td></td></tr>
<tr><td></td><td>```</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Global variables can</td><td></td></tr>
<tr><td></td><td>be useful, but if you</td><td></td></tr>
<tr><td></td><td>have a lot of them,</td><td></td></tr>
<tr><td></td><td>and you modify them</td><td></td></tr>
<tr><td></td><td>frequently, they can</td><td></td></tr>
<tr><td></td><td>make programs hard to</td><td></td></tr>
<tr><td></td><td>debug.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>## 11.8  Debuggi</td><td></td></tr>
<tr><td></td><td>ng {#sec137 .section}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default963}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>As you work with</td><td></td></tr>
<tr><td></td><td>bigger datasets it</td><td></td></tr>
<tr><td></td><td>can become unwieldy</td><td></td></tr>
<tr><td></td><td>to debug by printing</td><td></td></tr>
<tr><td></td><td>and checking the</td><td></td></tr>
<tr><td></td><td>output by hand. Here</td><td></td></tr>
<tr><td></td><td>are some suggestions</td><td></td></tr>
<tr><td></td><td>for debugging large</td><td></td></tr>
<tr><td></td><td>datasets:</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[Scale do</td><td></td></tr>
<tr><td></td><td>wn the input:]{.c010}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>:   If possible,</td><td></td></tr>
<tr><td></td><td>reduce the size</td><td></td></tr>
<tr><td></td><td>of the dataset.</td><td></td></tr>
<tr><td></td><td>For example if</td><td></td></tr>
<tr><td></td><td>the program reads</td><td></td></tr>
<tr><td></td><td>a text file,</td><td></td></tr>
<tr><td></td><td>start with just</td><td></td></tr>
<tr><td></td><td>the first 10</td><td></td></tr>
<tr><td></td><td>lines, or with</td><td></td></tr>
<tr><td></td><td>the smallest</td><td></td></tr>
<tr><td></td><td>example you can</td><td></td></tr>
<tr><td></td><td>find. You can</td><td></td></tr>
<tr><td></td><td>either edit the</td><td></td></tr>
<tr><td></td><td>files themselves,</td><td></td></tr>
<tr><td></td><td>or (better)</td><td></td></tr>
<tr><td></td><td>modify the</td><td></td></tr>
<tr><td></td><td>program so it</td><td></td></tr>
<tr><td></td><td>reads only the</td><td></td></tr>
<tr><td></td><td>first [n]{.c004}</td><td></td></tr>
<tr><td></td><td>lines.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>If there is an</td><td></td></tr>
<tr><td></td><td>error, you can</td><td></td></tr>
<tr><td></td><td>reduce [n]{.c004}</td><td></td></tr>
<tr><td></td><td>to the smallest</td><td></td></tr>
<tr><td></td><td>value that</td><td></td></tr>
<tr><td></td><td>manifests the</td><td></td></tr>
<tr><td></td><td>error, and then</td><td></td></tr>
<tr><td></td><td>increase it</td><td></td></tr>
<tr><td></td><td>gradually as you</td><td></td></tr>
<tr><td></td><td>find and correct</td><td></td></tr>
<tr><td></td><td>errors.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[Check summari</td><td></td></tr>
<tr><td></td><td>es and types:]{.c010}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>:   Instead of</td><td></td></tr>
<tr><td></td><td>printing and</td><td></td></tr>
<tr><td></td><td>checking the</td><td></td></tr>
<tr><td></td><td>entire dataset,</td><td></td></tr>
<tr><td></td><td>consider printing</td><td></td></tr>
<tr><td></td><td>summaries of the</td><td></td></tr>
<tr><td></td><td>data: for</td><td></td></tr>
<tr><td></td><td>example, the</td><td></td></tr>
<tr><td></td><td>number of items</td><td></td></tr>
<tr><td></td><td>in a dictionary</td><td></td></tr>
<tr><td></td><td>or the total of a</td><td></td></tr>
<tr><td></td><td>list of numbers.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>A common cause of</td><td></td></tr>
<tr><td></td><td>runtime errors is</td><td></td></tr>
<tr><td></td><td>a value that is</td><td></td></tr>
<tr><td></td><td>not the right</td><td></td></tr>
<tr><td></td><td>type. For</td><td></td></tr>
<tr><td></td><td>debugging this</td><td></td></tr>
<tr><td></td><td>kind of error, it</td><td></td></tr>
<tr><td></td><td>is often enough</td><td></td></tr>
<tr><td></td><td>to print the type</td><td></td></tr>
<tr><td></td><td>of a value.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[Write</td><td></td></tr>
<tr><td></td><td>self-checks:]{.c010}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>:   Sometimes you can</td><td></td></tr>
<tr><td></td><td>write code to</td><td></td></tr>
<tr><td></td><td>check for errors</td><td></td></tr>
<tr><td></td><td>automatically.</td><td></td></tr>
<tr><td></td><td>For example, if</td><td></td></tr>
<tr><td></td><td>you are computing</td><td></td></tr>
<tr><td></td><td>the average of a</td><td></td></tr>
<tr><td></td><td>list of numbers,</td><td></td></tr>
<tr><td></td><td>you could check</td><td></td></tr>
<tr><td></td><td>that the result</td><td></td></tr>
<tr><td></td><td>is not greater</td><td></td></tr>
<tr><td></td><td>than the largest</td><td></td></tr>
<tr><td></td><td>element in the</td><td></td></tr>
<tr><td></td><td>list or less than</td><td></td></tr>
<tr><td></td><td>the smallest.</td><td></td></tr>
<tr><td></td><td>This is called a</td><td></td></tr>
<tr><td></td><td>&quot;sanity check&quot;</td><td></td></tr>
<tr><td></td><td>because it</td><td></td></tr>
<tr><td></td><td>detects results</td><td></td></tr>
<tr><td></td><td>that are</td><td></td></tr>
<tr><td></td><td>&quot;insane&quot;.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default964}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default965}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Another kind of</td><td></td></tr>
<tr><td></td><td>check compares</td><td></td></tr>
<tr><td></td><td>the results of</td><td></td></tr>
<tr><td></td><td>two different</td><td></td></tr>
<tr><td></td><td>computations to</td><td></td></tr>
<tr><td></td><td>see if they are</td><td></td></tr>
<tr><td></td><td>consistent. This</td><td></td></tr>
<tr><td></td><td>is called a</td><td></td></tr>
<tr><td></td><td>&quot;consistency</td><td></td></tr>
<tr><td></td><td>check&quot;.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[Forma</td><td></td></tr>
<tr><td></td><td>t the output:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   Formatting</td><td></td></tr>
<tr><td></td><td>debugging output</td><td></td></tr>
<tr><td></td><td>can make it</td><td></td></tr>
<tr><td></td><td>easier to spot an</td><td></td></tr>
<tr><td></td><td>error. We saw an</td><td></td></tr>
<tr><td></td><td>example in</td><td></td></tr>
<tr><td></td><td>Sect</td><td></td></tr>
<tr><td></td><td>ion [6.9](thinkpython</td><td></td></tr>
<tr><td></td><td>2007.html#factdebug).</td><td></td></tr>
<tr><td></td><td>Another tool you</td><td></td></tr>
<tr><td></td><td>might find useful</td><td></td></tr>
<tr><td></td><td>is the</td><td></td></tr>
<tr><td></td><td>[pprint]{.c004}</td><td></td></tr>
<tr><td></td><td>module, which</td><td></td></tr>
<tr><td></td><td>provides a</td><td></td></tr>
<tr><td></td><td>[pprint]{.c004}</td><td></td></tr>
<tr><td></td><td>function that</td><td></td></tr>
<tr><td></td><td>displays built-in</td><td></td></tr>
<tr><td></td><td>types in a more</td><td></td></tr>
<tr><td></td><td>human-readable</td><td></td></tr>
<tr><td></td><td>format</td><td></td></tr>
<tr><td></td><td>([pprint]{.c004}</td><td></td></tr>
<tr><td></td><td>stands for</td><td></td></tr>
<tr><td></td><td>&quot;pretty print&quot;).</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default966}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default967}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default968}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>Again, time you spend</td><td></td></tr>
<tr><td></td><td>building scaffolding</td><td></td></tr>
<tr><td></td><td>can reduce the time</td><td></td></tr>
<tr><td></td><td>you spend debugging.</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default969}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>## 11.9  Glossa</td><td></td></tr>
<tr><td></td><td>ry {#sec138 .section}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[mapping:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A relationship in</td><td></td></tr>
<tr><td></td><td>which each</td><td></td></tr>
<tr><td></td><td>element of one</td><td></td></tr>
<tr><td></td><td>set corresponds</td><td></td></tr>
<tr><td></td><td>to an element of</td><td></td></tr>
<tr><td></td><td>another set.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default970}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[dictionary:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A mapping from</td><td></td></tr>
<tr><td></td><td>keys to their</td><td></td></tr>
<tr><td></td><td>corresponding</td><td></td></tr>
<tr><td></td><td>values.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default971}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[ke</td><td></td></tr>
<tr><td></td><td>y-value pair:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   The</td><td></td></tr>
<tr><td></td><td>representation of</td><td></td></tr>
<tr><td></td><td>the mapping from</td><td></td></tr>
<tr><td></td><td>a key to a value.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default972}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[item:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   In a dictionary,</td><td></td></tr>
<tr><td></td><td>another name for</td><td></td></tr>
<tr><td></td><td>a key-value pair.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default973}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[key:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   An object that</td><td></td></tr>
<tr><td></td><td>appears in a</td><td></td></tr>
<tr><td></td><td>dictionary as the</td><td></td></tr>
<tr><td></td><td>first part of a</td><td></td></tr>
<tr><td></td><td>key-value pair.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default974}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[value:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   An object that</td><td></td></tr>
<tr><td></td><td>appears in a</td><td></td></tr>
<tr><td></td><td>dictionary as the</td><td></td></tr>
<tr><td></td><td>second part of a</td><td></td></tr>
<tr><td></td><td>key-value pair.</td><td></td></tr>
<tr><td></td><td>This is more</td><td></td></tr>
<tr><td></td><td>specific than our</td><td></td></tr>
<tr><td></td><td>previous use of</td><td></td></tr>
<tr><td></td><td>the word &quot;value&quot;.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default975}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[im</td><td></td></tr>
<tr><td></td><td>plementation:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A way of</td><td></td></tr>
<tr><td></td><td>performing a</td><td></td></tr>
<tr><td></td><td>computation.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default976}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[hashtable:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   The algorithm</td><td></td></tr>
<tr><td></td><td>used to implement</td><td></td></tr>
<tr><td></td><td>Python</td><td></td></tr>
<tr><td></td><td>dictionaries.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default977}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[h</td><td></td></tr>
<tr><td></td><td>ash function:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A function used</td><td></td></tr>
<tr><td></td><td>by a hashtable to</td><td></td></tr>
<tr><td></td><td>compute the</td><td></td></tr>
<tr><td></td><td>location for a</td><td></td></tr>
<tr><td></td><td>key.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default978}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[hashable:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A type that has a</td><td></td></tr>
<tr><td></td><td>hash function.</td><td></td></tr>
<tr><td></td><td>Immutable types</td><td></td></tr>
<tr><td></td><td>like integers,</td><td></td></tr>
<tr><td></td><td>floats and</td><td></td></tr>
<tr><td></td><td>strings are</td><td></td></tr>
<tr><td></td><td>hashable; mutable</td><td></td></tr>
<tr><td></td><td>types like lists</td><td></td></tr>
<tr><td></td><td>and dictionaries</td><td></td></tr>
<tr><td></td><td>are not.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default979}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[lookup:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A dictionary</td><td></td></tr>
<tr><td></td><td>operation that</td><td></td></tr>
<tr><td></td><td>takes a key and</td><td></td></tr>
<tr><td></td><td>finds the</td><td></td></tr>
<tr><td></td><td>corresponding</td><td></td></tr>
<tr><td></td><td>value.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default980}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[re</td><td></td></tr>
<tr><td></td><td>verse lookup:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A dictionary</td><td></td></tr>
<tr><td></td><td>operation that</td><td></td></tr>
<tr><td></td><td>takes a value and</td><td></td></tr>
<tr><td></td><td>finds one or more</td><td></td></tr>
<tr><td></td><td>keys that map to</td><td></td></tr>
<tr><td></td><td>it.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default981}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[rai</td><td></td></tr>
<tr><td></td><td>se statement:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A statement that</td><td></td></tr>
<tr><td></td><td>(deliberately)</td><td></td></tr>
<tr><td></td><td>raises an</td><td></td></tr>
<tr><td></td><td>exception.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default982}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default983}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[singleton:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A list (or other</td><td></td></tr>
<tr><td></td><td>sequence) with a</td><td></td></tr>
<tr><td></td><td>single element.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default984}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[call graph:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A diagram that</td><td></td></tr>
<tr><td></td><td>shows every frame</td><td></td></tr>
<tr><td></td><td>created during</td><td></td></tr>
<tr><td></td><td>the execution of</td><td></td></tr>
<tr><td></td><td>a program, with</td><td></td></tr>
<tr><td></td><td>an arrow from</td><td></td></tr>
<tr><td></td><td>each caller to</td><td></td></tr>
<tr><td></td><td>each callee.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default985}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default986}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[memo:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A computed value</td><td></td></tr>
<tr><td></td><td>stored to avoid</td><td></td></tr>
<tr><td></td><td>unnecessary</td><td></td></tr>
<tr><td></td><td>future</td><td></td></tr>
<tr><td></td><td>computation.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default987}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[glo</td><td></td></tr>
<tr><td></td><td>bal variable:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A variable</td><td></td></tr>
<tr><td></td><td>defined outside a</td><td></td></tr>
<tr><td></td><td>function. Global</td><td></td></tr>
<tr><td></td><td>variables can be</td><td></td></tr>
<tr><td></td><td>accessed from any</td><td></td></tr>
<tr><td></td><td>function.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default988}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[glob</td><td></td></tr>
<tr><td></td><td>al statement:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A statement that</td><td></td></tr>
<tr><td></td><td>declares a</td><td></td></tr>
<tr><td></td><td>variable name</td><td></td></tr>
<tr><td></td><td>global.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default989}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default990}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[flag:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A boolean</td><td></td></tr>
<tr><td></td><td>variable used to</td><td></td></tr>
<tr><td></td><td>indicate whether</td><td></td></tr>
<tr><td></td><td>a condition is</td><td></td></tr>
<tr><td></td><td>true.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default991}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[declaration:]{.c010}</td><td></td></tr>
<tr><td></td><td>:   A statement like</td><td></td></tr>
<tr><td></td><td>[global]{.c004}</td><td></td></tr>
<tr><td></td><td>that tells the</td><td></td></tr>
<tr><td></td><td>interpreter</td><td></td></tr>
<tr><td></td><td>something about a</td><td></td></tr>
<tr><td></td><td>variable.</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default992}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>## 11.10  Exercis</td><td></td></tr>
<tr><td></td><td>es {#sec139 .section}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>::: theorem</td><td></td></tr>
<tr><td></td><td>[Exercise 1]{.c010}  </td><td></td></tr>
<tr><td></td><td>[]{#wordlist2}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default993}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default994}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*Write a function</td><td></td></tr>
<tr><td></td><td>that reads the words</td><td></td></tr>
<tr><td></td><td>in [words.txt]{.c004}</td><td></td></tr>
<tr><td></td><td>and stores them as</td><td></td></tr>
<tr><td></td><td>keys in a dictionary.</td><td></td></tr>
<tr><td></td><td>It doesn't matter</td><td></td></tr>
<tr><td></td><td>what the values are.</td><td></td></tr>
<tr><td></td><td>Then you can use the</td><td></td></tr>
<tr><td></td><td>[in]{.c004} operator</td><td></td></tr>
<tr><td></td><td>as a fast way to</td><td></td></tr>
<tr><td></td><td>check whether a</td><td></td></tr>
<tr><td></td><td>string is in the</td><td></td></tr>
<tr><td></td><td>dictionary.*</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*If you did</td><td></td></tr>
<tr><td></td><td>Exercise</td><td></td></tr>
<tr><td></td><td> *[<em>10</em>](thinkpython2</td><td></td></tr>
<tr><td></td><td>011.html#wordlist1)*,</td><td></td></tr>
<tr><td></td><td>you can compare the</td><td></td></tr>
<tr><td></td><td>speed of this</td><td></td></tr>
<tr><td></td><td>implementation with</td><td></td></tr>
<tr><td></td><td>the list [in]{.c004}</td><td></td></tr>
<tr><td></td><td>operator and the</td><td></td></tr>
<tr><td></td><td>bisection search.*</td><td></td></tr>
<tr><td></td><td>:::</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>::: theorem</td><td></td></tr>
<tr><td></td><td>[Exercise 2]{.c010}  </td><td></td></tr>
<tr><td></td><td>[]{#setdefault}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*Read the</td><td></td></tr>
<tr><td></td><td>documentation of the</td><td></td></tr>
<tr><td></td><td>dictionary method</td><td></td></tr>
<tr><td></td><td>[setdefault]{.c004}</td><td></td></tr>
<tr><td></td><td>and use it to write a</td><td></td></tr>
<tr><td></td><td>more concise version</td><td></td></tr>
<tr><td></td><td>of <code>invert_dict</code>.</td><td></td></tr>
<tr><td></td><td>Solution:*</td><td></td></tr>
<tr><td></td><td>[[*https://thinkpyth</td><td></td></tr>
<tr><td></td><td>on.com/code/invert_di</td><td></td></tr>
<tr><td></td><td>ct.py*]{.c004}](https</td><td></td></tr>
<tr><td></td><td>://thinkpython.com/co</td><td></td></tr>
<tr><td></td><td>de/invert_dict.py)<em>.</em></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default995}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default996}</td><td></td></tr>
<tr><td></td><td>:::</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>::: theorem</td><td></td></tr>
<tr><td></td><td>[Exercise 3]{.c010}  </td><td></td></tr>
<tr><td></td><td>*Memoize the</td><td></td></tr>
<tr><td></td><td>Ackermann function</td><td></td></tr>
<tr><td></td><td>from</td><td></td></tr>
<tr><td></td><td>Exerc</td><td></td></tr>
<tr><td></td><td>ise *[<em>2</em>](thinkpytho</td><td></td></tr>
<tr><td></td><td>n2007.html#ackermann)</td><td></td></tr>
<tr><td></td><td>*and see if</td><td></td></tr>
<tr><td></td><td>memoization makes it</td><td></td></tr>
<tr><td></td><td>possible to evaluate</td><td></td></tr>
<tr><td></td><td>the function with</td><td></td></tr>
<tr><td></td><td>bigger arguments.</td><td></td></tr>
<tr><td></td><td>Hint: no. Solution:*</td><td></td></tr>
<tr><td></td><td>[[*ht</td><td></td></tr>
<tr><td></td><td>tps://thinkpython.com</td><td></td></tr>
<tr><td></td><td>/code/ackermann_memo.</td><td></td></tr>
<tr><td></td><td>py*]{.c004}](https://</td><td></td></tr>
<tr><td></td><td>thinkpython.com/code/</td><td></td></tr>
<tr><td></td><td>ackermann_memo.py)<em>.</em></td><td></td></tr>
<tr><td></td><td>[]{#hevea_default997}</td><td></td></tr>
<tr><td></td><td>[]{#hevea_default998}</td><td></td></tr>
<tr><td></td><td>:::</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>::: theorem</td><td></td></tr>
<tr><td></td><td>[Exercise 4]{.c010}  </td><td></td></tr>
<tr><td></td><td>[]{#hevea_default999}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*If you did</td><td></td></tr>
<tr><td></td><td>Exercis</td><td></td></tr>
<tr><td></td><td>e *[<em>7</em>](thinkpython2</td><td></td></tr>
<tr><td></td><td>011.html#duplicate)*,</td><td></td></tr>
<tr><td></td><td>you already have a</td><td></td></tr>
<tr><td></td><td>function named</td><td></td></tr>
<tr><td></td><td><code>has_duplicates</code> that</td><td></td></tr>
<tr><td></td><td>takes a list as a</td><td></td></tr>
<tr><td></td><td>parameter and returns</td><td></td></tr>
<tr><td></td><td>[True]{.c004} if</td><td></td></tr>
<tr><td></td><td>there is any object</td><td></td></tr>
<tr><td></td><td>that appears more</td><td></td></tr>
<tr><td></td><td>than once in the</td><td></td></tr>
<tr><td></td><td>list.*</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*Use a dictionary to</td><td></td></tr>
<tr><td></td><td>write a faster,</td><td></td></tr>
<tr><td></td><td>simpler version of</td><td></td></tr>
<tr><td></td><td><code>has_duplicates</code>.</td><td></td></tr>
<tr><td></td><td>Solution:*</td><td></td></tr>
<tr><td></td><td>[[*ht</td><td></td></tr>
<tr><td></td><td>tps://thinkpython.com</td><td></td></tr>
<tr><td></td><td>/code/has_duplicates.</td><td></td></tr>
<tr><td></td><td>py*]{.c004}](https://</td><td></td></tr>
<tr><td></td><td>thinkpython.com/code/</td><td></td></tr>
<tr><td></td><td>has_duplicates.py)<em>.</em></td><td></td></tr>
<tr><td></td><td>:::</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>::: theorem</td><td></td></tr>
<tr><td></td><td>[Exercise 5]{.c010}  </td><td></td></tr>
<tr><td></td><td>[]{#exrotatepairs}</td><td></td></tr>
<tr><td></td><td>[</td><td></td></tr>
<tr><td></td><td>]{#hevea_default1000}</td><td></td></tr>
<tr><td></td><td>[</td><td></td></tr>
<tr><td></td><td>]{#hevea_default1001}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*Two words are</td><td></td></tr>
<tr><td></td><td>&quot;rotate pairs&quot; if you</td><td></td></tr>
<tr><td></td><td>can rotate one of</td><td></td></tr>
<tr><td></td><td>them and get the</td><td></td></tr>
<tr><td></td><td>other (see</td><td></td></tr>
<tr><td></td><td><code>rotate_word</code> in</td><td></td></tr>
<tr><td></td><td>Exercise</td><td></td></tr>
<tr><td></td><td> *[<em>5</em>](thinkpython20</td><td></td></tr>
<tr><td></td><td>09.html#exrotate)<em>).</em></td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*Write a program that</td><td></td></tr>
<tr><td></td><td>reads a wordlist and</td><td></td></tr>
<tr><td></td><td>finds all the rotate</td><td></td></tr>
<tr><td></td><td>pairs. Solution:*</td><td></td></tr>
<tr><td></td><td>[</td><td></td></tr>
<tr><td></td><td>*[https://thinkpython</td><td></td></tr>
<tr><td></td><td>.com/code/rotate_pair</td><td></td></tr>
<tr><td></td><td>s.py]{.c004}*](https:</td><td></td></tr>
<tr><td></td><td>//thinkpython.com/cod</td><td></td></tr>
<tr><td></td><td>e/rotate_pairs.py)<em>.</em></td><td></td></tr>
<tr><td></td><td>:::</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>::: theorem</td><td></td></tr>
<tr><td></td><td>[Exercise 6]{.c010}  </td><td></td></tr>
<tr><td></td><td>[</td><td></td></tr>
<tr><td></td><td>]{#hevea_default1002}</td><td></td></tr>
<tr><td></td><td>[</td><td></td></tr>
<tr><td></td><td>]{#hevea_default1003}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*Here's another</td><td></td></tr>
<tr><td></td><td>Puzzler from* Car</td><td></td></tr>
<tr><td></td><td>Talk</td><td></td></tr>
<tr><td></td><td><em>(</em>[*[http://www</td><td></td></tr>
<tr><td></td><td>.cartalk.com/content/</td><td></td></tr>
<tr><td></td><td>puzzlers]{.c004}*](ht</td><td></td></tr>
<tr><td></td><td>tp://www.cartalk.com/</td><td></td></tr>
<tr><td></td><td>content/puzzlers)<em>):</em></td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>&gt; *This was sent in</td><td></td></tr>
<tr><td></td><td>&gt; by a fellow named</td><td></td></tr>
<tr><td></td><td>&gt; Dan O'Leary. He</td><td></td></tr>
<tr><td></td><td>&gt; came upon a common</td><td></td></tr>
<tr><td></td><td>&gt; one-syllable,</td><td></td></tr>
<tr><td></td><td>&gt; five-letter word</td><td></td></tr>
<tr><td></td><td>&gt; recently that has</td><td></td></tr>
<tr><td></td><td>&gt; the following</td><td></td></tr>
<tr><td></td><td>&gt; unique property.</td><td></td></tr>
<tr><td></td><td>&gt; When you remove the</td><td></td></tr>
<tr><td></td><td>&gt; first letter, the</td><td></td></tr>
<tr><td></td><td>&gt; remaining letters</td><td></td></tr>
<tr><td></td><td>&gt; form a homophone of</td><td></td></tr>
<tr><td></td><td>&gt; the original word,</td><td></td></tr>
<tr><td></td><td>&gt; that is a word that</td><td></td></tr>
<tr><td></td><td>&gt; sounds exactly the</td><td></td></tr>
<tr><td></td><td>&gt; same. Replace the</td><td></td></tr>
<tr><td></td><td>&gt; first letter, that</td><td></td></tr>
<tr><td></td><td>&gt; is, put it back and</td><td></td></tr>
<tr><td></td><td>&gt; remove the second</td><td></td></tr>
<tr><td></td><td>&gt; letter and the</td><td></td></tr>
<tr><td></td><td>&gt; result is yet</td><td></td></tr>
<tr><td></td><td>&gt; another homophone</td><td></td></tr>
<tr><td></td><td>&gt; of the original</td><td></td></tr>
<tr><td></td><td>&gt; word. And the</td><td></td></tr>
<tr><td></td><td>&gt; question is, what's</td><td></td></tr>
<tr><td></td><td>&gt; the word?*</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; *Now I'm going to</td><td></td></tr>
<tr><td></td><td>&gt; give you an example</td><td></td></tr>
<tr><td></td><td>&gt; that doesn't work.</td><td></td></tr>
<tr><td></td><td>&gt; Let's look at the</td><td></td></tr>
<tr><td></td><td>&gt; five-letter word,</td><td></td></tr>
<tr><td></td><td>&gt; 'wrack.' W-R-A-C-K,</td><td></td></tr>
<tr><td></td><td>&gt; you know like to</td><td></td></tr>
<tr><td></td><td>&gt; 'wrack with pain.'</td><td></td></tr>
<tr><td></td><td>&gt; If I remove the</td><td></td></tr>
<tr><td></td><td>&gt; first letter, I am</td><td></td></tr>
<tr><td></td><td>&gt; left with a</td><td></td></tr>
<tr><td></td><td>&gt; four-letter word,</td><td></td></tr>
<tr><td></td><td>&gt; 'R-A-C-K.' As in,</td><td></td></tr>
<tr><td></td><td>&gt; 'Holy cow, did you</td><td></td></tr>
<tr><td></td><td>&gt; see the rack on</td><td></td></tr>
<tr><td></td><td>&gt; that buck! It must</td><td></td></tr>
<tr><td></td><td>&gt; have been a</td><td></td></tr>
<tr><td></td><td>&gt; nine-pointer!' It's</td><td></td></tr>
<tr><td></td><td>&gt; a perfect</td><td></td></tr>
<tr><td></td><td>&gt; homophone. If you</td><td></td></tr>
<tr><td></td><td>&gt; put the 'w' back,</td><td></td></tr>
<tr><td></td><td>&gt; and remove the 'r,'</td><td></td></tr>
<tr><td></td><td>&gt; instead, you're</td><td></td></tr>
<tr><td></td><td>&gt; left with the word,</td><td></td></tr>
<tr><td></td><td>&gt; 'wack,' which is a</td><td></td></tr>
<tr><td></td><td>&gt; real word, it's</td><td></td></tr>
<tr><td></td><td>&gt; just not a</td><td></td></tr>
<tr><td></td><td>&gt; homophone of the</td><td></td></tr>
<tr><td></td><td>&gt; other two words.*</td><td></td></tr>
<tr><td></td><td>&gt;</td><td></td></tr>
<tr><td></td><td>&gt; *But there is,</td><td></td></tr>
<tr><td></td><td>&gt; however, at least</td><td></td></tr>
<tr><td></td><td>&gt; one word that Dan</td><td></td></tr>
<tr><td></td><td>&gt; and we know of,</td><td></td></tr>
<tr><td></td><td>&gt; which will yield</td><td></td></tr>
<tr><td></td><td>&gt; two homophones if</td><td></td></tr>
<tr><td></td><td>&gt; you remove either</td><td></td></tr>
<tr><td></td><td>&gt; of the first two</td><td></td></tr>
<tr><td></td><td>&gt; letters to make</td><td></td></tr>
<tr><td></td><td>&gt; two, new</td><td></td></tr>
<tr><td></td><td>&gt; four-letter words.</td><td></td></tr>
<tr><td></td><td>&gt; The question is,</td><td></td></tr>
<tr><td></td><td>&gt; what's the word?*</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[</td><td></td></tr>
<tr><td></td><td>]{#hevea_default1004}</td><td></td></tr>
<tr><td></td><td>[</td><td></td></tr>
<tr><td></td><td>]{#hevea_default1005}</td><td></td></tr>
<tr><td></td><td>[</td><td></td></tr>
<tr><td></td><td>]{#hevea_default1006}</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*You can use the</td><td></td></tr>
<tr><td></td><td>dictionary from</td><td></td></tr>
<tr><td></td><td>Exerci</td><td></td></tr>
<tr><td></td><td>se *<a href="#wordlist2"><em>1</em></a></td><td></td></tr>
<tr><td></td><td>*to check whether a</td><td></td></tr>
<tr><td></td><td>string is in the word</td><td></td></tr>
<tr><td></td><td>list.*</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*To check whether two</td><td></td></tr>
<tr><td></td><td>words are homophones,</td><td></td></tr>
<tr><td></td><td>you can use the CMU</td><td></td></tr>
<tr><td></td><td>Pronouncing</td><td></td></tr>
<tr><td></td><td>Dictionary. You can</td><td></td></tr>
<tr><td></td><td>download it from*</td><td></td></tr>
<tr><td></td><td>[[*http://www.speec</td><td></td></tr>
<tr><td></td><td>h.cs.cmu.edu/cgi-bin/</td><td></td></tr>
<tr><td></td><td>cmudict*]{.c004}](htt</td><td></td></tr>
<tr><td></td><td>p://www.speech.cs.cmu</td><td></td></tr>
<tr><td></td><td>.edu/cgi-bin/cmudict)</td><td></td></tr>
<tr><td></td><td><em>or from</em></td><td></td></tr>
<tr><td></td><td>[[*https://thinkpy</td><td></td></tr>
<tr><td></td><td>thon.com/code/c06d*]{</td><td></td></tr>
<tr><td></td><td>.c004}](https://think</td><td></td></tr>
<tr><td></td><td>python.com/code/c06d)</td><td></td></tr>
<tr><td></td><td>*and you can also</td><td></td></tr>
<tr><td></td><td>download*</td><td></td></tr>
<tr><td></td><td>[[*https://thin</td><td></td></tr>
<tr><td></td><td>kpython.com/code/pron</td><td></td></tr>
<tr><td></td><td>ounce.py*]{.c004}](ht</td><td></td></tr>
<tr><td></td><td>tps://thinkpython.com</td><td></td></tr>
<tr><td></td><td>/code/pronounce.py)*,</td><td></td></tr>
<tr><td></td><td>which provides a</td><td></td></tr>
<tr><td></td><td>function named</td><td></td></tr>
<tr><td></td><td><code>read_dictionary</code></td><td></td></tr>
<tr><td></td><td>that reads the</td><td></td></tr>
<tr><td></td><td>pronouncing</td><td></td></tr>
<tr><td></td><td>dictionary and</td><td></td></tr>
<tr><td></td><td>returns a Python</td><td></td></tr>
<tr><td></td><td>dictionary that maps</td><td></td></tr>
<tr><td></td><td>from each word to a</td><td></td></tr>
<tr><td></td><td>string that describes</td><td></td></tr>
<tr><td></td><td>its primary</td><td></td></tr>
<tr><td></td><td>pronunciation.*</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>*Write a program that</td><td></td></tr>
<tr><td></td><td>lists all the words</td><td></td></tr>
<tr><td></td><td>that solve the</td><td></td></tr>
<tr><td></td><td>Puzzler. Solution:*</td><td></td></tr>
<tr><td></td><td>[*[https://think</td><td></td></tr>
<tr><td></td><td>python.com/code/homop</td><td></td></tr>
<tr><td></td><td>hone.py]{.c004}*](htt</td><td></td></tr>
<tr><td></td><td>ps://thinkpython.com/</td><td></td></tr>
<tr><td></td><td>code/homophone.py)<em>.</em></td><td></td></tr>
<tr><td></td><td>:::</td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td>[Buy this book at</td><td></td></tr>
<tr><td></td><td>Amazon.com](ht</td><td></td></tr>
<tr><td></td><td>tp://amzn.to/1VUYQUU)</td><td></td></tr>
<tr><td>+-----------------------+-----------------------+-----------------------+</td></tr>
</tbody></table>
</div>
<hr />
<h2><a href="thinkpython2011.html"><img src="back.png" alt="Previous" /></a>
<a href="index.html"><img src="up.png" alt="Up" /></a> <a href="thinkpython2013.html"><img src="next.png" alt="Next" /></a></h2>
<h2>generator: hevea 2.32
title: Tuples</h2>
<p><a href="thinkpython2012.html"><img src="back.png" alt="Previous" /></a>
<a href="index.html"><img src="up.png" alt="Up" /></a> <a href="thinkpython2014.html"><img src="next.png" alt="Next" /></a></p>
<hr />
<p>+-----------------------+-----------------------+-----------------------+
|                       | [Buy this book at     | #### Contribute       |
|                       | Amazon.com](ht        |                       |
|                       | tp://amzn.to/1VUYQUU) | If you would like to  |
|                       |                       | make a contribution   |
|                       | # Chapter 12  Tupl    | to support my books,  |
|                       | es {#sec140 .chapter} | you can use the       |
|                       |                       | button below and pay  |
|                       | []{#tuplechap}        | with PayPal. Thank    |
|                       |                       | you!                  |
|                       | This chapter presents |                       |
|                       | one more built-in     |   -----------         |
|                       | type, the tuple, and  | --------------------- |
|                       | then shows how lists, | --------------------- |
|                       | dictionaries, and     | --------------------- |
|                       | tuples work together. | --------------------- |
|                       | I also present a      |   Pay what you want:  |
|                       | useful feature for    |   Small $1           |
|                       | variable-length       | .00 USD Medium $5.00 |
|                       | argument lists, the   |  USD Large $10.00 US |
|                       | gather and scatter    | D X-Large $20.00 USD |
|                       | operators.            |  XX-Large $50.00 USD |
|                       |                       |   -----------         |
|                       | One note: there is no | --------------------- |
|                       | consensus on how to   | --------------------- |
|                       | pronounce &quot;tuple&quot;.    | --------------------- |
|                       | Some people say       | --------------------- |
|                       | &quot;tuh-ple&quot;, which      |                       |
|                       | rhymes with &quot;supple&quot;. | ![](                  |
|                       | But in the context of | https://www.paypalobj |
|                       | programming, most     | ects.com/en_US/i/scr/ |
|                       | people say &quot;too-ple&quot;, | pixel.gif){border=&quot;0&quot; |
|                       | which rhymes with     | width=&quot;1&quot; height=&quot;1&quot;} |
|                       | &quot;quadruple&quot;.          |                       |
|                       |                       | ####                  |
|                       | ## 12.                | Are you using one of  |
|                       | 1  Tuples are immutab | our books in a class? |
|                       | le {#sec141 .section} |                       |
|                       |                       | We'd like to know    |
|                       | [                     | about it. Please      |
|                       | ]{#hevea_default1007} | consider filling out  |
|                       | [                     | [this short           |
|                       | ]{#hevea_default1008} | survey](http://s      |
|                       | [                     | preadsheets.google.co |
|                       | ]{#hevea_default1009} | m/viewform?formkey=dC |
|                       |                       | 0tNUZkMjBEdXVoRGljNm9 |
|                       | A tuple is a sequence | FRmlTMHc6MA){onclick= |
|                       | of values. The values | &quot;javascript: pageTrac |
|                       | can be any type, and  | ker._trackPageview('/ |
|                       | they are indexed by   | outbound/survey');&quot;}. |
|                       | integers, so in that  |                       |
|                       | respect tuples are a  | \                     |
|                       | lot like lists. The   |                       |
|                       | important difference  | [Think                |
|                       | is that tuples are    | DSP](http             |
|                       | immutable.            | ://www.amazon.com/gp/ |
|                       | [                     | product/1491938455/re |
|                       | ]{#hevea_default1010} | f=as_li_tl?ie=UTF8&amp;ca |
|                       | [                     | mp=1789&amp;creative=9325 |
|                       | ]{#hevea_default1011} | &amp;creativeASIN=1491938 |
|                       |                       | 455&amp;linkCode=as2&amp;tag= |
|                       | Syntactically, a      | greenteapre01-20&amp;link |
|                       | tuple is a            | Id=2JJH4SWCAVVYSQHO){ |
|                       | comma-separated list  | rel=&quot;nofollow&quot;}![](ht |
|                       | of values:            | tp://ir-na.amazon-ads |
|                       |                       | ystem.com/e/ir?t=gree |
|                       | <code>verbatim          | nteapre01-20&amp;l=as2&amp;o= | |                       | &gt;&gt;&gt; t = 'a            | 1&amp;a=1491938455){.c003 | |                       | ', 'b', 'c', 'd', 'e' | width=&quot;1&quot; height=&quot;1&quot;  | |                       |</code>                   | border=&quot;0&quot;}           |
|                       |                       |                       |
|                       | Although it is not    | [                     |
|                       | necessary, it is      | ![](http://ws-na.amaz |
|                       | common to enclose     | on-adsystem.com/widge |
|                       | tuples in             | ts/q?_encoding=UTF8&amp;A |
|                       | parentheses:          | SIN=1491938455&amp;Format |
|                       | [                     | =<em>SL160</em>&amp;ID=AsinImage |
|                       | ]{#hevea_default1012} | &amp;MarketPlace=US&amp;Servi |
|                       |                       | ceVersion=20070822&amp;WS |
|                       | <code>verbatim          | =1&amp;tag=greenteapre01- | |                       | &gt;&gt;&gt; t = ('a'          | 20){border=&quot;0&quot;}](http | |                       | , 'b', 'c', 'd', 'e') | ://www.amazon.com/gp/ | |                       |</code>                   | product/1491938455/re |
|                       |                       | f=as_li_tl?ie=UTF8&amp;ca |
|                       | To create a tuple     | mp=1789&amp;creative=9325 |
|                       | with a single         | &amp;creativeASIN=1491938 |
|                       | element, you have to  | 455&amp;linkCode=as2&amp;tag= |
|                       | include a final       | greenteapre01-20&amp;link |
|                       | comma:                | Id=CTV7PDT7E5EGGJUM){ |
|                       | [                     | rel=&quot;nofollow&quot;}![](ht |
|                       | ]{#hevea_default1013} | tp://ir-na.amazon-ads |
|                       | [                     | ystem.com/e/ir?t=gree |
|                       | ]{#hevea_default1014} | nteapre01-20&amp;l=as2&amp;o= |
|                       |                       | 1&amp;a=1491938455){.c003 |
|                       | <code>verbatim          | width=&quot;1&quot; height=&quot;1&quot;  | |                       | &gt;&gt;&gt; t1 = 'a',         | border=&quot;0&quot;}           | |                       | &gt;&gt;&gt; type(t1)          |                       | |                       | &lt;class 'tuple'&gt;       | [Think                | |                       |</code>                   | Java](http            |
|                       |                       | ://www.amazon.com/gp/ |
|                       | A value in            | product/1491929561/re |
|                       | parentheses is not a  | f=as_li_tl?ie=UTF8&amp;ca |
|                       | tuple:                | mp=1789&amp;creative=9325 |
|                       |                       | &amp;creativeASIN=1491929 |
|                       | <code>verbatim          | 561&amp;linkCode=as2&amp;tag= | |                       | &gt;&gt;&gt; t2 = ('a')        | greenteapre01-20&amp;link | |                       | &gt;&gt;&gt; type(t2)          | Id=ZY6MAYM33ZTNSCNZ){ | |                       | &lt;class 'str'&gt;         | rel=&quot;nofollow&quot;}![](ht | |                       |</code>                   | tp://ir-na.amazon-ads |
|                       |                       | ystem.com/e/ir?t=gree |
|                       | Another way to create | nteapre01-20&amp;l=as2&amp;o= |
|                       | a tuple is the        | 1&amp;a=1491929561){.c003 |
|                       | built-in function     | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | [tuple]{.c004}. With  | border=&quot;0&quot;}           |
|                       | no argument, it       |                       |
|                       | creates an empty      | [                     |
|                       | tuple:                | ![](http://ws-na.amaz |
|                       | [                     | on-adsystem.com/widge |
|                       | ]{#hevea_default1015} | ts/q?_encoding=UTF8&amp;A |
|                       | [                     | SIN=1491929561&amp;Format |
|                       | ]{#hevea_default1016} | =<em>SL160</em>&amp;ID=AsinImage |
|                       |                       | &amp;MarketPlace=US&amp;Servi |
|                       | <code>verbatim          | ceVersion=20070822&amp;WS | |                       | &gt;&gt;&gt; t = tuple()       | =1&amp;tag=greenteapre01- | |                       | &gt;&gt;&gt; t                 | 20){border=&quot;0&quot;}](http | |                       | ()                    | ://www.amazon.com/gp/ | |                       |</code>                   | product/1491929561/re |
|                       |                       | f=as_li_tl?ie=UTF8&amp;ca |
|                       | If the argument is a  | mp=1789&amp;creative=9325 |
|                       | sequence (string,     | &amp;creativeASIN=1491929 |
|                       | list or tuple), the   | 561&amp;linkCode=as2&amp;tag= |
|                       | result is a tuple     | greenteapre01-20&amp;link |
|                       | with the elements of  | Id=PT77ANWARUNNU3UK){ |
|                       | the sequence:         | rel=&quot;nofollow&quot;}![](ht |
|                       |                       | tp://ir-na.amazon-ads |
|                       | <code>verbatim          | ystem.com/e/ir?t=gree | |                       | &gt;&gt;                    | nteapre01-20&amp;l=as2&amp;o= | |                       | &gt; t = tuple('lupins') | 1&amp;a=1491929561){.c003 | |                       | &gt;&gt;&gt; t                 | width=&quot;1&quot; height=&quot;1&quot;  | |                       | ('l', 'u'             | border=&quot;0&quot;}           | |                       | , 'p', 'i', 'n', 's') |                       | |                       |</code>                   | [Think                |
|                       |                       | Bay                   |
|                       | Because               | es](http://www.amazon |
|                       | [tuple]{.c004} is the | .com/gp/product/14493 |
|                       | name of a built-in    | 70780/ref=as_li_qf_sp |
|                       | function, you should  | _asin_tl?ie=UTF8&amp;camp |
|                       | avoid using it as a   | =1789&amp;creative=9325&amp;c |
|                       | variable name.        | reativeASIN=144937078 |
|                       |                       | 0&amp;linkCode=as2&amp;tag=gr |
|                       | Most list operators   | eenteapre01-20)![](ht |
|                       | also work on tuples.  | tp://ir-na.amazon-ads |
|                       | The bracket operator  | ystem.com/e/ir?t=gree |
|                       | indexes an element:   | nteapre01-20&amp;l=as2&amp;o= |
|                       | [                     | 1&amp;a=1449370780){.c003 |
|                       | ]{#hevea_default1017} | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | [                     | border=&quot;0&quot;}           |
|                       | ]{#hevea_default1018} |                       |
|                       |                       | [![](http://ws        |
|                       | <code>verbatim          | -na.amazon-adsystem.c | |                       | &gt;&gt;&gt; t = ('a'          | om/widgets/q?_encodin | |                       | , 'b', 'c', 'd', 'e') | g=UTF8&amp;ASIN=144937078 | |                       | &gt;&gt;&gt; t[0]              | 0&amp;Format=_SL160_&amp;ID=A | |                       | 'a'                   | sinImage&amp;MarketPlace= | |                       |</code>                   | US&amp;ServiceVersion=200 |
|                       |                       | 70822&amp;WS=1&amp;tag=greent |
|                       | And the slice         | eapre01-20){border=&quot;0 |
|                       | operator selects a    | &quot;}](http://www.amazon |
|                       | range of elements.    | .com/gp/product/14493 |
|                       | [                     | 70780/ref=as_li_qf_sp |
|                       | ]{#hevea_default1019} | <em>asin_il?ie=UTF8&amp;camp |
|                       | [                     | =1789&amp;creative=9325&amp;c |
|                       | ]{#hevea_default1020} | reativeASIN=144937078 |
|                       | [                     | 0&amp;linkCode=as2&amp;tag=gr |
|                       | ]{#hevea_default1021} | eenteapre01-20)![](ht |
|                       | [                     | tp://ir-na.amazon-ads |
|                       | ]{#hevea_default1022} | ystem.com/e/ir?t=gree |
|                       |                       | nteapre01-20&amp;l=as2&amp;o= |
|                       | <code>verbatim          | 1&amp;a=1449370780){.c003 | |                       | &gt;&gt;&gt; t[1:3]            | width=&quot;1&quot; height=&quot;1&quot;  | |                       | ('b', 'c')            | border=&quot;0&quot;}           | |                       |</code>                   |                       |
|                       |                       | [Think Python         |
|                       | But if you try to     | 2e](http              |
|                       | modify one of the     | ://www.amazon.com/gp/ |
|                       | elements of the       | product/1491939362/re |
|                       | tuple, you get an     | f=as_li_tl?ie=UTF8&amp;ca |
|                       | error:                | mp=1789&amp;creative=9325 |
|                       | [                     | &amp;creativeASIN=1491939 |
|                       | ]{#hevea_default1023} | 362&amp;linkCode=as2&amp;tag= |
|                       | [                     | greenteapre01-20&amp;link |
|                       | ]{#hevea_default1024} | Id=FJKSQ3IHEMY2F2VA){ |
|                       | [                     | rel=&quot;nofollow&quot;}![](ht |
|                       | ]{#hevea_default1025} | tp://ir-na.amazon-ads |
|                       | [                     | ystem.com/e/ir?t=gree |
|                       | ]{#hevea_default1026} | nteapre01-20&amp;l=as2&amp;o= |
|                       |                       | 1&amp;a=1491939362){.c003 |
|                       | <code>verbatim          | width=&quot;1&quot; height=&quot;1&quot;  | |                       | &gt;&gt;&gt; t[0] = 'A'        | border=&quot;0&quot;}           | |                       | TypeErr               |                       | |                       | or: object doesn't su | [                     | |                       | pport item assignment | ![](http://ws-na.amaz | |                       |</code>                   | on-adsystem.com/widge |
|                       |                       | ts/q?<em>encoding=UTF8&amp;A |
|                       | Because tuples are    | SIN=1491939362&amp;Format |
|                       | immutable, you can't  | =<em>SL160</em>&amp;ID=AsinImage |
|                       | modify the elements.  | &amp;MarketPlace=US&amp;Servi |
|                       | But you can replace   | ceVersion=20070822&amp;WS |
|                       | one tuple with        | =1&amp;tag=greenteapre01- |
|                       | another:              | 20){border=&quot;0&quot;}](http |
|                       |                       | ://www.amazon.com/gp/ |
|                       | <code>verbatim          | product/1491939362/re | |                       | &gt;                     | f=as_li_tl?ie=UTF8&amp;ca | |                       | &gt;&gt; t = ('A',) + t[1:] | mp=1789&amp;creative=9325 | |                       | &gt;&gt;&gt; t                 | &amp;creativeASIN=1491939 | |                       | ('A'                  | 362&amp;linkCode=as2&amp;tag= | |                       | , 'b', 'c', 'd', 'e') | greenteapre01-20&amp;link | |                       |</code>                   | Id=ZZ454DLQ3IXDHNHX){ |
|                       |                       | rel=&quot;nofollow&quot;}![](ht |
|                       | This statement makes  | tp://ir-na.amazon-ads |
|                       | a new tuple and then  | ystem.com/e/ir?t=gree |
|                       | makes [t]{.c004}      | nteapre01-20&amp;l=as2&amp;o= |
|                       | refer to it.          | 1&amp;a=1491939362){.c003 |
|                       |                       | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | The relational        | border=&quot;0&quot;}           |
|                       | operators work with   |                       |
|                       | tuples and other      | [Think Stats          |
|                       | sequences; Python     | 2e](http://ww         |
|                       | starts by comparing   | w.amazon.com/gp/produ |
|                       | the first element     | ct/1491907339/ref=as</em> |
|                       | from each sequence.   | li_tl?ie=UTF8&amp;camp=17 |
|                       | If they are equal, it | 89&amp;creative=9325&amp;crea |
|                       | goes on to the next   | tiveASIN=1491907339&amp;l |
|                       | elements, and so on,  | inkCode=as2&amp;tag=green |
|                       | until it finds        | teapre01-20&amp;linkId=O7 |
|                       | elements that differ. | WYM6H6YBYUFNWU)![](ht |
|                       | Subsequent elements   | tp://ir-na.amazon-ads |
|                       | are not considered    | ystem.com/e/ir?t=gree |
|                       | (even if they are     | nteapre01-20&amp;l=as2&amp;o= |
|                       | really big).          | 1&amp;a=1491907339){.c003 |
|                       | [                     | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | ]{#hevea_default1027} | border=&quot;0&quot;}           |
|                       | [                     |                       |
|                       | ]{#hevea_default1028} | [![](h                |
|                       |                       | ttp://ws-na.amazon-ad |
|                       | <code>verbatim          | system.com/widgets/q? | |                       | &gt;&gt;&gt;                   | _encoding=UTF8&amp;ASIN=1 | |                       | (0, 1, 2) &lt; (0, 3, 4) | 491907339&amp;Format=_SL1 | |                       | True                  | 60_&amp;ID=AsinImage&amp;Mark | |                       | &gt;&gt;&gt; (0, 1,            | etPlace=US&amp;ServiceVer | |                       |  2000000) &lt; (0, 3, 4) | sion=20070822&amp;WS=1&amp;ta | |                       | True                  | g=greenteapre01-20){b | |                       |</code>                   | order=&quot;0&quot;}](http://ww |
|                       |                       | w.amazon.com/gp/produ |
|                       | ##                    | ct/1491907339/ref=as</em> |
|                       |  12.2  Tuple assignme | li_tl?ie=UTF8&amp;camp=17 |
|                       | nt {#sec142 .section} | 89&amp;creative=9325&amp;crea |
|                       |                       | tiveASIN=1491907339&amp;l |
|                       | []{#tuple.assignment} | inkCode=as2&amp;tag=green |
|                       | [                     | teapre01-20&amp;linkId=JV |
|                       | ]{#hevea_default1029} | SYKQHYSUIEYRHL)![](ht |
|                       | [                     | tp://ir-na.amazon-ads |
|                       | ]{#hevea_default1030} | ystem.com/e/ir?t=gree |
|                       | [                     | nteapre01-20&amp;l=as2&amp;o= |
|                       | ]{#hevea_default1031} | 1&amp;a=1491907339){.c003 |
|                       | [                     | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | ]{#hevea_default1032} | border=&quot;0&quot;}           |
|                       |                       |                       |
|                       | It is often useful to | [Think                |
|                       | swap the values of    | Complexity](http      |
|                       | two variables. With   | ://www.amazon.com/gp/ |
|                       | conventional          | product/1449314635/re |
|                       | assignments, you have | f=as_li_tf_tl?ie=UTF8 |
|                       | to use a temporary    | &amp;tag=greenteapre01-20 |
|                       | variable. For         | &amp;linkCode=as2&amp;camp=17 |
|                       | example, to swap      | 89&amp;creative=9325&amp;crea |
|                       | [a]{.c004} and        | tiveASIN=1449314635)! |
|                       | [b]{.c004}:           | [](http://www.assoc-a |
|                       |                       | mazon.com/e/ir?t=gree |
|                       | <code>verbatim          | nteapre01-20&amp;l=as2&amp;o= | |                       | &gt;&gt;&gt; temp = a          | 1&amp;a=1449314635){.c003 | |                       | &gt;&gt;&gt; a = b             | width=&quot;1&quot; height=&quot;1&quot;  | |                       | &gt;&gt;&gt; b = temp          | border=&quot;0&quot;}           | |                       |</code>                   |                       |
|                       |                       | [                     |
|                       | This solution is      | ![](http://ws-na.amaz |
|                       | cumbersome; [tuple    | on-adsystem.com/widge |
|                       | assignment]{.c010} is | ts/q?_encoding=UTF8&amp;A |
|                       | more elegant:         | SIN=1449314635&amp;Format |
|                       |                       | =<em>SL160</em>&amp;ID=AsinImage |
|                       | <code>verbatim          | &amp;MarketPlace=US&amp;Servi | |                       | &gt;&gt;&gt; a, b = b, a       | ceVersion=20070822&amp;WS | |                       |</code>                   | =1&amp;tag=greenteapre01- |
|                       |                       | 20){border=&quot;0&quot;}](http |
|                       | The left side is a    | ://www.amazon.com/gp/ |
|                       | tuple of variables;   | product/1449314635/re |
|                       | the right side is a   | f=as_li_tf_il?ie=UTF8 |
|                       | tuple of expressions. | &amp;camp=1789&amp;creative=9 |
|                       | Each value is         | 325&amp;creativeASIN=1449 |
|                       | assigned to its       | 314635&amp;linkCode=as2&amp;t |
|                       | respective variable.  | ag=greenteapre01-20)! |
|                       | All the expressions   | [](http://www.assoc-a |
|                       | on the right side are | mazon.com/e/ir?t=gree |
|                       | evaluated before any  | nteapre01-20&amp;l=as2&amp;o= |
|                       | of the assignments.   | 1&amp;a=1449314635){.c003 |
|                       |                       | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | The number of         | border=&quot;0&quot;}           |
|                       | variables on the left |                       |
|                       | and the number of     |                       |
|                       | values on the right   |                       |
|                       | have to be the same:  |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1033} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1034} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; a, b = 1, 2, 3    |                       | |                       | ValueError: too       |                       | |                       | many values to unpack |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | More generally, the   |                       |
|                       | right side can be any |                       |
|                       | kind of sequence      |                       |
|                       | (string, list or      |                       |
|                       | tuple). For example,  |                       |
|                       | to split an email     |                       |
|                       | address into a user   |                       |
|                       | name and a domain,    |                       |
|                       | you could write:      |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1035} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1036} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1037} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; addr              |                       | |                       |  = 'monty@python.org' |                       | |                       | &gt;&gt;&gt; uname, dom        |                       | |                       | ain = addr.split('@') |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The return value from |                       |
|                       | [split]{.c004} is a   |                       |
|                       | list with two         |                       |
|                       | elements; the first   |                       |
|                       | element is assigned   |                       |
|                       | to [uname]{.c004},    |                       |
|                       | the second to         |                       |
|                       | [domain]{.c004}.      |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; uname             |                       | |                       | 'monty'               |                       | |                       | &gt;&gt;&gt; domain            |                       | |                       | 'python.org'          |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | ## 12.3               |                       |
|                       | Tuples as return valu |                       |
|                       | es {#sec143 .section} |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1038} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1039} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1040} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1041} |                       |
|                       |                       |                       |
|                       | Strictly speaking, a  |                       |
|                       | function can only     |                       |
|                       | return one value, but |                       |
|                       | if the value is a     |                       |
|                       | tuple, the effect is  |                       |
|                       | the same as returning |                       |
|                       | multiple values. For  |                       |
|                       | example, if you want  |                       |
|                       | to divide two         |                       |
|                       | integers and compute  |                       |
|                       | the quotient and      |                       |
|                       | remainder, it is      |                       |
|                       | inefficient to        |                       |
|                       | compute [x//y]{.c004} |                       |
|                       | and then              |                       |
|                       | [x%y]{.c004}. It is   |                       |
|                       | better to compute     |                       |
|                       | them both at the same |                       |
|                       | time.                 |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1042} |                       |
|                       |                       |                       |
|                       | The built-in function |                       |
|                       | [divmod]{.c004} takes |                       |
|                       | two arguments and     |                       |
|                       | returns a tuple of    |                       |
|                       | two values, the       |                       |
|                       | quotient and          |                       |
|                       | remainder. You can    |                       |
|                       | store the result as a |                       |
|                       | tuple:                |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; t = divmod(7, 3)  |                       | |                       | &gt;&gt;&gt; t                 |                       | |                       | (2, 1)                |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Or use tuple          |                       |
|                       | assignment to store   |                       |
|                       | the elements          |                       |
|                       | separately:           |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1043} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1044} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; quo               |                       | |                       | t, rem = divmod(7, 3) |                       | |                       | &gt;&gt;&gt; quot              |                       | |                       | 2                     |                       | |                       | &gt;&gt;&gt; rem               |                       | |                       | 1                     |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Here is an example of |                       |
|                       | a function that       |                       |
|                       | returns a tuple:      |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | def min_max(t):       |                       | |                       |                       |                       | |                       | return min(t), max(t) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | [max]{.c004} and      |                       |
|                       | [min]{.c004} are      |                       |
|                       | built-in functions    |                       |
|                       | that find the largest |                       |
|                       | and smallest elements |                       |
|                       | of a sequence.        |                       |
|                       | <code>min_max</code> computes    |                       |
|                       | both and returns a    |                       |
|                       | tuple of two values.  |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1045} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1046} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1047} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1048} |                       |
|                       |                       |                       |
|                       | ## 12.4  Variable     |                       |
|                       | -length argument tupl |                       |
|                       | es {#sec144 .section} |                       |
|                       |                       |                       |
|                       | []{#gather}           |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1049} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1050} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1051} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1052} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1053} |                       |
|                       |                       |                       |
|                       | Functions can take a  |                       |
|                       | variable number of    |                       |
|                       | arguments. A          |                       |
|                       | parameter name that   |                       |
|                       | begins with           |                       |
|                       | [*]{.c004}           |                       |
|                       | [gathers]{.c010}      |                       |
|                       | arguments into a      |                       |
|                       | tuple. For example,   |                       |
|                       | [printall]{.c004}     |                       |
|                       | takes any number of   |                       |
|                       | arguments and prints  |                       |
|                       | them:                 |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | def printall(*args):  |                       | |                       |     print(args)       |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The gather parameter  |                       |
|                       | can have any name you |                       |
|                       | like, but             |                       |
|                       | [args]{.c004} is      |                       |
|                       | conventional. Here's  |                       |
|                       | how the function      |                       |
|                       | works:                |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt;                   |                       | |                       | printall(1, 2.0, '3') |                       | |                       | (1, 2.0, '3')         |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The complement of     |                       |
|                       | gather is             |                       |
|                       | [scatter]{.c010}. If  |                       |
|                       | you have a sequence   |                       |
|                       | of values and you     |                       |
|                       | want to pass it to a  |                       |
|                       | function as multiple  |                       |
|                       | arguments, you can    |                       |
|                       | use the [*]{.c004}   |                       |
|                       | operator. For         |                       |
|                       | example,              |                       |
|                       | [divmod]{.c004} takes |                       |
|                       | exactly two           |                       |
|                       | arguments; it doesn't |                       |
|                       | work with a tuple:    |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1054} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1055} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1056} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1057} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; t = (7, 3)        |                       | |                       | &gt;&gt;&gt; divmod(t)         |                       | |                       | Typ                   |                       | |                       | eError: divmod expect |                       | |                       | ed 2 arguments, got 1 |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | But if you scatter    |                       |
|                       | the tuple, it works:  |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; divmod(*t)        |                       | |                       | (2, 1)                |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Many of the built-in  |                       |
|                       | functions use         |                       |
|                       | variable-length       |                       |
|                       | argument tuples. For  |                       |
|                       | example, [max]{.c004} |                       |
|                       | and [min]{.c004} can  |                       |
|                       | take any number of    |                       |
|                       | arguments:            |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1058} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1059} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1060} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1061} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; max(1, 2, 3)      |                       | |                       | 3                     |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | But [sum]{.c004} does |                       |
|                       | not.                  |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1062} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1063} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; sum(1, 2, 3)      |                       | |                       | TypeErro              |                       | |                       | r: sum expected at mo |                       | |                       | st 2 arguments, got 3 |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | As an exercise, write |                       |
|                       | a function called     |                       |
|                       | <code>sum_all</code> that takes  |                       |
|                       | any number of         |                       |
|                       | arguments and returns |                       |
|                       | their sum.            |                       |
|                       |                       |                       |
|                       | ##                    |                       |
|                       |  12.5  Lists and tupl |                       |
|                       | es {#sec145 .section} |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1064} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1065} |                       |
|                       |                       |                       |
|                       | [zip]{.c004} is a     |                       |
|                       | built-in function     |                       |
|                       | that takes two or     |                       |
|                       | more sequences and    |                       |
|                       | interleaves them. The |                       |
|                       | name of the function  |                       |
|                       | refers to a zipper,   |                       |
|                       | which interleaves two |                       |
|                       | rows of teeth.        |                       |
|                       |                       |                       |
|                       | This example zips a   |                       |
|                       | string and a list:    |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; s = 'abc'         |                       | |                       | &gt;&gt;&gt; t = [0, 1, 2]     |                       | |                       | &gt;&gt;&gt; zip(s, t)         |                       | |                       | &lt;zip obje             |                       | |                       | ct at 0x7f7d0a9e7c48&gt; |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The result is a [zip  |                       |
|                       | object]{.c010} that   |                       |
|                       | knows how to iterate  |                       |
|                       | through the pairs.    |                       |
|                       | The most common use   |                       |
|                       | of [zip]{.c004} is in |                       |
|                       | a [for]{.c004} loop:  |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; f                 |                       | |                       | or pair in zip(s, t): |                       | |                       | ...     print(pair)   |                       | |                       | ...                   |                       | |                       | ('a', 0)              |                       | |                       | ('b', 1)              |                       | |                       | ('c', 2)              |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | A zip object is a     |                       |
|                       | kind of               |                       |
|                       | [iterator]{.c010},    |                       |
|                       | which is any object   |                       |
|                       | that iterates through |                       |
|                       | a sequence. Iterators |                       |
|                       | are similar to lists  |                       |
|                       | in some ways, but     |                       |
|                       | unlike lists, you     |                       |
|                       | can't use an index to |                       |
|                       | select an element     |                       |
|                       | from an iterator.     |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1066} |                       |
|                       |                       |                       |
|                       | If you want to use    |                       |
|                       | list operators and    |                       |
|                       | methods, you can use  |                       |
|                       | a zip object to make  |                       |
|                       | a list:               |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; list(zip(s, t))   |                       | |                       | [('a', 0)             |                       | |                       | , ('b', 1), ('c', 2)] |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The result is a list  |                       |
|                       | of tuples; in this    |                       |
|                       | example, each tuple   |                       |
|                       | contains a character  |                       |
|                       | from the string and   |                       |
|                       | the corresponding     |                       |
|                       | element from the      |                       |
|                       | list.                 |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1067} |                       |
|                       |                       |                       |
|                       | If the sequences are  |                       |
|                       | not the same length,  |                       |
|                       | the result has the    |                       |
|                       | length of the shorter |                       |
|                       | one.                  |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; lis               |                       | |                       | t(zip('Anne', 'Elk')) |                       | |                       | [('A', 'E'), ('       |                       | |                       | n', 'l'), ('n', 'k')] |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | You can use tuple     |                       |
|                       | assignment in a       |                       |
|                       | [for]{.c004} loop to  |                       |
|                       | traverse a list of    |                       |
|                       | tuples:               |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1068} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1069} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1070} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | t = [('a', 0)         |                       | |                       | , ('b', 1), ('c', 2)] |                       | |                       | for                   |                       | |                       |  letter, number in t: |                       | |                       |                       |                       | |                       | print(number, letter) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Each time through the |                       |
|                       | loop, Python selects  |                       |
|                       | the next tuple in the |                       |
|                       | list and assigns the  |                       |
|                       | elements to           |                       |
|                       | [letter]{.c004} and   |                       |
|                       | [number]{.c004}. The  |                       |
|                       | output of this loop   |                       |
|                       | is:                   |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1071} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | 0 a                   |                       | |                       | 1 b                   |                       | |                       | 2 c                   |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | If you combine        |                       |
|                       | [zip]{.c004},         |                       |
|                       | [for]{.c004} and      |                       |
|                       | tuple assignment, you |                       |
|                       | get a useful idiom    |                       |
|                       | for traversing two    |                       |
|                       | (or more) sequences   |                       |
|                       | at the same time. For |                       |
|                       | example, <code>has_match</code>  |                       |
|                       | takes two sequences,  |                       |
|                       | [t1]{.c004} and       |                       |
|                       | [t2]{.c004}, and      |                       |
|                       | returns [True]{.c004} |                       |
|                       | if there is an index  |                       |
|                       | [i]{.c004} such that  |                       |
|                       | [t1[i] ==           |                       |
|                       | t2[i]]{.c004}:      |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1072} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | d                     |                       | |                       | ef has_match(t1, t2): |                       | |                       |     for               |                       | |                       |  x, y in zip(t1, t2): |                       | |                       |         if x == y:    |                       | |                       |                       |                       | |                       |           return True |                       | |                       |     return False      |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | If you need to        |                       |
|                       | traverse the elements |                       |
|                       | of a sequence and     |                       |
|                       | their indices, you    |                       |
|                       | can use the built-in  |                       |
|                       | function              |                       |
|                       | [enumerate]{.c004}:   |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1073} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1074} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1075} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | for index, element    |                       | |                       |  in enumerate('abc'): |                       | |                       |                       |                       | |                       | print(index, element) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The result from       |                       |
|                       | [enumerate]{.c004} is |                       |
|                       | an enumerate object,  |                       |
|                       | which iterates a      |                       |
|                       | sequence of pairs;    |                       |
|                       | each pair contains an |                       |
|                       | index (starting from  |                       |
|                       | 0) and an element     |                       |
|                       | from the given        |                       |
|                       | sequence. In this     |                       |
|                       | example, the output   |                       |
|                       | is                    |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | 0 a                   |                       | |                       | 1 b                   |                       | |                       | 2 c                   |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Again.                |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1076} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1077} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1078} |                       |
|                       |                       |                       |
|                       | ## 12.6               |                       |
|                       | Dictionaries and tupl |                       |
|                       | es {#sec146 .section} |                       |
|                       |                       |                       |
|                       | []{#dictuple}         |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1079} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1080} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1081} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1082} |                       |
|                       |                       |                       |
|                       | Dictionaries have a   |                       |
|                       | method called         |                       |
|                       | [items]{.c004} that   |                       |
|                       | returns a sequence of |                       |
|                       | tuples, where each    |                       |
|                       | tuple is a key-value  |                       |
|                       | pair.                 |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; d =               |                       | |                       | {'a':0, 'b':1, 'c':2} |                       | |                       | &gt;&gt;&gt; t = d.items()     |                       | |                       | &gt;&gt;&gt; t                 |                       | |                       | dict_items([('c', 2), |                       | |                       |  ('a', 0), ('b', 1)]) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The result is a       |                       |
|                       | <code>dict_items</code> object,  |                       |
|                       | which is an iterator  |                       |
|                       | that iterates the     |                       |
|                       | key-value pairs. You  |                       |
|                       | can use it in a       |                       |
|                       | [for]{.c004} loop     |                       |
|                       | like this:            |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1083} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; for key           |                       | |                       | , value in d.items(): |                       | |                       | ...                   |                       | |                       |     print(key, value) |                       | |                       | ...                   |                       | |                       | c 2                   |                       | |                       | a 0                   |                       | |                       | b 1                   |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | As you should expect  |                       |
|                       | from a dictionary,    |                       |
|                       | the items are in no   |                       |
|                       | particular order.     |                       |
|                       |                       |                       |
|                       | Going in the other    |                       |
|                       | direction, you can    |                       |
|                       | use a list of tuples  |                       |
|                       | to initialize a new   |                       |
|                       | dictionary:           |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1084} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; t = [('a', 0)     |                       | |                       | , ('c', 2), ('b', 1)] |                       | |                       | &gt;&gt;&gt; d = dict(t)       |                       | |                       | &gt;&gt;&gt; d                 |                       | |                       | {'a                   |                       | |                       | ': 0, 'c': 2, 'b': 1} |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Combining             |                       |
|                       | [dict]{.c004} with    |                       |
|                       | [zip]{.c004} yields a |                       |
|                       | concise way to create |                       |
|                       | a dictionary:         |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1085} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; d = dict(         |                       | |                       | zip('abc', range(3))) |                       | |                       | &gt;&gt;&gt; d                 |                       | |                       | {'a                   |                       | |                       | ': 0, 'c': 2, 'b': 1} |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The dictionary method |                       |
|                       | [update]{.c004} also  |                       |
|                       | takes a list of       |                       |
|                       | tuples and adds them, |                       |
|                       | as key-value pairs,   |                       |
|                       | to an existing        |                       |
|                       | dictionary.           |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1086} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1087} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1088} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1089} |                       |
|                       |                       |                       |
|                       | It is common to use   |                       |
|                       | tuples as keys in     |                       |
|                       | dictionaries          |                       |
|                       | (primarily because    |                       |
|                       | you can't use lists). |                       |
|                       | For example, a        |                       |
|                       | telephone directory   |                       |
|                       | might map from        |                       |
|                       | last-name, first-name |                       |
|                       | pairs to telephone    |                       |
|                       | numbers. Assuming     |                       |
|                       | that we have defined  |                       |
|                       | [last]{.c004},        |                       |
|                       | [first]{.c004} and    |                       |
|                       | [number]{.c004}, we   |                       |
|                       | could write:          |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1090} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1091} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | directory[            |                       | |                       | last, first] = number |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The expression in     |                       |
|                       | brackets is a tuple.  |                       |
|                       | We could use tuple    |                       |
|                       | assignment to         |                       |
|                       | traverse this         |                       |
|                       | dictionary.           |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1092} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | for last              |                       | |                       | , first in directory: |                       | |                       |                       |                       | |                       |  print(first, last, d |                       | |                       | irectory[last,first]) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | This loop traverses   |                       |
|                       | the keys in           |                       |
|                       | [directory]{.c004},   |                       |
|                       | which are tuples. It  |                       |
|                       | assigns the elements  |                       |
|                       | of each tuple to      |                       |
|                       | [last]{.c004} and     |                       |
|                       | [first]{.c004}, then  |                       |
|                       | prints the name and   |                       |
|                       | corresponding         |                       |
|                       | telephone number.     |                       |
|                       |                       |                       |
|                       | There are two ways to |                       |
|                       | represent tuples in a |                       |
|                       | state diagram. The    |                       |
|                       | more detailed version |                       |
|                       | shows the indices and |                       |
|                       | elements just as they |                       |
|                       | appear in a list. For |                       |
|                       | example, the tuple    |                       |
|                       | <code>('Cleese', 'John')</code>  |                       |
|                       | would appear as in    |                       |
|                       | Figure                |                       |
|                       |  <a href="#fig.tuple1">12.1</a>. |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1093} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1094} |                       |
|                       |                       |                       |
|                       | &gt; ::: center          |                       |
|                       | &gt;                     |                       |
|                       | &gt; ------------------- |                       |
|                       | &gt; :::                 |                       |
|                       | &gt;                     |                       |
|                       | &gt; ::: center          |                       |
|                       | &gt; ![]                 |                       |
|                       | (thinkpython2018.png) |                       |
|                       | &gt; :::                 |                       |
|                       | &gt;                     |                       |
|                       | &gt; ::: caption         |                       |
|                       | &gt;   --------          |                       |
|                       | --------------------- |                       |
|                       | &gt;   Figure            |                       |
|                       |  12.1: State diagram. |                       |
|                       | &gt;   --------          |                       |
|                       | --------------------- |                       |
|                       | &gt; :::                 |                       |
|                       | &gt;                     |                       |
|                       | &gt; []{#fig.tuple1}     |                       |
|                       | &gt;                     |                       |
|                       | &gt; ::: center          |                       |
|                       | &gt;                     |                       |
|                       | &gt; ------------------- |                       |
|                       | &gt; :::                 |                       |
|                       |                       |                       |
|                       | But in a larger       |                       |
|                       | diagram you might     |                       |
|                       | want to leave out the |                       |
|                       | details. For example, |                       |
|                       | a diagram of the      |                       |
|                       | telephone directory   |                       |
|                       | might appear as in    |                       |
|                       | Figur                 |                       |
|                       | e <a href="#fig.dict2">12.2</a>. |                       |
|                       |                       |                       |
|                       | &gt; ::: center          |                       |
|                       | &gt;                     |                       |
|                       | &gt; ------------------- |                       |
|                       | &gt; :::                 |                       |
|                       | &gt;                     |                       |
|                       | &gt; ::: center          |                       |
|                       | &gt; ![]                 |                       |
|                       | (thinkpython2019.png) |                       |
|                       | &gt; :::                 |                       |
|                       | &gt;                     |                       |
|                       | &gt; ::: caption         |                       |
|                       | &gt;   --------          |                       |
|                       | --------------------- |                       |
|                       | &gt;   Figure            |                       |
|                       |  12.2: State diagram. |                       |
|                       | &gt;   --------          |                       |
|                       | --------------------- |                       |
|                       | &gt; :::                 |                       |
|                       | &gt;                     |                       |
|                       | &gt; []{#fig.dict2}      |                       |
|                       | &gt;                     |                       |
|                       | &gt; ::: center          |                       |
|                       | &gt;                     |                       |
|                       | &gt; ------------------- |                       |
|                       | &gt; :::                 |                       |
|                       |                       |                       |
|                       | Here the tuples are   |                       |
|                       | shown using Python    |                       |
|                       | syntax as a graphical |                       |
|                       | shorthand. The        |                       |
|                       | telephone number in   |                       |
|                       | the diagram is the    |                       |
|                       | complaints line for   |                       |
|                       | the BBC, so please    |                       |
|                       | don't call it.        |                       |
|                       |                       |                       |
|                       | ## 12.7               |                       |
|                       |  Sequences of sequenc |                       |
|                       | es {#sec147 .section} |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1095} |                       |
|                       |                       |                       |
|                       | I have focused on     |                       |
|                       | lists of tuples, but  |                       |
|                       | almost all of the     |                       |
|                       | examples in this      |                       |
|                       | chapter also work     |                       |
|                       | with lists of lists,  |                       |
|                       | tuples of tuples, and |                       |
|                       | tuples of lists. To   |                       |
|                       | avoid enumerating the |                       |
|                       | possible              |                       |
|                       | combinations, it is   |                       |
|                       | sometimes easier to   |                       |
|                       | talk about sequences  |                       |
|                       | of sequences.         |                       |
|                       |                       |                       |
|                       | In many contexts, the |                       |
|                       | different kinds of    |                       |
|                       | sequences (strings,   |                       |
|                       | lists and tuples) can |                       |
|                       | be used               |                       |
|                       | interchangeably. So   |                       |
|                       | how should you choose |                       |
|                       | one over the others?  |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1096} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1097} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1098} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1099} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1100} |                       |
|                       |                       |                       |
|                       | To start with the     |                       |
|                       | obvious, strings are  |                       |
|                       | more limited than     |                       |
|                       | other sequences       |                       |
|                       | because the elements  |                       |
|                       | have to be            |                       |
|                       | characters. They are  |                       |
|                       | also immutable. If    |                       |
|                       | you need the ability  |                       |
|                       | to change the         |                       |
|                       | characters in a       |                       |
|                       | string (as opposed to |                       |
|                       | creating a new        |                       |
|                       | string), you might    |                       |
|                       | want to use a list of |                       |
|                       | characters instead.   |                       |
|                       |                       |                       |
|                       | Lists are more common |                       |
|                       | than tuples, mostly   |                       |
|                       | because they are      |                       |
|                       | mutable. But there    |                       |
|                       | are a few cases where |                       |
|                       | you might prefer      |                       |
|                       | tuples:               |                       |
|                       |                       |                       |
|                       | 1.  In some contexts, |                       |
|                       |     like a            |                       |
|                       |     [return]{.c004}   |                       |
|                       |     statement, it is  |                       |
|                       |     syntactically     |                       |
|                       |     simpler to create |                       |
|                       |     a tuple than a    |                       |
|                       |     list.             |                       |
|                       | 2.  If you want to    |                       |
|                       |     use a sequence as |                       |
|                       |     a dictionary key, |                       |
|                       |     you have to use   |                       |
|                       |     an immutable type |                       |
|                       |     like a tuple or   |                       |
|                       |     string.           |                       |
|                       | 3.  If you are        |                       |
|                       |     passing a         |                       |
|                       |     sequence as an    |                       |
|                       |     argument to a     |                       |
|                       |     function, using   |                       |
|                       |     tuples reduces    |                       |
|                       |     the potential for |                       |
|                       |     unexpected        |                       |
|                       |     behavior due to   |                       |
|                       |     aliasing.         |                       |
|                       |                       |                       |
|                       | Because tuples are    |                       |
|                       | immutable, they don't |                       |
|                       | provide methods like  |                       |
|                       | [sort]{.c004} and     |                       |
|                       | [reverse]{.c004},     |                       |
|                       | which modify existing |                       |
|                       | lists. But Python     |                       |
|                       | provides the built-in |                       |
|                       | function              |                       |
|                       | [sorted]{.c004},      |                       |
|                       | which takes any       |                       |
|                       | sequence and returns  |                       |
|                       | a new list with the   |                       |
|                       | same elements in      |                       |
|                       | sorted order, and     |                       |
|                       | [reversed]{.c004},    |                       |
|                       | which takes a         |                       |
|                       | sequence and returns  |                       |
|                       | an iterator that      |                       |
|                       | traverses the list in |                       |
|                       | reverse order.        |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1101} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1102} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1103} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1104} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1105} |                       |
|                       |                       |                       |
|                       | ## 12.8  Debuggi      |                       |
|                       | ng {#sec148 .section} |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1106} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1107} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1108} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1109} |                       |
|                       |                       |                       |
|                       | Lists, dictionaries   |                       |
|                       | and tuples are        |                       |
|                       | examples of [data     |                       |
|                       | structures]{.c010};   |                       |
|                       | in this chapter we    |                       |
|                       | are starting to see   |                       |
|                       | compound data         |                       |
|                       | structures, like      |                       |
|                       | lists of tuples, or   |                       |
|                       | dictionaries that     |                       |
|                       | contain tuples as     |                       |
|                       | keys and lists as     |                       |
|                       | values. Compound data |                       |
|                       | structures are        |                       |
|                       | useful, but they are  |                       |
|                       | prone to what I call  |                       |
|                       | [shape                |                       |
|                       | errors]{.c010}; that  |                       |
|                       | is, errors caused     |                       |
|                       | when a data structure |                       |
|                       | has the wrong type,   |                       |
|                       | size, or structure.   |                       |
|                       | For example, if you   |                       |
|                       | are expecting a list  |                       |
|                       | with one integer and  |                       |
|                       | I give you a plain    |                       |
|                       | old integer (not in a |                       |
|                       | list), it won't work. |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1110} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1111} |                       |
|                       |                       |                       |
|                       | To help debug these   |                       |
|                       | kinds of errors, I    |                       |
|                       | have written a module |                       |
|                       | called                |                       |
|                       | [structshape]{.c004}  |                       |
|                       | that provides a       |                       |
|                       | function, also called |                       |
|                       | [structshape]{.c004}, |                       |
|                       | that takes any kind   |                       |
|                       | of data structure as  |                       |
|                       | an argument and       |                       |
|                       | returns a string that |                       |
|                       | summarizes its shape. |                       |
|                       | You can download it   |                       |
|                       | from                  |                       |
|                       | [[https://think       |                       |
|                       | python.com/code/struc |                       |
|                       | tshape.py]{.c004}](ht |                       |
|                       | tps://thinkpython.com |                       |
|                       | /code/structshape.py) |                       |
|                       |                       |                       |
|                       | Here's the result for |                       |
|                       | a simple list:        |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; from structsha    |                       | |                       | pe import structshape |                       | |                       | &gt;&gt;&gt; t = [1, 2, 3]     |                       | |                       | &gt;&gt;&gt; structshape(t)    |                       | |                       | 'list of 3 int'       |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | A fancier program     |                       |
|                       | might write &quot;list of  |                       |
|                       | 3 int<em>s</em>&quot;, but it was |                       |
|                       | easier not to deal    |                       |
|                       | with plurals. Here's  |                       |
|                       | a list of lists:      |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; t2 =              |                       | |                       | [[1,2], [3,4], [5,6]] |                       | |                       | &gt;&gt;&gt; structshape(t2)   |                       | |                       | 'lis                  |                       | |                       | t of 3 list of 2 int' |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | If the elements of    |                       |
|                       | the list are not the  |                       |
|                       | same type,            |                       |
|                       | [structshape]{.c004}  |                       |
|                       | groups them, in       |                       |
|                       | order, by type:       |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt;                   |                       | |                       | t3 = [1, 2, 3, 4.0, ' |                       | |                       | 5', '6', [7], [8], 9] |                       | |                       | &gt;&gt;&gt; structshape(t3)   |                       | |                       | 'list of              |                       | |                       | (3 int, float, 2 str, |                       | |                       |  2 list of int, int)' |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Here's a list of      |                       |
|                       | tuples:               |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; s = 'abc'         |                       | |                       | &gt;&gt;&gt;                   |                       | |                       |  lt = list(zip(t, s)) |                       | |                       | &gt;&gt;&gt; structshape(lt)   |                       | |                       | 'list of 3            |                       | |                       |  tuple of (int, str)' |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | And here's a          |                       |
|                       | dictionary with 3     |                       |
|                       | items that map        |                       |
|                       | integers to strings.  |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; d = dict(lt)      |                       | |                       | &gt;&gt;&gt; structshape(d)    |                       | |                       | 'dict of 3 int-&gt;str'  |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | If you are having     |                       |
|                       | trouble keeping track |                       |
|                       | of your data          |                       |
|                       | structures,           |                       |
|                       | [structshape]{.c004}  |                       |
|                       | can help.             |                       |
|                       |                       |                       |
|                       | ## 12.9  Glossa       |                       |
|                       | ry {#sec149 .section} |                       |
|                       |                       |                       |
|                       | [tuple:]{.c010}       |                       |
|                       | :   An immutable      |                       |
|                       |     sequence of       |                       |
|                       |     elements.         |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1112} |                       |
|                       |                       |                       |
|                       | [tupl                 |                       |
|                       | e assignment:]{.c010} |                       |
|                       | :   An assignment     |                       |
|                       |     with a sequence   |                       |
|                       |     on the right side |                       |
|                       |     and a tuple of    |                       |
|                       |     variables on the  |                       |
|                       |     left. The right   |                       |
|                       |     side is evaluated |                       |
|                       |     and then its      |                       |
|                       |     elements are      |                       |
|                       |     assigned to the   |                       |
|                       |     variables on the  |                       |
|                       |     left.             |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1113} |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1114} |                       |
|                       |                       |                       |
|                       | [gather:]{.c010}      |                       |
|                       | :   An operation that |                       |
|                       |     collects multiple |                       |
|                       |     arguments into a  |                       |
|                       |     tuple.            |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1115} |                       |
|                       |                       |                       |
|                       | [scatter:]{.c010}     |                       |
|                       | :   An operation that |                       |
|                       |     makes a sequence  |                       |
|                       |     behave like       |                       |
|                       |     multiple          |                       |
|                       |     arguments.        |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1116} |                       |
|                       |                       |                       |
|                       | [zip object:]{.c010}  |                       |
|                       | :   The result of     |                       |
|                       |     calling a         |                       |
|                       |     built-in function |                       |
|                       |     [zip]{.c004}; an  |                       |
|                       |     object that       |                       |
|                       |     iterates through  |                       |
|                       |     a sequence of     |                       |
|                       |     tuples.           |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1117} |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1118} |                       |
|                       |                       |                       |
|                       | [iterator:]{.c010}    |                       |
|                       | :   An object that    |                       |
|                       |     can iterate       |                       |
|                       |     through a         |                       |
|                       |     sequence, but     |                       |
|                       |     which does not    |                       |
|                       |     provide list      |                       |
|                       |     operators and     |                       |
|                       |     methods.          |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1119} |                       |
|                       |                       |                       |
|                       | [da                   |                       |
|                       | ta structure:]{.c010} |                       |
|                       | :   A collection of   |                       |
|                       |     related values,   |                       |
|                       |     often organized   |                       |
|                       |     in lists,         |                       |
|                       |     dictionaries,     |                       |
|                       |     tuples, etc.      |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1120} |                       |
|                       |                       |                       |
|                       | [shape error:]{.c010} |                       |
|                       | :   An error caused   |                       |
|                       |     because a value   |                       |
|                       |     has the wrong     |                       |
|                       |     shape; that is,   |                       |
|                       |     the wrong type or |                       |
|                       |     size.             |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1121} |                       |
|                       |                       |                       |
|                       | ## 12.10  Exercis     |                       |
|                       | es {#sec150 .section} |                       |
|                       |                       |                       |
|                       | ::: theorem           |                       |
|                       | [Exercise 1]{.c010}   |                       |
|                       |                       |                       |
|                       | <em>Write a function     |                       |
|                       | called                |                       |
|                       | <code>most_frequent</code> that  |                       |
|                       | takes a string and    |                       |
|                       | prints the letters in |                       |
|                       | decreasing order of   |                       |
|                       | frequency. Find text  |                       |
|                       | samples from several  |                       |
|                       | different languages   |                       |
|                       | and see how letter    |                       |
|                       | frequency varies      |                       |
|                       | between languages.    |                       |
|                       | Compare your results  |                       |
|                       | with the tables at</em>   |                       |
|                       | [[<em>htt                |                       |
|                       | p://en.wikipedia.org/ |                       |
|                       | wiki/Letter_frequenci |                       |
|                       | es</em>]{.c004}](http://e |                       |
|                       | n.wikipedia.org/wiki/ |                       |
|                       | Letter_frequencies)<em>. |                       |
|                       | Solution:</em>            |                       |
|                       | [[*                   |                       |
|                       | https://thinkpython.c |                       |
|                       | om/code/most_frequent |                       |
|                       | .py*]{.c004}](https:/ |                       |
|                       | /thinkpython.com/code |                       |
|                       | /most_frequent.py)<em>.</em> |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1122} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1123} |                       |
|                       | :::                   |                       |
|                       |                       |                       |
|                       | ::: theorem           |                       |
|                       | [Exercise 2]{.c010}   |                       |
|                       | []{#anagrams}         |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1124} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1125} |                       |
|                       |                       |                       |
|                       | <em>More anagrams!</em>      |                       |
|                       |                       |                       |
|                       | 1.  <em>Write a program  |                       |
|                       |     that reads a word |                       |
|                       |     list from a file  |                       |
|                       |     (see              |                       |
|                       |     Section           |                       |
|                       |  <em>[<em>9.1</em>](thinkpython |                       |
|                       | 2010.html#wordlist)</em>) |                       |
|                       |     and prints all    |                       |
|                       |     the sets of words |                       |
|                       |     that are          |                       |
|                       |     anagrams.</em>        |                       |
|                       |                       |                       |
|                       |     <em>Here is an       |                       |
|                       |     example of what   |                       |
|                       |     the output might  |                       |
|                       |     look like:</em>       |                       |
|                       |                       |                       |
|                       |     <code>verbatim      |                       | |                       |                       |                       | |                       |    ['deltas', 'desalt |                       | |                       | ', 'lasted', 'salted' |                       | |                       | , 'slated', 'staled'] |                       | |                       |     ['ret             |                       | |                       | ainers', 'ternaries'] |                       | |                       |     ['gener           |                       | |                       | ating', 'greatening'] |                       | |                       |     ['resmelts', 's   |                       | |                       | melters', 'termless'] |                       | |                       |    </code>               |                       |
|                       |                       |                       |
|                       |     <em>Hint: you might  |                       |
|                       |     want to build a   |                       |
|                       |     dictionary that   |                       |
|                       |     maps from a       |                       |
|                       |     collection of     |                       |
|                       |     letters to a list |                       |
|                       |     of words that can |                       |
|                       |     be spelled with   |                       |
|                       |     those letters.    |                       |
|                       |     The question is,  |                       |
|                       |     how can you       |                       |
|                       |     represent the     |                       |
|                       |     collection of     |                       |
|                       |     letters in a way  |                       |
|                       |     that can be used  |                       |
|                       |     as a key?</em>        |                       |
|                       |                       |                       |
|                       | 2.  <em>Modify the       |                       |
|                       |     previous program  |                       |
|                       |     so that it prints |                       |
|                       |     the longest list  |                       |
|                       |     of anagrams       |                       |
|                       |     first, followed   |                       |
|                       |     by the second     |                       |
|                       |     longest, and so   |                       |
|                       |     on.</em>              |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1126} |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1127} |                       |
|                       |                       |                       |
|                       | 3.  <em>In Scrabble a    |                       |
|                       |     &quot;bingo&quot; is when   |                       |
|                       |     you play all      |                       |
|                       |     seven tiles in    |                       |
|                       |     your rack, along  |                       |
|                       |     with a letter on  |                       |
|                       |     the board, to     |                       |
|                       |     form an           |                       |
|                       |     eight-letter      |                       |
|                       |     word. What        |                       |
|                       |     collection of 8   |                       |
|                       |     letters forms the |                       |
|                       |     most possible     |                       |
|                       |     bingos?</em>          |                       |
|                       |                       |                       |
|                       |     <em>Solution:</em>       |                       |
|                       |     [                 |                       |
|                       | [<em>https://thinkpython |                       |
|                       | .com/code/anagram_set |                       |
|                       | s.py</em>]{.c004}](https: |                       |
|                       | //thinkpython.com/cod |                       |
|                       | e/anagram_sets.py)<em>.</em> |                       |
|                       | :::                   |                       |
|                       |                       |                       |
|                       | ::: theorem           |                       |
|                       | [Exercise 3]{.c010}   |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1128} |                       |
|                       |                       |                       |
|                       | <em>Two words form a     |                       |
|                       | &quot;metathesis pair&quot; if  |                       |
|                       | you can transform one |                       |
|                       | into the other by     |                       |
|                       | swapping two letters; |                       |
|                       | for example,          |                       |
|                       | &quot;converse&quot; and        |                       |
|                       | &quot;conserve&quot;. Write a   |                       |
|                       | program that finds    |                       |
|                       | all of the metathesis |                       |
|                       | pairs in the          |                       |
|                       | dictionary. Hint:     |                       |
|                       | don't test all pairs  |                       |
|                       | of words, and don't   |                       |
|                       | test all possible     |                       |
|                       | swaps. Solution:</em>     |                       |
|                       | [<em>[https://thinkp     |                       |
|                       | ython.com/code/metath |                       |
|                       | esis.py]{.c004}</em>](htt |                       |
|                       | ps://thinkpython.com/ |                       |
|                       | code/metathesis.py)<em>. |                       |
|                       | Credit: This exercise |                       |
|                       | is inspired by an     |                       |
|                       | example at</em>           |                       |
|                       | [<em>[http://puzz        |                       |
|                       | lers.org]{.c004}</em>](ht |                       |
|                       | tp://puzzlers.org)<em>.</em> |                       |
|                       | :::                   |                       |
|                       |                       |                       |
|                       | ::: theorem           |                       |
|                       | [Exercise 4]{.c010}   |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1129} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1130} |                       |
|                       |                       |                       |
|                       | <em>Here's another Car   |                       |
|                       | Talk Puzzler          |                       |
|                       | (</em>[<em>[http://www       |                       |
|                       | .cartalk.com/content/ |                       |
|                       | puzzlers]{.c004}</em>](ht |                       |
|                       | tp://www.cartalk.com/ |                       |
|                       | content/puzzlers)<em>):</em> |                       |
|                       |                       |                       |
|                       | &gt; <em>What is the        |                       |
|                       | &gt; longest English     |                       |
|                       | &gt; word, that remains  |                       |
|                       | &gt; a valid English     |                       |
|                       | &gt; word, as you remove |                       |
|                       | &gt; its letters one at  |                       |
|                       | &gt; a time?</em>            |                       |
|                       | &gt;                     |                       |
|                       | &gt; <em>Now, letters can   |                       |
|                       | &gt; be removed from     |                       |
|                       | &gt; either end, or the  |                       |
|                       | &gt; middle, but you     |                       |
|                       | &gt; can't rearrange any |                       |
|                       | &gt; of the letters.     |                       |
|                       | &gt; Every time you drop |                       |
|                       | &gt; a letter, you wind  |                       |
|                       | &gt; up with another     |                       |
|                       | &gt; English word. If    |                       |
|                       | &gt; you do that, you're |                       |
|                       | &gt; eventually going to |                       |
|                       | &gt; wind up with one    |                       |
|                       | &gt; letter and that too |                       |
|                       | &gt; is going to be an   |                       |
|                       | &gt; English word---one  |                       |
|                       | &gt; that's found in the |                       |
|                       | &gt; dictionary. I want  |                       |
|                       | &gt; to know what's the  |                       |
|                       | &gt; longest word and    |                       |
|                       | &gt; how many letters    |                       |
|                       | &gt; does it have?</em>      |                       |
|                       | &gt;                     |                       |
|                       | &gt; <em>I'm going to give  |                       |
|                       | &gt; you a little modest |                       |
|                       | &gt; example: Sprite.    |                       |
|                       | &gt; Ok? You start off   |                       |
|                       | &gt; with sprite, you    |                       |
|                       | &gt; take a letter off,  |                       |
|                       | &gt; one from the        |                       |
|                       | &gt; interior of the     |                       |
|                       | &gt; word, take the r    |                       |
|                       | &gt; away, and we're     |                       |
|                       | &gt; left with the word  |                       |
|                       | &gt; spite, then we take |                       |
|                       | &gt; the e off the end,  |                       |
|                       | &gt; we're left with     |                       |
|                       | &gt; spit, we take the s |                       |
|                       | &gt; off, we're left     |                       |
|                       | &gt; with pit, it, and   |                       |
|                       | &gt; I.</em>                 |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1131} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1132} |                       |
|                       |                       |                       |
|                       | <em>Write a program to   |                       |
|                       | find all words that   |                       |
|                       | can be reduced in     |                       |
|                       | this way, and then    |                       |
|                       | find the longest      |                       |
|                       | one.</em>                 |                       |
|                       |                       |                       |
|                       | <em>This exercise is a   |                       |
|                       | little more           |                       |
|                       | challenging than      |                       |
|                       | most, so here are     |                       |
|                       | some suggestions:</em>    |                       |
|                       |                       |                       |
|                       | 1.  <em>You might want   |                       |
|                       |     to write a        |                       |
|                       |     function that     |                       |
|                       |     takes a word and  |                       |
|                       |     computes a list   |                       |
|                       |     of all the words  |                       |
|                       |     that can be       |                       |
|                       |     formed by         |                       |
|                       |     removing one      |                       |
|                       |     letter. These are |                       |
|                       |     the &quot;children&quot; of |                       |
|                       |     the word.</em>        |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1133} |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1134} |                       |
|                       | 2.  <em>Recursively, a   |                       |
|                       |     word is reducible |                       |
|                       |     if any of its     |                       |
|                       |     children are      |                       |
|                       |     reducible. As a   |                       |
|                       |     base case, you    |                       |
|                       |     can consider the  |                       |
|                       |     empty string      |                       |
|                       |     reducible.</em>       |                       |
|                       | 3.  <em>The wordlist I   |                       |
|                       |     provided,         |                       |
|                       |                       |                       |
|                       |   [words.txt]{.c004}, |                       |
|                       |     doesn't contain   |                       |
|                       |     single letter     |                       |
|                       |     words. So you     |                       |
|                       |     might want to add |                       |
|                       |     &quot;I&quot;, &quot;a&quot;, and the |                       |
|                       |     empty string.</em>    |                       |
|                       | 4.  <em>To improve the   |                       |
|                       |     performance of    |                       |
|                       |     your program, you |                       |
|                       |     might want to     |                       |
|                       |     memoize the words |                       |
|                       |     that are known to |                       |
|                       |     be reducible.</em>    |                       |
|                       |                       |                       |
|                       | <em>Solution:</em>           |                       |
|                       | [<em>[https://think      |                       |
|                       | python.com/code/reduc |                       |
|                       | ible.py]{.c004}</em>](htt |                       |
|                       | ps://thinkpython.com/ |                       |
|                       | code/reducible.py)<em>.</em> |                       |
|                       | :::                   |                       |
|                       |                       |                       |
|                       | [Buy this book at     |                       |
|                       | Amazon.com](ht        |                       |
|                       | tp://amzn.to/1VUYQUU) |                       |
+-----------------------+-----------------------+-----------------------+</p>
<hr />
<h2><a href="thinkpython2012.html"><img src="back.png" alt="Previous" /></a>
<a href="index.html"><img src="up.png" alt="Up" /></a> <a href="thinkpython2014.html"><img src="next.png" alt="Next" /></a></h2>
<h2>generator: hevea 2.32
title: &quot;Case study: data structure selection&quot;</h2>
<p><a href="thinkpython2013.html"><img src="back.png" alt="Previous" /></a>
<a href="index.html"><img src="up.png" alt="Up" /></a> <a href="thinkpython2015.html"><img src="next.png" alt="Next" /></a></p>
<hr />
<p>+-----------------------+-----------------------+-----------------------+
|                       | [Buy this book at     | #### Contribute       |
|                       | Amazon.com](ht        |                       |
|                       | tp://amzn.to/1VUYQUU) | If you would like to  |
|                       |                       | make a contribution   |
|                       | # Chap                | to support my books,  |
|                       | ter 13  Case study: d | you can use the       |
|                       | ata structure selecti | button below and pay  |
|                       | on {#sec151 .chapter} | with PayPal. Thank    |
|                       |                       | you!                  |
|                       | At this point you     |                       |
|                       | have learned about    |   -----------         |
|                       | Python's core data    | --------------------- |
|                       | structures, and you   | --------------------- |
|                       | have seen some of the | --------------------- |
|                       | algorithms that use   | --------------------- |
|                       | them. If you would    |   Pay what you want:  |
|                       | like to know more     |   Small $1           |
|                       | about algorithms,     | .00 USD Medium $5.00 |
|                       | this might be a good  |  USD Large $10.00 US |
|                       | time to read          | D X-Large $20.00 USD |
|                       | Cha                   |  XX-Large $50.00 USD |
|                       | pter [B](thinkpython2 |   -----------         |
|                       | 022.html#algorithms). | --------------------- |
|                       | But you don't have to | --------------------- |
|                       | read it before you go | --------------------- |
|                       | on; you can read it   | --------------------- |
|                       | whenever you are      |                       |
|                       | interested.           | ![](                  |
|                       |                       | https://www.paypalobj |
|                       | This chapter presents | ects.com/en_US/i/scr/ |
|                       | a case study with     | pixel.gif){border=&quot;0&quot; |
|                       | exercises that let    | width=&quot;1&quot; height=&quot;1&quot;} |
|                       | you think about       |                       |
|                       | choosing data         | ####                  |
|                       | structures and        | Are you using one of  |
|                       | practice using them.  | our books in a class? |
|                       |                       |                       |
|                       | ## 13.1               | We'd like to know    |
|                       | Word frequency analys | about it. Please      |
|                       | is {#sec152 .section} | consider filling out  |
|                       |                       | [this short           |
|                       | []{#analysis}         | survey](http://s      |
|                       |                       | preadsheets.google.co |
|                       | As usual, you should  | m/viewform?formkey=dC |
|                       | at least attempt the  | 0tNUZkMjBEdXVoRGljNm9 |
|                       | exercises before you  | FRmlTMHc6MA){onclick= |
|                       | read my solutions.    | &quot;javascript: pageTrac |
|                       |                       | ker._trackPageview('/ |
|                       | ::: theorem           | outbound/survey');&quot;}. |
|                       | [Exercise 1]{.c010}   |                       |
|                       |                       | \                     |
|                       | <em>Write a program that |                       |
|                       | reads a file, breaks  | [Think                |
|                       | each line into words, | DSP](http             |
|                       | strips whitespace and | ://www.amazon.com/gp/ |
|                       | punctuation from the  | product/1491938455/re |
|                       | words, and converts   | f=as_li_tl?ie=UTF8&amp;ca |
|                       | them to lowercase.</em>   | mp=1789&amp;creative=9325 |
|                       | [                     | &amp;creativeASIN=1491938 |
|                       | ]{#hevea_default1135} | 455&amp;linkCode=as2&amp;tag= |
|                       | [                     | greenteapre01-20&amp;link |
|                       | ]{#hevea_default1136} | Id=2JJH4SWCAVVYSQHO){ |
|                       |                       | rel=&quot;nofollow&quot;}![](ht |
|                       | <em>Hint: The            | tp://ir-na.amazon-ads |
|                       | [string]{.c004}       | ystem.com/e/ir?t=gree |
|                       | module provides a     | nteapre01-20&amp;l=as2&amp;o= |
|                       | string named          | 1&amp;a=1491938455){.c003 |
|                       | [whitespace]{.c004},  | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | which contains space, | border=&quot;0&quot;}           |
|                       | tab, newline, etc.,   |                       |
|                       | and                   | [                     |
|                       | [punctuation]{.c004}  | ![](http://ws-na.amaz |
|                       | which contains the    | on-adsystem.com/widge |
|                       | punctuation           | ts/q?_encoding=UTF8&amp;A |
|                       | characters. Let's see | SIN=1491938455&amp;Format |
|                       | if we can make Python | =<em>SL160</em>&amp;ID=AsinImage |
|                       | swear:</em>               | &amp;MarketPlace=US&amp;Servi |
|                       |                       | ceVersion=20070822&amp;WS |
|                       | <code>verbatim          | =1&amp;tag=greenteapre01- | |                       | &gt;&gt;&gt; import string     | 20){border=&quot;0&quot;}](http | |                       | &gt;                     | ://www.amazon.com/gp/ | |                       | &gt;&gt; string.punctuation | product/1491938455/re | |                       | '!&quot;#$%&amp;'()*+,-       | f=as_li_tl?ie=UTF8&amp;ca | |                       | ./:;&lt;=&gt;?@[\]^_`{|}~' | mp=1789&amp;creative=9325 | |                       |</code>                   | &amp;creativeASIN=1491938 |
|                       |                       | 455&amp;linkCode=as2&amp;tag= |
|                       | <em>Also, you might      | greenteapre01-20&amp;link |
|                       | consider using the    | Id=CTV7PDT7E5EGGJUM){ |
|                       | string methods        | rel=&quot;nofollow&quot;}![](ht |
|                       | [strip]{.c004},       | tp://ir-na.amazon-ads |
|                       | [replace]{.c004} and  | ystem.com/e/ir?t=gree |
|                       | [translate]{.c004}.</em>  | nteapre01-20&amp;l=as2&amp;o= |
|                       | [                     | 1&amp;a=1491938455){.c003 |
|                       | ]{#hevea_default1137} | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | [                     | border=&quot;0&quot;}           |
|                       | ]{#hevea_default1138} |                       |
|                       | [                     | [Think                |
|                       | ]{#hevea_default1139} | Java](http            |
|                       | [                     | ://www.amazon.com/gp/ |
|                       | ]{#hevea_default1140} | product/1491929561/re |
|                       | [                     | f=as_li_tl?ie=UTF8&amp;ca |
|                       | ]{#hevea_default1141} | mp=1789&amp;creative=9325 |
|                       | [                     | &amp;creativeASIN=1491929 |
|                       | ]{#hevea_default1142} | 561&amp;linkCode=as2&amp;tag= |
|                       | :::                   | greenteapre01-20&amp;link |
|                       |                       | Id=ZY6MAYM33ZTNSCNZ){ |
|                       | ::: theorem           | rel=&quot;nofollow&quot;}![](ht |
|                       | [Exercise 2]{.c010}   | tp://ir-na.amazon-ads |
|                       | [                     | ystem.com/e/ir?t=gree |
|                       | ]{#hevea_default1143} | nteapre01-20&amp;l=as2&amp;o= |
|                       |                       | 1&amp;a=1491929561){.c003 |
|                       | <em>Go to Project        | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | Gutenberg             | border=&quot;0&quot;}           |
|                       | (</em>[[<em>http://guten     |                       |
|                       | berg.org</em>]{.c004}](ht | [                     |
|                       | tp://gutenberg.org)<em>) | ![](http://ws-na.amaz |
|                       | and download your     | on-adsystem.com/widge |
|                       | favorite              | ts/q?_encoding=UTF8&amp;A |
|                       | out-of-copyright book | SIN=1491929561&amp;Format |
|                       | in plain text         | =<em>SL160</em>&amp;ID=AsinImage |
|                       | format.</em>              | &amp;MarketPlace=US&amp;Servi |
|                       | [                     | ceVersion=20070822&amp;WS |
|                       | ]{#hevea_default1144} | =1&amp;tag=greenteapre01- |
|                       | [                     | 20){border=&quot;0&quot;}](http |
|                       | ]{#hevea_default1145} | ://www.amazon.com/gp/ |
|                       |                       | product/1491929561/re |
|                       | <em>Modify your program  | f=as_li_tl?ie=UTF8&amp;ca |
|                       | from the previous     | mp=1789&amp;creative=9325 |
|                       | exercise to read the  | &amp;creativeASIN=1491929 |
|                       | book you downloaded,  | 561&amp;linkCode=as2&amp;tag= |
|                       | skip over the header  | greenteapre01-20&amp;link |
|                       | information at the    | Id=PT77ANWARUNNU3UK){ |
|                       | beginning of the      | rel=&quot;nofollow&quot;}![](ht |
|                       | file, and process the | tp://ir-na.amazon-ads |
|                       | rest of the words as  | ystem.com/e/ir?t=gree |
|                       | before.</em>              | nteapre01-20&amp;l=as2&amp;o= |
|                       |                       | 1&amp;a=1491929561){.c003 |
|                       | <em>Then modify the      | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | program to count the  | border=&quot;0&quot;}           |
|                       | total number of words |                       |
|                       | in the book, and the  | [Think                |
|                       | number of times each  | Bay                   |
|                       | word is used.</em>        | es](http://www.amazon |
|                       | [                     | .com/gp/product/14493 |
|                       | ]{#hevea_default1146} | 70780/ref=as_li_qf_sp |
|                       | [                     | _asin_tl?ie=UTF8&amp;camp |
|                       | ]{#hevea_default1147} | =1789&amp;creative=9325&amp;c |
|                       |                       | reativeASIN=144937078 |
|                       | <em>Print the number of  | 0&amp;linkCode=as2&amp;tag=gr |
|                       | different words used  | eenteapre01-20)![](ht |
|                       | in the book. Compare  | tp://ir-na.amazon-ads |
|                       | different books by    | ystem.com/e/ir?t=gree |
|                       | different authors,    | nteapre01-20&amp;l=as2&amp;o= |
|                       | written in different  | 1&amp;a=1449370780){.c003 |
|                       | eras. Which author    | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | uses the most         | border=&quot;0&quot;}           |
|                       | extensive             |                       |
|                       | vocabulary?</em>          | [![](http://ws        |
|                       | :::                   | -na.amazon-adsystem.c |
|                       |                       | om/widgets/q?_encodin |
|                       | ::: theorem           | g=UTF8&amp;ASIN=144937078 |
|                       | [Exercise 3]{.c010}   | 0&amp;Format=<em>SL160</em>&amp;ID=A |
|                       |                       | sinImage&amp;MarketPlace= |
|                       | <em>Modify the program   | US&amp;ServiceVersion=200 |
|                       | from the previous     | 70822&amp;WS=1&amp;tag=greent |
|                       | exercise to print the | eapre01-20){border=&quot;0 |
|                       | 20 most frequently    | &quot;}](http://www.amazon |
|                       | used words in the     | .com/gp/product/14493 |
|                       | book.</em>                | 70780/ref=as_li_qf_sp |
|                       | :::                   | _asin_il?ie=UTF8&amp;camp |
|                       |                       | =1789&amp;creative=9325&amp;c |
|                       | ::: theorem           | reativeASIN=144937078 |
|                       | [Exercise 4]{.c010}   | 0&amp;linkCode=as2&amp;tag=gr |
|                       |                       | eenteapre01-20)![](ht |
|                       | <em>Modify the previous  | tp://ir-na.amazon-ads |
|                       | program to read a     | ystem.com/e/ir?t=gree |
|                       | word list (see        | nteapre01-20&amp;l=as2&amp;o= |
|                       | Section               | 1&amp;a=1449370780){.c003 |
|                       |  <em>[<em>9.1</em>](thinkpython | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | 2010.html#wordlist)</em>) | border=&quot;0&quot;}           |
|                       | and then print all    |                       |
|                       | the words in the book | [Think Python         |
|                       | that are not in the   | 2e](http              |
|                       | word list. How many   | ://www.amazon.com/gp/ |
|                       | of them are typos?    | product/1491939362/re |
|                       | How many of them are  | f=as_li_tl?ie=UTF8&amp;ca |
|                       | common words that</em>    | mp=1789&amp;creative=9325 |
|                       | should <em>be in the     | &amp;creativeASIN=1491939 |
|                       | word list, and how    | 362&amp;linkCode=as2&amp;tag= |
|                       | many of them are      | greenteapre01-20&amp;link |
|                       | really obscure?</em>      | Id=FJKSQ3IHEMY2F2VA){ |
|                       | :::                   | rel=&quot;nofollow&quot;}![](ht |
|                       |                       | tp://ir-na.amazon-ads |
|                       | ## 13.2  Random numbe | ystem.com/e/ir?t=gree |
|                       | rs {#sec153 .section} | nteapre01-20&amp;l=as2&amp;o= |
|                       |                       | 1&amp;a=1491939362){.c003 |
|                       | [                     | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | ]{#hevea_default1148} | border=&quot;0&quot;}           |
|                       | [                     |                       |
|                       | ]{#hevea_default1149} | [                     |
|                       | [                     | ![](http://ws-na.amaz |
|                       | ]{#hevea_default1150} | on-adsystem.com/widge |
|                       | [                     | ts/q?<em>encoding=UTF8&amp;A |
|                       | ]{#hevea_default1151} | SIN=1491939362&amp;Format |
|                       |                       | =<em>SL160</em>&amp;ID=AsinImage |
|                       | Given the same        | &amp;MarketPlace=US&amp;Servi |
|                       | inputs, most computer | ceVersion=20070822&amp;WS |
|                       | programs generate the | =1&amp;tag=greenteapre01- |
|                       | same outputs every    | 20){border=&quot;0&quot;}](http |
|                       | time, so they are     | ://www.amazon.com/gp/ |
|                       | said to be            | product/1491939362/re |
|                       | [d                    | f=as_li_tl?ie=UTF8&amp;ca |
|                       | eterministic]{.c010}. | mp=1789&amp;creative=9325 |
|                       | Determinism is        | &amp;creativeASIN=1491939 |
|                       | usually a good thing, | 362&amp;linkCode=as2&amp;tag= |
|                       | since we expect the   | greenteapre01-20&amp;link |
|                       | same calculation to   | Id=ZZ454DLQ3IXDHNHX){ |
|                       | yield the same        | rel=&quot;nofollow&quot;}![](ht |
|                       | result. For some      | tp://ir-na.amazon-ads |
|                       | applications, though, | ystem.com/e/ir?t=gree |
|                       | we want the computer  | nteapre01-20&amp;l=as2&amp;o= |
|                       | to be unpredictable.  | 1&amp;a=1491939362){.c003 |
|                       | Games are an obvious  | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | example, but there    | border=&quot;0&quot;}           |
|                       | are more.             |                       |
|                       |                       | [Think Stats          |
|                       | Making a program      | 2e](http://ww         |
|                       | truly                 | w.amazon.com/gp/produ |
|                       | nondeterministic      | ct/1491907339/ref=as</em> |
|                       | turns out to be       | li_tl?ie=UTF8&amp;camp=17 |
|                       | difficult, but there  | 89&amp;creative=9325&amp;crea |
|                       | are ways to make it   | tiveASIN=1491907339&amp;l |
|                       | at least seem         | inkCode=as2&amp;tag=green |
|                       | nondeterministic. One | teapre01-20&amp;linkId=O7 |
|                       | of them is to use     | WYM6H6YBYUFNWU)![](ht |
|                       | algorithms that       | tp://ir-na.amazon-ads |
|                       | generate              | ystem.com/e/ir?t=gree |
|                       | [pseudorandom]{.c010} | nteapre01-20&amp;l=as2&amp;o= |
|                       | numbers. Pseudorandom | 1&amp;a=1491907339){.c003 |
|                       | numbers are not truly | width=&quot;1&quot; height=&quot;1&quot;  |
|                       | random because they   | border=&quot;0&quot;}           |
|                       | are generated by a    |                       |
|                       | deterministic         | [![](h                |
|                       | computation, but just | ttp://ws-na.amazon-ad |
|                       | by looking at the     | system.com/widgets/q? |
|                       | numbers it is all but | <em>encoding=UTF8&amp;ASIN=1 |
|                       | impossible to         | 491907339&amp;Format=<em>SL1 |
|                       | distinguish them from | 60</em>&amp;ID=AsinImage&amp;Mark |
|                       | random.               | etPlace=US&amp;ServiceVer |
|                       | [                     | sion=20070822&amp;WS=1&amp;ta |
|                       | ]{#hevea_default1152} | g=greenteapre01-20){b |
|                       | [                     | order=&quot;0&quot;}](http://ww |
|                       | ]{#hevea_default1153} | w.amazon.com/gp/produ |
|                       |                       | ct/1491907339/ref=as</em> |
|                       | The [random]{.c004}   | li_tl?ie=UTF8&amp;camp=17 |
|                       | module provides       | 89&amp;creative=9325&amp;crea |
|                       | functions that        | tiveASIN=1491907339&amp;l |
|                       | generate pseudorandom | inkCode=as2&amp;tag=green |
|                       | numbers (which I will | teapre01-20&amp;linkId=JV |
|                       | simply call &quot;random&quot;  | SYKQHYSUIEYRHL)![](ht |
|                       | from here on).        | tp://ir-na.amazon-ads |
|                       | [                     | ystem.com/e/ir?t=gree |
|                       | ]{#hevea_default1154} | nteapre01-20&amp;l=as2&amp;o= |
|                       | [                     | 1&amp;a=1491907339){.c003 |
|                       | ]{#hevea_default1155} | width=&quot;1&quot; height=&quot;1&quot;  |
|                       |                       | border=&quot;0&quot;}           |
|                       | The function          |                       |
|                       | [random]{.c004}       | [Think                |
|                       | returns a random      | Complexity](http      |
|                       | float between 0.0 and | ://www.amazon.com/gp/ |
|                       | 1.0 (including 0.0    | product/1449314635/re |
|                       | but not 1.0). Each    | f=as_li_tf_tl?ie=UTF8 |
|                       | time you call         | &amp;tag=greenteapre01-20 |
|                       | [random]{.c004}, you  | &amp;linkCode=as2&amp;camp=17 |
|                       | get the next number   | 89&amp;creative=9325&amp;crea |
|                       | in a long series. To  | tiveASIN=1449314635)! |
|                       | see a sample, run     | [](http://www.assoc-a |
|                       | this loop:            | mazon.com/e/ir?t=gree |
|                       |                       | nteapre01-20&amp;l=as2&amp;o= |
|                       | <code>verbatim          | 1&amp;a=1449314635){.c003 | |                       | import random         | width=&quot;1&quot; height=&quot;1&quot;  | |                       |                       | border=&quot;0&quot;}           | |                       | for i in range(10):   |                       | |                       |                       | [                     | |                       |   x = random.random() | ![](http://ws-na.amaz | |                       |     print(x)          | on-adsystem.com/widge | |                       |</code>                   | ts/q?_encoding=UTF8&amp;A |
|                       |                       | SIN=1449314635&amp;Format |
|                       | The function          | =<em>SL160</em>&amp;ID=AsinImage |
|                       | [randint]{.c004}      | &amp;MarketPlace=US&amp;Servi |
|                       | takes parameters      | ceVersion=20070822&amp;WS |
|                       | [low]{.c004} and      | =1&amp;tag=greenteapre01- |
|                       | [high]{.c004} and     | 20){border=&quot;0&quot;}](http |
|                       | returns an integer    | ://www.amazon.com/gp/ |
|                       | between [low]{.c004}  | product/1449314635/re |
|                       | and [high]{.c004}     | f=as_li_tf_il?ie=UTF8 |
|                       | (including both).     | &amp;camp=1789&amp;creative=9 |
|                       | [                     | 325&amp;creativeASIN=1449 |
|                       | ]{#hevea_default1156} | 314635&amp;linkCode=as2&amp;t |
|                       | [                     | ag=greenteapre01-20)! |
|                       | ]{#hevea_default1157} | [](http://www.assoc-a |
|                       |                       | mazon.com/e/ir?t=gree |
|                       | <code>verbatim          | nteapre01-20&amp;l=as2&amp;o= | |                       | &gt;&gt;&gt;                   | 1&amp;a=1449314635){.c003 | |                       | random.randint(5, 10) | width=&quot;1&quot; height=&quot;1&quot;  | |                       | 5                     | border=&quot;0&quot;}           | |                       | &gt;&gt;&gt;                   |                       | |                       | random.randint(5, 10) |                       | |                       | 9                     |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | To choose an element  |                       |
|                       | from a sequence at    |                       |
|                       | random, you can use   |                       |
|                       | [choice]{.c004}:      |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1158} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1159} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;&gt; t = [1, 2, 3]     |                       | |                       | &gt;&gt;&gt; random.choice(t)  |                       | |                       | 2                     |                       | |                       | &gt;&gt;&gt; random.choice(t)  |                       | |                       | 3                     |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The [random]{.c004}   |                       |
|                       | module also provides  |                       |
|                       | functions to generate |                       |
|                       | random values from    |                       |
|                       | continuous            |                       |
|                       | distributions         |                       |
|                       | including Gaussian,   |                       |
|                       | exponential, gamma,   |                       |
|                       | and a few more.       |                       |
|                       |                       |                       |
|                       | ::: theorem           |                       |
|                       | [Exercise 5]{.c010}   |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1160} |                       |
|                       |                       |                       |
|                       | <em>Write a function     |                       |
|                       | named                 |                       |
|                       | <code>choose_from_hist</code>    |                       |
|                       | that takes a          |                       |
|                       | histogram as defined  |                       |
|                       | in                    |                       |
|                       | Section               |                       |
|                       |  <em>[<em>11.2</em>](thinkpytho |                       |
|                       | n2012.html#histogram) |                       |
|                       | <em>and returns a random |                       |
|                       | value from the        |                       |
|                       | histogram, chosen     |                       |
|                       | with probability in   |                       |
|                       | proportion to         |                       |
|                       | frequency. For        |                       |
|                       | example, for this     |                       |
|                       | histogram:</em>           |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | &gt;&gt;                    |                       | |                       | &gt; t = ['a', 'a', 'b'] |                       | |                       | &gt;&gt;                    |                       | |                       | &gt; hist = histogram(t) |                       | |                       | &gt;&gt;&gt; hist              |                       | |                       | {'a': 2, 'b': 1}      |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | <em>your function should |                       |
|                       | return <code>'a'</code> with     |                       |
|                       | probability</em> 2/3 <em>and |                       |
|                       | <code>'b'</code> with            |                       |
|                       | probability</em> 1/3</em>.</em>   |                       |
|                       | :::                   |                       |
|                       |                       |                       |
|                       | ## 13.3  Word histogr |                       |
|                       | am {#sec154 .section} |                       |
|                       |                       |                       |
|                       | You should attempt    |                       |
|                       | the previous          |                       |
|                       | exercises before you  |                       |
|                       | go on. You can        |                       |
|                       | download my solution  |                       |
|                       | from                  |                       |
|                       | [[https://thinkpytho  |                       |
|                       | n.com/code/analyze_bo |                       |
|                       | ok1.py]{.c004}](https |                       |
|                       | ://thinkpython.com/co |                       |
|                       | de/analyze_book1.py). |                       |
|                       | You will also need    |                       |
|                       | [[ht                  |                       |
|                       | tps://thinkpython.com |                       |
|                       | /code/emma.txt]{.c004 |                       |
|                       | }](https://thinkpytho |                       |
|                       | n.com/code/emma.txt). |                       |
|                       |                       |                       |
|                       | Here is a program     |                       |
|                       | that reads a file and |                       |
|                       | builds a histogram of |                       |
|                       | the words in the      |                       |
|                       | file:                 |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1161} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | import string         |                       | |                       |                       |                       | |                       | def pr                |                       | |                       | ocess_file(filename): |                       | |                       |     hist = dict()     |                       | |                       |                       |                       | |                       |   fp = open(filename) |                       | |                       |     for line in fp:   |                       | |                       |         pro           |                       | |                       | cess_line(line, hist) |                       | |                       |     return hist       |                       | |                       |                       |                       | |                       | def proc              |                       | |                       | ess_line(line, hist): |                       | |                       |     line = l          |                       | |                       | ine.replace('-', ' ') |                       | |                       |                       |                       | |                       |     for               |                       | |                       | word in line.split(): |                       | |                       |                       |                       | |                       |       word = word.str |                       | |                       | ip(string.punctuation |                       | |                       |  + string.whitespace) |                       | |                       |                       |                       | |                       |   word = word.lower() |                       | |                       |         hist[word] =  |                       | |                       | hist.get(word, 0) + 1 |                       | |                       |                       |                       | |                       | hist = pro            |                       | |                       | cess_file('emma.txt') |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | This program reads    |                       |
|                       | [emma.txt]{.c004},    |                       |
|                       | which contains the    |                       |
|                       | text of <em>Emma</em> by     |                       |
|                       | Jane Austen.          |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1162} |                       |
|                       |                       |                       |
|                       | <code>process_file</code> loops  |                       |
|                       | through the lines of  |                       |
|                       | the file, passing     |                       |
|                       | them one at a time to |                       |
|                       | <code>process_line</code>. The   |                       |
|                       | histogram             |                       |
|                       | [hist]{.c004} is      |                       |
|                       | being used as an      |                       |
|                       | accumulator.          |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1163} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1164} |                       |
|                       |                       |                       |
|                       | <code>process_line</code> uses   |                       |
|                       | the string method     |                       |
|                       | [replace]{.c004} to   |                       |
|                       | replace hyphens with  |                       |
|                       | spaces before using   |                       |
|                       | [split]{.c004} to     |                       |
|                       | break the line into a |                       |
|                       | list of strings. It   |                       |
|                       | traverses the list of |                       |
|                       | words and uses        |                       |
|                       | [strip]{.c004} and    |                       |
|                       | [lower]{.c004} to     |                       |
|                       | remove punctuation    |                       |
|                       | and convert to lower  |                       |
|                       | case. (It is a        |                       |
|                       | shorthand to say that |                       |
|                       | strings are           |                       |
|                       | &quot;converted&quot;; remember |                       |
|                       | that strings are      |                       |
|                       | immutable, so methods |                       |
|                       | like [strip]{.c004}   |                       |
|                       | and [lower]{.c004}    |                       |
|                       | return new strings.)  |                       |
|                       |                       |                       |
|                       | Finally,              |                       |
|                       | <code>process_line</code>        |                       |
|                       | updates the histogram |                       |
|                       | by creating a new     |                       |
|                       | item or incrementing  |                       |
|                       | an existing one.      |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1165} |                       |
|                       |                       |                       |
|                       | To count the total    |                       |
|                       | number of words in    |                       |
|                       | the file, we can add  |                       |
|                       | up the frequencies in |                       |
|                       | the histogram:        |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | d                     |                       | |                       | ef total_words(hist): |                       | |                       |     retu              |                       | |                       | rn sum(hist.values()) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The number of         |                       |
|                       | different words is    |                       |
|                       | just the number of    |                       |
|                       | items in the          |                       |
|                       | dictionary:           |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | def d                 |                       | |                       | ifferent_words(hist): |                       | |                       |     return len(hist)  |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Here is some code to  |                       |
|                       | print the results:    |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | print('T              |                       | |                       | otal number of words: |                       | |                       | ', total_words(hist)) |                       | |                       | print('Number of      |                       | |                       |  different words:', d |                       | |                       | ifferent_words(hist)) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | And the results:      |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | Total nu              |                       | |                       | mber of words: 161080 |                       | |                       | Number of             |                       | |                       | different words: 7214 |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | ##                    |                       |
|                       | 13.4  Most common wor |                       |
|                       | ds {#sec155 .section} |                       |
|                       |                       |                       |
|                       | To find the most      |                       |
|                       | common words, we can  |                       |
|                       | make a list of        |                       |
|                       | tuples, where each    |                       |
|                       | tuple contains a word |                       |
|                       | and its frequency,    |                       |
|                       | and sort it.          |                       |
|                       |                       |                       |
|                       | The following         |                       |
|                       | function takes a      |                       |
|                       | histogram and returns |                       |
|                       | a list of             |                       |
|                       | word-frequency        |                       |
|                       | tuples:               |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | d                     |                       | |                       | ef most_common(hist): |                       | |                       |     t = []            |                       | |                       |     for key, v        |                       | |                       | alue in hist.items(): |                       | |                       |         t             |                       | |                       | .append((value, key)) |                       | |                       |                       |                       | |                       |                       |                       | |                       |  t.sort(reverse=True) |                       | |                       |     return t          |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | In each tuple, the    |                       |
|                       | frequency appears     |                       |
|                       | first, so the         |                       |
|                       | resulting list is     |                       |
|                       | sorted by frequency.  |                       |
|                       | Here is a loop that   |                       |
|                       | prints the ten most   |                       |
|                       | common words:         |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | t = most_common(hist) |                       | |                       | print('The mos        |                       | |                       | t common words are:') |                       | |                       | for                   |                       | |                       | freq, word in t[:10]: |                       | |                       |     print(            |                       | |                       | word, freq, sep='\t') |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | I use the keyword     |                       |
|                       | argument [sep]{.c004} |                       |
|                       | to tell               |                       |
|                       | [print]{.c004} to use |                       |
|                       | a tab character as a  |                       |
|                       | &quot;separator&quot;, rather   |                       |
|                       | than a space, so the  |                       |
|                       | second column is      |                       |
|                       | lined up. Here are    |                       |
|                       | the results from      |                       |
|                       | <em>Emma</em>:               |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | The m                 |                       | |                       | ost common words are: |                       | |                       | to      5242          |                       | |                       | the     5205          |                       | |                       | and     4897          |                       | |                       | of      4295          |                       | |                       | i       3191          |                       | |                       | a       3130          |                       | |                       | it      2529          |                       | |                       | her     2483          |                       | |                       | was     2400          |                       | |                       | she     2364          |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | This code can be      |                       |
|                       | simplified using the  |                       |
|                       | [key]{.c004}          |                       |
|                       | parameter of the      |                       |
|                       | [sort]{.c004}         |                       |
|                       | function. If you are  |                       |
|                       | curious, you can read |                       |
|                       | about it at           |                       |
|                       | [[https://wiki        |                       |
|                       | .python.org/moin/HowT |                       |
|                       | o/Sorting]{.c004}](ht |                       |
|                       | tps://wiki.python.org |                       |
|                       | /moin/HowTo/Sorting). |                       |
|                       |                       |                       |
|                       | ## 13                 |                       |
|                       | .5  Optional paramete |                       |
|                       | rs {#sec156 .section} |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1166} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1167} |                       |
|                       |                       |                       |
|                       | We have seen built-in |                       |
|                       | functions and methods |                       |
|                       | that take optional    |                       |
|                       | arguments. It is      |                       |
|                       | possible to write     |                       |
|                       | programmer-defined    |                       |
|                       | functions with        |                       |
|                       | optional arguments,   |                       |
|                       | too. For example,     |                       |
|                       | here is a function    |                       |
|                       | that prints the most  |                       |
|                       | common words in a     |                       |
|                       | histogram             |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1168} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1169} |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | def print_most_       |                       | |                       | common(hist, num=10): |                       | |                       |                       |                       | |                       | t = most_common(hist) |                       | |                       |     print('The mos    |                       | |                       | t common words are:') |                       | |                       |     for f             |                       | |                       | req, word in t[:num]: |                       | |                       |         print(        |                       | |                       | word, freq, sep='\t') |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The first parameter   |                       |
|                       | is required; the      |                       |
|                       | second is optional.   |                       |
|                       | The [default          |                       |
|                       | value]{.c010} of      |                       |
|                       | [num]{.c004} is 10.   |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1170} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1171} |                       |
|                       |                       |                       |
|                       | If you only provide   |                       |
|                       | one argument:         |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | pr                    |                       | |                       | int_most_common(hist) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | [num]{.c004} gets the |                       |
|                       | default value. If you |                       |
|                       | provide two           |                       |
|                       | arguments:            |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | print_                |                       | |                       | most_common(hist, 20) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | [num]{.c004} gets the |                       |
|                       | value of the argument |                       |
|                       | instead. In other     |                       |
|                       | words, the optional   |                       |
|                       | argument              |                       |
|                       | [overrides]{.c010}    |                       |
|                       | the default value.    |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1172} |                       |
|                       |                       |                       |
|                       | If a function has     |                       |
|                       | both required and     |                       |
|                       | optional parameters,  |                       |
|                       | all the required      |                       |
|                       | parameters have to    |                       |
|                       | come first, followed  |                       |
|                       | by the optional ones. |                       |
|                       |                       |                       |
|                       | ## 13.6               |                       |
|                       |  Dictionary subtracti |                       |
|                       | on {#sec157 .section} |                       |
|                       |                       |                       |
|                       | []{#dictsub}          |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1173} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1174} |                       |
|                       |                       |                       |
|                       | Finding the words     |                       |
|                       | from the book that    |                       |
|                       | are not in the word   |                       |
|                       | list from             |                       |
|                       | [words.txt]{.c004} is |                       |
|                       | a problem you might   |                       |
|                       | recognize as set      |                       |
|                       | subtraction; that is, |                       |
|                       | we want to find all   |                       |
|                       | the words from one    |                       |
|                       | set (the words in the |                       |
|                       | book) that are not in |                       |
|                       | the other (the words  |                       |
|                       | in the list).         |                       |
|                       |                       |                       |
|                       | [subtract]{.c004}     |                       |
|                       | takes dictionaries    |                       |
|                       | [d1]{.c004} and       |                       |
|                       | [d2]{.c004} and       |                       |
|                       | returns a new         |                       |
|                       | dictionary that       |                       |
|                       | contains all the keys |                       |
|                       | from [d1]{.c004} that |                       |
|                       | are not in            |                       |
|                       | [d2]{.c004}. Since we |                       |
|                       | don't really care     |                       |
|                       | about the values, we  |                       |
|                       | set them all to None. |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | def subtract(d1, d2): |                       | |                       |     res = dict()      |                       | |                       |     for key in d1:    |                       | |                       |                       |                       | |                       |     if key not in d2: |                       | |                       |                       |                       | |                       |       res[key] = None |                       | |                       |     return res        |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | To find the words in  |                       |
|                       | the book that are not |                       |
|                       | in                    |                       |
|                       | [words.txt]{.c004},   |                       |
|                       | we can use            |                       |
|                       | <code>process_file</code> to     |                       |
|                       | build a histogram for |                       |
|                       | [words.txt]{.c004},   |                       |
|                       | and then subtract:    |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | words = proc          |                       | |                       | ess_file('words.txt') |                       | |                       | diff =                |                       | |                       | subtract(hist, words) |                       | |                       |                       |                       | |                       | print(&quot;Words i        |                       | |                       | n the book that aren' |                       | |                       | t in the word list:&quot;) |                       | |                       | for word in diff:     |                       | |                       |                       |                       | |                       |  print(word, end=' ') |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Here are some of the  |                       |
|                       | results from <em>Emma</em>:  |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | Words                 |                       | |                       |  in the book that are |                       | |                       | n't in the word list: |                       | |                       | rencontre j           |                       | |                       | ane's blanche woodhou |                       | |                       | ses disingenuousness  |                       | |                       | friend's              |                       | |                       |  venice apartment ... |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | Some of these words   |                       |
|                       | are names and         |                       |
|                       | possessives. Others,  |                       |
|                       | like &quot;rencontre&quot;, are |                       |
|                       | no longer in common   |                       |
|                       | use. But a few are    |                       |
|                       | common words that     |                       |
|                       | should really be in   |                       |
|                       | the list!             |                       |
|                       |                       |                       |
|                       | ::: theorem           |                       |
|                       | [Exercise 6]{.c010}   |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1175} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1176} |                       |
|                       |                       |                       |
|                       | <em>Python provides a    |                       |
|                       | data structure called |                       |
|                       | [set]{.c004} that     |                       |
|                       | provides many common  |                       |
|                       | set operations. You   |                       |
|                       | can read about them   |                       |
|                       | in                    |                       |
|                       | Sect                  |                       |
|                       | ion <em>[<em>19.5</em>](thinkpy |                       |
|                       | thon2020.html#sets)</em>, |                       |
|                       | or read the           |                       |
|                       | documentation at</em>     |                       |
|                       | [[<em>h                  |                       |
|                       | ttp://docs.python.org |                       |
|                       | /3/library/stdtypes.h |                       |
|                       | tml#types-set</em>]{.c004 |                       |
|                       | }](http://docs.python |                       |
|                       | .org/3/library/stdtyp |                       |
|                       | es.html#types-set)<em>.</em> |                       |
|                       |                       |                       |
|                       | <em>Write a program that |                       |
|                       | uses set subtraction  |                       |
|                       | to find words in the  |                       |
|                       | book that are not in  |                       |
|                       | the word list.        |                       |
|                       | Solution:</em>            |                       |
|                       | [<em>[                   |                       |
|                       | https://thinkpython.c |                       |
|                       | om/code/analyze_book2 |                       |
|                       | .py]{.c004}</em>](https:/ |                       |
|                       | /thinkpython.com/code |                       |
|                       | /analyze_book2.py)<em>.</em> |                       |
|                       | :::                   |                       |
|                       |                       |                       |
|                       | ## 13.7  Random wor   |                       |
|                       | ds {#sec158 .section} |                       |
|                       |                       |                       |
|                       | []{#randomwords}      |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1177} |                       |
|                       |                       |                       |
|                       | To choose a random    |                       |
|                       | word from the         |                       |
|                       | histogram, the        |                       |
|                       | simplest algorithm is |                       |
|                       | to build a list with  |                       |
|                       | multiple copies of    |                       |
|                       | each word, according  |                       |
|                       | to the observed       |                       |
|                       | frequency, and then   |                       |
|                       | choose from the list: |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | def random_word(h):   |                       | |                       |     t = []            |                       | |                       |     for wor           |                       | |                       | d, freq in h.items(): |                       | |                       |         t.            |                       | |                       | extend([word] * freq) |                       | |                       |                       |                       | |                       |     re                |                       | |                       | turn random.choice(t) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | The expression        |                       |
|                       | [[word] *          |                       |
|                       | freq]{.c004} creates  |                       |
|                       | a list with           |                       |
|                       | [freq]{.c004} copies  |                       |
|                       | of the string         |                       |
|                       | [word]{.c004}. The    |                       |
|                       | [extend]{.c004}       |                       |
|                       | method is similar to  |                       |
|                       | [append]{.c004}       |                       |
|                       | except that the       |                       |
|                       | argument is a         |                       |
|                       | sequence.             |                       |
|                       |                       |                       |
|                       | This algorithm works, |                       |
|                       | but it is not very    |                       |
|                       | efficient; each time  |                       |
|                       | you choose a random   |                       |
|                       | word, it rebuilds the |                       |
|                       | list, which is as big |                       |
|                       | as the original book. |                       |
|                       | An obvious            |                       |
|                       | improvement is to     |                       |
|                       | build the list once   |                       |
|                       | and then make         |                       |
|                       | multiple selections,  |                       |
|                       | but the list is still |                       |
|                       | big.                  |                       |
|                       |                       |                       |
|                       | An alternative is:    |                       |
|                       |                       |                       |
|                       | 1.  Use [keys]{.c004} |                       |
|                       |     to get a list of  |                       |
|                       |     the words in the  |                       |
|                       |     book.             |                       |
|                       | 2.  Build a list that |                       |
|                       |     contains the      |                       |
|                       |     cumulative sum of |                       |
|                       |     the word          |                       |
|                       |     frequencies (see  |                       |
|                       |     Exerc             |                       |
|                       | ise [2](thinkpython20 |                       |
|                       | 11.html#cumulative)). |                       |
|                       |     The last item in  |                       |
|                       |     this list is the  |                       |
|                       |     total number of   |                       |
|                       |     words in the      |                       |
|                       |     book, [n]{.c009}. |                       |
|                       | 3.  Choose a random   |                       |
|                       |     number from 1 to  |                       |
|                       |     [n]{.c009}. Use a |                       |
|                       |     bisection search  |                       |
|                       |     (See              |                       |
|                       |     Exer              |                       |
|                       | cise [10](thinkpython |                       |
|                       | 2011.html#bisection)) |                       |
|                       |     to find the index |                       |
|                       |     where the random  |                       |
|                       |     number would be   |                       |
|                       |     inserted in the   |                       |
|                       |     cumulative sum.   |                       |
|                       | 4.  Use the index to  |                       |
|                       |     find the          |                       |
|                       |     corresponding     |                       |
|                       |     word in the word  |                       |
|                       |     list.             |                       |
|                       |                       |                       |
|                       | ::: theorem           |                       |
|                       | [Exercise 7]{.c010}   |                       |
|                       | []{#randhist}         |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1178} |                       |
|                       |                       |                       |
|                       | <em>Write a program that |                       |
|                       | uses this algorithm   |                       |
|                       | to choose a random    |                       |
|                       | word from the book.   |                       |
|                       | Solution:</em>            |                       |
|                       | [<em>[                   |                       |
|                       | https://thinkpython.c |                       |
|                       | om/code/analyze_book3 |                       |
|                       | .py]{.c004}</em>](https:/ |                       |
|                       | /thinkpython.com/code |                       |
|                       | /analyze_book3.py)<em>.</em> |                       |
|                       | :::                   |                       |
|                       |                       |                       |
|                       | #                     |                       |
|                       | # 13.8  Markov analys |                       |
|                       | is {#sec159 .section} |                       |
|                       |                       |                       |
|                       | []{#markov}           |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1179} |                       |
|                       |                       |                       |
|                       | If you choose words   |                       |
|                       | from the book at      |                       |
|                       | random, you can get a |                       |
|                       | sense of the          |                       |
|                       | vocabulary, but you   |                       |
|                       | probably won't get a  |                       |
|                       | sentence:             |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | this the small regar  |                       | |                       | d harriet which knigh |                       | |                       | tley's it most things |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | A series of random    |                       |
|                       | words seldom makes    |                       |
|                       | sense because there   |                       |
|                       | is no relationship    |                       |
|                       | between successive    |                       |
|                       | words. For example,   |                       |
|                       | in a real sentence    |                       |
|                       | you would expect an   |                       |
|                       | article like &quot;the&quot; to |                       |
|                       | be followed by an     |                       |
|                       | adjective or a noun,  |                       |
|                       | and probably not a    |                       |
|                       | verb or adverb.       |                       |
|                       |                       |                       |
|                       | One way to measure    |                       |
|                       | these kinds of        |                       |
|                       | relationships is      |                       |
|                       | Markov analysis,      |                       |
|                       | which characterizes,  |                       |
|                       | for a given sequence  |                       |
|                       | of words, the         |                       |
|                       | probability of the    |                       |
|                       | words that might come |                       |
|                       | next. For example,    |                       |
|                       | the song <em>Eric, the   |                       |
|                       | Half a Bee</em> begins:   |                       |
|                       |                       |                       |
|                       | &gt; Half a bee,         |                       |
|                       | &gt; philosophically,\   |                       |
|                       | &gt; Must, ipso facto,   |                       |
|                       | &gt; half not be.\       |                       |
|                       | &gt; But half the bee    |                       |
|                       | &gt; has got to be\      |                       |
|                       | &gt; Vis a vis, its      |                       |
|                       | &gt; entity. D'you see?\ |                       |
|                       | &gt; \                   |                       |
|                       | &gt; But can a bee be    |                       |
|                       | &gt; said to be\         |                       |
|                       | &gt; Or not to be an     |                       |
|                       | &gt; entire bee\         |                       |
|                       | &gt; When half the bee   |                       |
|                       | &gt; is not a bee\       |                       |
|                       | &gt; Due to some ancient |                       |
|                       | &gt; injury?\            |                       |
|                       |                       |                       |
|                       | In this text, the     |                       |
|                       | phrase &quot;half the&quot; is  |                       |
|                       | always followed by    |                       |
|                       | the word &quot;bee&quot;, but   |                       |
|                       | the phrase &quot;the bee&quot;  |                       |
|                       | might be followed by  |                       |
|                       | either &quot;has&quot; or &quot;is&quot;. |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1180} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1181} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1182} |                       |
|                       |                       |                       |
|                       | The result of Markov  |                       |
|                       | analysis is a mapping |                       |
|                       | from each prefix      |                       |
|                       | (like &quot;half the&quot; and  |                       |
|                       | &quot;the bee&quot;) to all     |                       |
|                       | possible suffixes     |                       |
|                       | (like &quot;has&quot; and       |                       |
|                       | &quot;is&quot;).                |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1183} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1184} |                       |
|                       |                       |                       |
|                       | Given this mapping,   |                       |
|                       | you can generate a    |                       |
|                       | random text by        |                       |
|                       | starting with any     |                       |
|                       | prefix and choosing   |                       |
|                       | at random from the    |                       |
|                       | possible suffixes.    |                       |
|                       | Next, you can combine |                       |
|                       | the end of the prefix |                       |
|                       | and the new suffix to |                       |
|                       | form the next prefix, |                       |
|                       | and repeat.           |                       |
|                       |                       |                       |
|                       | For example, if you   |                       |
|                       | start with the prefix |                       |
|                       | &quot;Half a&quot;, then the    |                       |
|                       | next word has to be   |                       |
|                       | &quot;bee&quot;, because the    |                       |
|                       | prefix only appears   |                       |
|                       | once in the text. The |                       |
|                       | next prefix is &quot;a     |                       |
|                       | bee&quot;, so the next     |                       |
|                       | suffix might be       |                       |
|                       | &quot;philosophically&quot;,    |                       |
|                       | &quot;be&quot; or &quot;due&quot;.        |                       |
|                       |                       |                       |
|                       | In this example the   |                       |
|                       | length of the prefix  |                       |
|                       | is always two, but    |                       |
|                       | you can do Markov     |                       |
|                       | analysis with any     |                       |
|                       | prefix length.        |                       |
|                       |                       |                       |
|                       | ::: theorem           |                       |
|                       | [Exercise 8]{.c010}   |                       |
|                       |                       |                       |
|                       | <em>Markov analysis:</em>    |                       |
|                       |                       |                       |
|                       | 1.  <em>Write a program  |                       |
|                       |     to read a text    |                       |
|                       |     from a file and   |                       |
|                       |     perform Markov    |                       |
|                       |     analysis. The     |                       |
|                       |     result should be  |                       |
|                       |     a dictionary that |                       |
|                       |     maps from         |                       |
|                       |     prefixes to a     |                       |
|                       |     collection of     |                       |
|                       |     possible          |                       |
|                       |     suffixes. The     |                       |
|                       |     collection might  |                       |
|                       |     be a list, tuple, |                       |
|                       |     or dictionary; it |                       |
|                       |     is up to you to   |                       |
|                       |     make an           |                       |
|                       |     appropriate       |                       |
|                       |     choice. You can   |                       |
|                       |     test your program |                       |
|                       |     with prefix       |                       |
|                       |     length two, but   |                       |
|                       |     you should write  |                       |
|                       |     the program in a  |                       |
|                       |     way that makes it |                       |
|                       |     easy to try other |                       |
|                       |     lengths.</em>         |                       |
|                       |                       |                       |
|                       | 2.  <em>Add a function   |                       |
|                       |     to the previous   |                       |
|                       |     program to        |                       |
|                       |     generate random   |                       |
|                       |     text based on the |                       |
|                       |     Markov analysis.  |                       |
|                       |     Here is an        |                       |
|                       |     example from</em>     |                       |
|                       |     Emma <em>with prefix |                       |
|                       |     length 2:</em>        |                       |
|                       |                       |                       |
|                       |     &gt; <em>He was very    |                       |
|                       |     &gt; clever, be it   |                       |
|                       |     &gt; sweetness or be |                       |
|                       |     &gt; angry, ashamed  |                       |
|                       |     &gt; or only amused, |                       |
|                       |     &gt; at such a       |                       |
|                       |     &gt; stroke. She had |                       |
|                       |     &gt; never thought   |                       |
|                       |     &gt; of Hannah till  |                       |
|                       |     &gt; you were never  |                       |
|                       |     &gt; meant for me?&quot; |                       |
|                       |     &gt; &quot;I cannot make |                       |
|                       |     &gt; speeches,       |                       |
|                       |     &gt; Emma:&quot; he soon |                       |
|                       |     &gt; cut it all      |                       |
|                       |     &gt; himself.</em>       |                       |
|                       |                       |                       |
|                       |     <em>For this         |                       |
|                       |     example, I left   |                       |
|                       |     the punctuation   |                       |
|                       |     attached to the   |                       |
|                       |     words. The result |                       |
|                       |     is almost         |                       |
|                       |     syntactically     |                       |
|                       |     correct, but not  |                       |
|                       |     quite.            |                       |
|                       |     Semantically, it  |                       |
|                       |     almost makes      |                       |
|                       |     sense, but not    |                       |
|                       |     quite.</em>           |                       |
|                       |                       |                       |
|                       |     <em>What happens if  |                       |
|                       |     you increase the  |                       |
|                       |     prefix length?    |                       |
|                       |     Does the random   |                       |
|                       |     text make more    |                       |
|                       |     sense?</em>           |                       |
|                       |                       |                       |
|                       | 3.  <em>Once your        |                       |
|                       |     program is        |                       |
|                       |     working, you      |                       |
|                       |     might want to try |                       |
|                       |     a mash-up: if you |                       |
|                       |     combine text from |                       |
|                       |     two or more       |                       |
|                       |     books, the random |                       |
|                       |     text you generate |                       |
|                       |     will blend the    |                       |
|                       |     vocabulary and    |                       |
|                       |     phrases from the  |                       |
|                       |     sources in        |                       |
|                       |     interesting       |                       |
|                       |     ways.</em>            |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1185} |                       |
|                       |                       |                       |
|                       | <em>Credit: This case    |                       |
|                       | study is based on an  |                       |
|                       | example from          |                       |
|                       | Kernighan and Pike,</em>  |                       |
|                       | The Practice of       |                       |
|                       | Programming*,         |                       |
|                       | Addison-Wesley,       |                       |
|                       | 1999.*                |                       |
|                       | :::                   |                       |
|                       |                       |                       |
|                       | You should attempt    |                       |
|                       | this exercise before  |                       |
|                       | you go on; then you   |                       |
|                       | can download my       |                       |
|                       | solution from         |                       |
|                       | [[http                |                       |
|                       | s://thinkpython.com/c |                       |
|                       | ode/markov.py]{.c004} |                       |
|                       | ](https://thinkpython |                       |
|                       | .com/code/markov.py). |                       |
|                       | You will also need    |                       |
|                       | [[ht                  |                       |
|                       | tps://thinkpython.com |                       |
|                       | /code/emma.txt]{.c004 |                       |
|                       | }](https://thinkpytho |                       |
|                       | n.com/code/emma.txt). |                       |
|                       |                       |                       |
|                       | #                     |                       |
|                       | # 13.9  Data structur |                       |
|                       | es {#sec160 .section} |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1186} |                       |
|                       |                       |                       |
|                       | Using Markov analysis |                       |
|                       | to generate random    |                       |
|                       | text is fun, but      |                       |
|                       | there is also a point |                       |
|                       | to this exercise:     |                       |
|                       | data structure        |                       |
|                       | selection. In your    |                       |
|                       | solution to the       |                       |
|                       | previous exercises,   |                       |
|                       | you had to choose:    |                       |
|                       |                       |                       |
|                       | -   How to represent  |                       |
|                       |     the prefixes.     |                       |
|                       | -   How to represent  |                       |
|                       |     the collection of |                       |
|                       |     possible          |                       |
|                       |     suffixes.         |                       |
|                       | -   How to represent  |                       |
|                       |     the mapping from  |                       |
|                       |     each prefix to    |                       |
|                       |     the collection of |                       |
|                       |     possible          |                       |
|                       |     suffixes.         |                       |
|                       |                       |                       |
|                       | The last one is easy: |                       |
|                       | a dictionary is the   |                       |
|                       | obvious choice for a  |                       |
|                       | mapping from keys to  |                       |
|                       | corresponding values. |                       |
|                       |                       |                       |
|                       | For the prefixes, the |                       |
|                       | most obvious options  |                       |
|                       | are string, list of   |                       |
|                       | strings, or tuple of  |                       |
|                       | strings.              |                       |
|                       |                       |                       |
|                       | For the suffixes, one |                       |
|                       | option is a list;     |                       |
|                       | another is a          |                       |
|                       | histogram             |                       |
|                       | (dictionary).         |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1187} |                       |
|                       |                       |                       |
|                       | How should you        |                       |
|                       | choose? The first     |                       |
|                       | step is to think      |                       |
|                       | about the operations  |                       |
|                       | you will need to      |                       |
|                       | implement for each    |                       |
|                       | data structure. For   |                       |
|                       | the prefixes, we need |                       |
|                       | to be able to remove  |                       |
|                       | words from the        |                       |
|                       | beginning and add to  |                       |
|                       | the end. For example, |                       |
|                       | if the current prefix |                       |
|                       | is &quot;Half a&quot;, and the  |                       |
|                       | next word is &quot;bee&quot;,   |                       |
|                       | you need to be able   |                       |
|                       | to form the next      |                       |
|                       | prefix, &quot;a bee&quot;.      |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1188} |                       |
|                       |                       |                       |
|                       | Your first choice     |                       |
|                       | might be a list,      |                       |
|                       | since it is easy to   |                       |
|                       | add and remove        |                       |
|                       | elements, but we also |                       |
|                       | need to be able to    |                       |
|                       | use the prefixes as   |                       |
|                       | keys in a dictionary, |                       |
|                       | so that rules out     |                       |
|                       | lists. With tuples,   |                       |
|                       | you can't append or   |                       |
|                       | remove, but you can   |                       |
|                       | use the addition      |                       |
|                       | operator to form a    |                       |
|                       | new tuple:            |                       |
|                       |                       |                       |
|                       | <code>verbatim          |                       | |                       | def                   |                       | |                       |  shift(prefix, word): |                       | |                       |     return            |                       | |                       |  prefix[1:] + (word,) |                       | |                       |</code>                   |                       |
|                       |                       |                       |
|                       | [shift]{.c004} takes  |                       |
|                       | a tuple of words,     |                       |
|                       | [prefix]{.c004}, and  |                       |
|                       | a string,             |                       |
|                       | [word]{.c004}, and    |                       |
|                       | forms a new tuple     |                       |
|                       | that has all the      |                       |
|                       | words in              |                       |
|                       | [prefix]{.c004}       |                       |
|                       | except the first, and |                       |
|                       | [word]{.c004} added   |                       |
|                       | to the end.           |                       |
|                       |                       |                       |
|                       | For the collection of |                       |
|                       | suffixes, the         |                       |
|                       | operations we need to |                       |
|                       | perform include       |                       |
|                       | adding a new suffix   |                       |
|                       | (or increasing the    |                       |
|                       | frequency of an       |                       |
|                       | existing one), and    |                       |
|                       | choosing a random     |                       |
|                       | suffix.               |                       |
|                       |                       |                       |
|                       | Adding a new suffix   |                       |
|                       | is equally easy for   |                       |
|                       | the list              |                       |
|                       | implementation or the |                       |
|                       | histogram. Choosing a |                       |
|                       | random element from a |                       |
|                       | list is easy;         |                       |
|                       | choosing from a       |                       |
|                       | histogram is harder   |                       |
|                       | to do efficiently     |                       |
|                       | (see                  |                       |
|                       | Exer                  |                       |
|                       | cise <a href="#randhist">7</a>). |                       |
|                       |                       |                       |
|                       | So far we have been   |                       |
|                       | talking mostly about  |                       |
|                       | ease of               |                       |
|                       | implementation, but   |                       |
|                       | there are other       |                       |
|                       | factors to consider   |                       |
|                       | in choosing data      |                       |
|                       | structures. One is    |                       |
|                       | run time. Sometimes   |                       |
|                       | there is a            |                       |
|                       | theoretical reason to |                       |
|                       | expect one data       |                       |
|                       | structure to be       |                       |
|                       | faster than other;    |                       |
|                       | for example, I        |                       |
|                       | mentioned that the    |                       |
|                       | [in]{.c004} operator  |                       |
|                       | is faster for         |                       |
|                       | dictionaries than for |                       |
|                       | lists, at least when  |                       |
|                       | the number of         |                       |
|                       | elements is large.    |                       |
|                       |                       |                       |
|                       | But often you don't   |                       |
|                       | know ahead of time    |                       |
|                       | which implementation  |                       |
|                       | will be faster. One   |                       |
|                       | option is to          |                       |
|                       | implement both of     |                       |
|                       | them and see which is |                       |
|                       | better. This approach |                       |
|                       | is called             |                       |
|                       | [                     |                       |
|                       | benchmarking]{.c010}. |                       |
|                       | A practical           |                       |
|                       | alternative is to     |                       |
|                       | choose the data       |                       |
|                       | structure that is     |                       |
|                       | easiest to implement, |                       |
|                       | and then see if it is |                       |
|                       | fast enough for the   |                       |
|                       | intended application. |                       |
|                       | If so, there is no    |                       |
|                       | need to go on. If     |                       |
|                       | not, there are tools, |                       |
|                       | like the              |                       |
|                       | [profile]{.c004}      |                       |
|                       | module, that can      |                       |
|                       | identify the places   |                       |
|                       | in a program that     |                       |
|                       | take the most time.   |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1189} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1190} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1191} |                       |
|                       |                       |                       |
|                       | The other factor to   |                       |
|                       | consider is storage   |                       |
|                       | space. For example,   |                       |
|                       | using a histogram for |                       |
|                       | the collection of     |                       |
|                       | suffixes might take   |                       |
|                       | less space because    |                       |
|                       | you only have to      |                       |
|                       | store each word once, |                       |
|                       | no matter how many    |                       |
|                       | times it appears in   |                       |
|                       | the text. In some     |                       |
|                       | cases, saving space   |                       |
|                       | can also make your    |                       |
|                       | program run faster,   |                       |
|                       | and in the extreme,   |                       |
|                       | your program might    |                       |
|                       | not run at all if you |                       |
|                       | run out of memory.    |                       |
|                       | But for many          |                       |
|                       | applications, space   |                       |
|                       | is a secondary        |                       |
|                       | consideration after   |                       |
|                       | run time.             |                       |
|                       |                       |                       |
|                       | One final thought: in |                       |
|                       | this discussion, I    |                       |
|                       | have implied that we  |                       |
|                       | should use one data   |                       |
|                       | structure for both    |                       |
|                       | analysis and          |                       |
|                       | generation. But since |                       |
|                       | these are separate    |                       |
|                       | phases, it would also |                       |
|                       | be possible to use    |                       |
|                       | one structure for     |                       |
|                       | analysis and then     |                       |
|                       | convert to another    |                       |
|                       | structure for         |                       |
|                       | generation. This      |                       |
|                       | would be a net win if |                       |
|                       | the time saved during |                       |
|                       | generation exceeded   |                       |
|                       | the time spent in     |                       |
|                       | conversion.           |                       |
|                       |                       |                       |
|                       | ## 13.10  Debuggi     |                       |
|                       | ng {#sec161 .section} |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1192} |                       |
|                       |                       |                       |
|                       | When you are          |                       |
|                       | debugging a program,  |                       |
|                       | and especially if you |                       |
|                       | are working on a hard |                       |
|                       | bug, there are five   |                       |
|                       | things to try:        |                       |
|                       |                       |                       |
|                       | [Reading:]{.c010}     |                       |
|                       | :   Examine your      |                       |
|                       |     code, read it     |                       |
|                       |     back to yourself, |                       |
|                       |     and check that it |                       |
|                       |     says what you     |                       |
|                       |     meant to say.     |                       |
|                       |                       |                       |
|                       | [Running:]{.c010}     |                       |
|                       | :   Experiment by     |                       |
|                       |     making changes    |                       |
|                       |     and running       |                       |
|                       |     different         |                       |
|                       |     versions. Often   |                       |
|                       |     if you display    |                       |
|                       |     the right thing   |                       |
|                       |     at the right      |                       |
|                       |     place in the      |                       |
|                       |     program, the      |                       |
|                       |     problem becomes   |                       |
|                       |     obvious, but      |                       |
|                       |     sometimes you     |                       |
|                       |     have to build     |                       |
|                       |     scaffolding.      |                       |
|                       |                       |                       |
|                       | [Ruminating:]{.c010}  |                       |
|                       | :   Take some time to |                       |
|                       |     think! What kind  |                       |
|                       |     of error is it:   |                       |
|                       |     syntax, runtime,  |                       |
|                       |     or semantic? What |                       |
|                       |     information can   |                       |
|                       |     you get from the  |                       |
|                       |     error messages,   |                       |
|                       |     or from the       |                       |
|                       |     output of the     |                       |
|                       |     program? What     |                       |
|                       |     kind of error     |                       |
|                       |     could cause the   |                       |
|                       |     problem you're    |                       |
|                       |     seeing? What did  |                       |
|                       |     you change last,  |                       |
|                       |     before the        |                       |
|                       |     problem appeared? |                       |
|                       |                       |                       |
|                       | [R                    |                       |
|                       | ubberducking:]{.c010} |                       |
|                       | :   If you explain    |                       |
|                       |     the problem to    |                       |
|                       |     someone else, you |                       |
|                       |     sometimes find    |                       |
|                       |     the answer before |                       |
|                       |     you finish asking |                       |
|                       |     the question.     |                       |
|                       |     Often you don't   |                       |
|                       |     need the other    |                       |
|                       |     person; you could |                       |
|                       |     just talk to a    |                       |
|                       |     rubber duck. And  |                       |
|                       |     that's the origin |                       |
|                       |     of the well-known |                       |
|                       |     strategy called   |                       |
|                       |     [rubber duck      |                       |
|                       |                       |                       |
|                       |    debugging]{.c010}. |                       |
|                       |     I am not making   |                       |
|                       |     this up; see      |                       |
|                       |     [[https://e       |                       |
|                       | n.wikipedia.org/wiki/ |                       |
|                       | Rubber_duck_debugging |                       |
|                       | ]{.c004}](https://en. |                       |
|                       | wikipedia.org/wiki/Ru |                       |
|                       | bber_duck_debugging). |                       |
|                       |                       |                       |
|                       | [Retreating:]{.c010}  |                       |
|                       | :   At some point,    |                       |
|                       |     the best thing to |                       |
|                       |     do is back off,   |                       |
|                       |     undoing recent    |                       |
|                       |     changes, until    |                       |
|                       |     you get back to a |                       |
|                       |     program that      |                       |
|                       |     works and that    |                       |
|                       |     you understand.   |                       |
|                       |     Then you can      |                       |
|                       |     start rebuilding. |                       |
|                       |                       |                       |
|                       | Beginning programmers |                       |
|                       | sometimes get stuck   |                       |
|                       | on one of these       |                       |
|                       | activities and forget |                       |
|                       | the others. Each      |                       |
|                       | activity comes with   |                       |
|                       | its own failure mode. |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1193} |                       |
|                       |                       |                       |
|                       | For example, reading  |                       |
|                       | your code might help  |                       |
|                       | if the problem is a   |                       |
|                       | typographical error,  |                       |
|                       | but not if the        |                       |
|                       | problem is a          |                       |
|                       | conceptual            |                       |
|                       | misunderstanding. If  |                       |
|                       | you don't understand  |                       |
|                       | what your program     |                       |
|                       | does, you can read it |                       |
|                       | 100 times and never   |                       |
|                       | see the error,        |                       |
|                       | because the error is  |                       |
|                       | in your head.         |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1194} |                       |
|                       |                       |                       |
|                       | Running experiments   |                       |
|                       | can help, especially  |                       |
|                       | if you run small,     |                       |
|                       | simple tests. But if  |                       |
|                       | you run experiments   |                       |
|                       | without thinking or   |                       |
|                       | reading your code,    |                       |
|                       | you might fall into a |                       |
|                       | pattern I call        |                       |
|                       | &quot;random walk          |                       |
|                       | programming&quot;, which   |                       |
|                       | is the process of     |                       |
|                       | making random changes |                       |
|                       | until the program     |                       |
|                       | does the right thing. |                       |
|                       | Needless to say,      |                       |
|                       | random walk           |                       |
|                       | programming can take  |                       |
|                       | a long time.          |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1195} |                       |
|                       | [                     |                       |
|                       | ]{#hevea_default1196} |                       |
|                       |                       |                       |
|                       | You have to take time |                       |
|                       | to think. Debugging   |                       |
|                       | is like an            |                       |
|                       | experimental science. |                       |
|                       | You should have at    |                       |
|                       | least one hypothesis  |                       |
|                       | about what the        |                       |
|                       | problem is. If there  |                       |
|                       | are two or more       |                       |
|                       | possibilities, try to |                       |
|                       | think of a test that  |                       |
|                       | would eliminate one   |                       |
|                       | of them.              |                       |
|                       |                       |                       |
|                       | But even the best     |                       |
|                       | debugging techniques  |                       |
|                       | will fail if there    |                       |
|                       | are too many errors,  |                       |
|                       | or if the code you    |                       |
|                       | are trying to fix is  |                       |
|                       | too big and           |                       |
|                       | complicated.          |                       |
|                       | Sometimes the best    |                       |
|                       | option is to retreat, |                       |
|                       | simplifying the       |                       |
|                       | program until you get |                       |
|                       | to something that     |                       |
|                       | works and that you    |                       |
|                       | understand.           |                       |
|                       |                       |                       |
|                       | Beginning programmers |                       |
|                       | are often reluctant   |                       |
|                       | to retreat because    |                       |
|                       | they can't stand to   |                       |
|                       | delete a line of code |                       |
|                       | (even if it's wrong). |                       |
|                       | If it makes you feel  |                       |
|                       | better, copy your     |                       |
|                       | program into another  |                       |
|                       | file before you start |                       |
|                       | stripping it down.    |                       |
|                       | Then you can copy the |                       |
|                       | pieces back one at a  |                       |
|                       | time.                 |                       |
|                       |                       |                       |
|                       | Finding a hard bug    |                       |
|                       | requires reading,     |                       |
|                       | running, ruminating,  |                       |
|                       | and sometimes         |                       |
|                       | retreating. If you    |                       |
|                       | get stuck on one of   |                       |
|                       | these activities, try |                       |
|                       | the others.           |                       |
|                       |                       |                       |
|                       | ## 13.11  Glossa      |                       |
|                       | ry {#sec162 .section} |                       |
|                       |                       |                       |
|                       | [d                    |                       |
|                       | eterministic:]{.c010} |                       |
|                       | :   Pertaining to a   |                       |
|                       |     program that does |                       |
|                       |     the same thing    |                       |
|                       |     each time it      |                       |
|                       |     runs, given the   |                       |
|                       |     same inputs.      |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1197} |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | pseudorandom:]{.c010} |                       |
|                       | :   Pertaining to a   |                       |
|                       |     sequence of       |                       |
|                       |     numbers that      |                       |
|                       |     appears to be     |                       |
|                       |     random, but is    |                       |
|                       |     generated by a    |                       |
|                       |     deterministic     |                       |
|                       |     program.          |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1198} |                       |
|                       |                       |                       |
|                       | [d                    |                       |
|                       | efault value:]{.c010} |                       |
|                       | :   The value given   |                       |
|                       |     to an optional    |                       |
|                       |     parameter if no   |                       |
|                       |     argument is       |                       |
|                       |     provided.         |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1199} |                       |
|                       |                       |                       |
|                       | [override:]{.c010}    |                       |
|                       | :   To replace a      |                       |
|                       |     default value     |                       |
|                       |     with an argument. |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1200} |                       |
|                       |                       |                       |
|                       | [                     |                       |
|                       | benchmarking:]{.c010} |                       |
|                       | :   The process of    |                       |
|                       |     choosing between  |                       |
|                       |     data structures   |                       |
|                       |     by implementing   |                       |
|                       |     alternatives and  |                       |
|                       |     testing them on a |                       |
|                       |     sample of the     |                       |
|                       |     possible inputs.  |                       |
|                       |     [                 |                       |
|                       | ]{#hevea_default1201} |                       |
|                       |                       |                       |
|                       | [rubber du            |                       |
|                       | ck debugging:]{.c010} |                       |
|                       | :   Debugging by      |                       |
|                       |     explaining your   |                       |
|                       |     problem to an     |                       |
|                       |     inanimate object  |                       |
|                       |     such as a rubber  |                       |
|                       | </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../ThinkPython/part_4.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../ThinkPython/part_6.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../ThinkPython/part_4.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../ThinkPython/part_6.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
