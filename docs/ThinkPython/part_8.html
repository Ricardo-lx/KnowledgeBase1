583"></a></p><p>The following is a class definition for <span class="c004">Deck</span>. The
init method creates the attribute <span class="c004">cards</span> and generates
the standard set of fifty-two cards:
<a id="hevea_default1584"></a>
<a id="hevea_default1585"></a>
<a id="hevea_default1586"></a>
<a id="hevea_default1587"></a></p><pre class="verbatim">class Deck:

    def __init__(self):
        self.cards = []
        for suit in range(4):
            for rank in range(1, 14):
                card = Card(suit, rank)
                self.cards.append(card)
</pre><p>
The easiest way to populate the deck is with a nested loop. The outer
loop enumerates the suits from 0 to 3. The inner loop enumerates the
ranks from 1 to 13. Each iteration
creates a new Card with the current suit and rank,
and appends it to <span class="c004">self.cards</span>.
<a id="hevea_default1588"></a>
<a id="hevea_default1589"></a></p>
<h2 class="section" id="sec214">18.5&#XA0;&#XA0;Printing the deck</h2>
<p>
<a id="printdeck"></a>
<a id="hevea_default1590"></a>
<a id="hevea_default1591"></a></p><p>Here is a <code>__str__</code> method for <span class="c004">Deck</span>:</p><pre class="verbatim"># inside class Deck:

    def __str__(self):
        res = []
        for card in self.cards:
            res.append(str(card))
        return '\n'.join(res)
</pre><p>
This method demonstrates an efficient way to accumulate a large
string: building a list of strings and then using the string method
<span class="c004">join</span>. The built-in function <span class="c004">str</span> invokes the
<code>__str__</code> method on each card and returns the string
representation. <a id="hevea_default1592"></a> <a id="hevea_default1593"></a>
<a id="hevea_default1594"></a> <a id="hevea_default1595"></a> <a id="hevea_default1596"></a></p><p>Since we invoke <span class="c004">join</span> on a newline character, the cards
are separated by newlines. Here&#X2019;s what the result looks like:</p><pre class="verbatim">&gt;&gt;&gt; deck = Deck()
&gt;&gt;&gt; print(deck)
Ace of Clubs
2 of Clubs
3 of Clubs
...
10 of Spades
Jack of Spades
Queen of Spades
King of Spades
</pre><p>
Even though the result appears on 52 lines, it is
one long string that contains newlines.</p>
<h2 class="section" id="sec215">18.6&#XA0;&#XA0;Add, remove, shuffle and sort</h2>
<p>To deal cards, we would like a method that
removes a card from the deck and returns it.
The list method <span class="c004">pop</span> provides a convenient way to do that:
<a id="hevea_default1597"></a>
<a id="hevea_default1598"></a></p><pre class="verbatim"># inside class Deck:

    def pop_card(self):
        return self.cards.pop()
</pre><p>
Since <span class="c004">pop</span> removes the <em>last</em> card in the list, we are
dealing from the bottom of the deck.
<a id="hevea_default1599"></a>
<a id="hevea_default1600"></a></p><p>To add a card, we can use the list method <span class="c004">append</span>:</p><pre class="verbatim"># inside class Deck:

    def add_card(self, card):
        self.cards.append(card)
</pre><p>
A method like this that uses another method without doing
much work is sometimes called a <span class="c010">veneer</span>. The metaphor
comes from woodworking, where a veneer is a thin
layer of good quality wood glued to the surface of a cheaper piece of
wood to improve the appearance.
<a id="hevea_default1601"></a></p><p>In this case <code>add_card</code> is a &#X201C;thin&#X201D; method that expresses
a list operation in terms appropriate for decks. It
improves the appearance, or interface, of the
implementation.</p><p>As another example, we can write a Deck method named <span class="c004">shuffle</span>
using the function <span class="c004">shuffle</span> from the <span class="c004">random</span> module:
<a id="hevea_default1602"></a>
<a id="hevea_default1603"></a>
<a id="hevea_default1604"></a>
<a id="hevea_default1605"></a></p><pre class="verbatim"># inside class Deck:
            
    def shuffle(self):
        random.shuffle(self.cards)
</pre><p>
Don&#X2019;t forget to import <span class="c004">random</span>.</p><p>As an exercise, write a Deck method named <span class="c004">sort</span> that uses the
list method <span class="c004">sort</span> to sort the cards in a <span class="c004">Deck</span>. <span class="c004">sort</span>
uses the <code>__lt__</code> method we defined to determine the order.
<a id="hevea_default1606"></a> <a id="hevea_default1607"></a></p>
<h2 class="section" id="sec216">18.7&#XA0;&#XA0;Inheritance</h2>
<p>
<a id="hevea_default1608"></a>
<a id="hevea_default1609"></a></p><p>Inheritance is the ability to define a new class that is a modified
version of an existing class. As an example, let&#X2019;s say we want a
class to represent a &#X201C;hand&#X201D;, that is, the cards held by one player.
A hand is similar to a deck: both are made up of a collection of
cards, and both require operations like adding and removing cards.</p><p>A hand is also different from a deck; there are operations we want for
hands that don&#X2019;t make sense for a deck. For example, in poker we
might compare two hands to see which one wins. In bridge, we might
compute a score for a hand in order to make a bid.</p><p>This relationship between classes&#X2014;similar, but different&#X2014;lends
itself to inheritance.
To define a new class that inherits from an existing class,
you put the name of the existing class in parentheses:
<a id="hevea_default1610"></a>
<a id="hevea_default1611"></a>
<a id="hevea_default1612"></a>
<a id="hevea_default1613"></a>
<a id="hevea_default1614"></a></p><pre class="verbatim">class Hand(Deck):
    """Represents a hand of playing cards."""
</pre><p>
This definition indicates that <span class="c004">Hand</span> inherits from <span class="c004">Deck</span>;
that means we can use methods like <code>pop_card</code> and <code>add_card</code>
for Hands as well as Decks.</p><p>When a new class inherits from an existing one, the existing
one is called the <span class="c010">parent</span> and the new class is
called the <span class="c010">child</span>.
<a id="hevea_default1615"></a>
<a id="hevea_default1616"></a>
<a id="hevea_default1617"></a></p><p>In this example, <span class="c004">Hand</span> inherits <code>__init__</code> from <span class="c004">Deck</span>,
but it doesn&#X2019;t really do what we want: instead of populating the hand
with 52 new cards, the init method for Hands should initialize <span class="c004">cards</span> with an empty list. <a id="hevea_default1618"></a> <a id="hevea_default1619"></a>
<a id="hevea_default1620"></a></p><p>If we provide an init method in the <span class="c004">Hand</span> class, it overrides the
one in the <span class="c004">Deck</span> class:</p><pre class="verbatim"># inside class Hand:

    def __init__(self, label=''):
        self.cards = []
        self.label = label
</pre><p>
When you create a Hand, Python invokes this init method, not the
one in <span class="c004">Deck</span>.</p><pre class="verbatim">&gt;&gt;&gt; hand = Hand('new hand')
&gt;&gt;&gt; hand.cards
[]
&gt;&gt;&gt; hand.label
'new hand'
</pre><p>
The other methods are inherited from <span class="c004">Deck</span>, so we can use
<code>pop_card</code> and <code>add_card</code> to deal a card:</p><pre class="verbatim">&gt;&gt;&gt; deck = Deck()
&gt;&gt;&gt; card = deck.pop_card()
&gt;&gt;&gt; hand.add_card(card)
&gt;&gt;&gt; print(hand)
King of Spades
</pre><p>
A natural next step is to encapsulate this code in a method
called <code>move_cards</code>:
<a id="hevea_default1621"></a></p><pre class="verbatim"># inside class Deck:

    def move_cards(self, hand, num):
        for i in range(num):
            hand.add_card(self.pop_card())
</pre><p>
<code>move_cards</code> takes two arguments, a Hand object and the number of
cards to deal. It modifies both <span class="c004">self</span> and <span class="c004">hand</span>, and
returns <span class="c004">None</span>.</p><p>In some games, cards are moved from one hand to another,
or from a hand back to the deck. You can use <code>move_cards</code>
for any of these operations: <span class="c004">self</span> can be either a Deck
or a Hand, and <span class="c004">hand</span>, despite the name, can also be a <span class="c004">Deck</span>.</p><p>Inheritance is a useful feature. Some programs that would be
repetitive without inheritance can be written more elegantly
with it. Inheritance can facilitate code reuse, since you can
customize the behavior of parent classes without having to modify
them. In some cases, the inheritance structure reflects the natural
structure of the problem, which makes the design easier to
understand.</p><p>On the other hand, inheritance can make programs difficult to read.
When a method is invoked, it is sometimes not clear where to find its
definition. The relevant code may be spread across several modules.
Also, many of the things that can be done using inheritance can be
done as well or better without it.</p>
<h2 class="section" id="sec217">18.8&#XA0;&#XA0;Class diagrams</h2>
<p>
<a id="class.diagram"></a></p><p>So far we have seen stack diagrams, which show the state of
a program, and object diagrams, which show the attributes
of an object and their values. These diagrams represent a snapshot
in the execution of a program, so they change as the program
runs.</p><p>They are also highly detailed; for some purposes, too
detailed. A class diagram is a more abstract representation
of the structure of a program. Instead of showing individual
objects, it shows classes and the relationships between them.</p><p>There are several kinds of relationship between classes:</p><ul class="itemize"><li class="li-itemize">Objects in one class might contain references to objects
in another class. For example, each Rectangle contains a reference
to a Point, and each Deck contains references to many Cards.
This kind of relationship is called <span class="c010">HAS-A</span>, as in, &#X201C;a Rectangle
has a Point.&#X201D;</li><li class="li-itemize">One class might inherit from another. This relationship
is called <span class="c010">IS-A</span>, as in, &#X201C;a Hand is a kind of a Deck.&#X201D;</li><li class="li-itemize">One class might depend on another in the sense that objects
in one class take objects in the second class as parameters, or
use objects in the second class as part of a computation. This
kind of relationship is called a <span class="c010">dependency</span>.</li></ul><p>
<a id="hevea_default1622"></a>
<a id="hevea_default1623"></a>
<a id="hevea_default1624"></a>
<a id="hevea_default1625"></a></p><p>A <span class="c010">class diagram</span> is a graphical representation of these
relationships. For example, Figure&#XA0;<a href="#fig.class1">18.2</a> shows the
relationships between <span class="c004">Card</span>, <span class="c004">Deck</span> and <span class="c004">Hand</span>.</p><blockquote class="figure"><div class="center"><hr class="c019"></div>
<div class="center"><img src="thinkpython2025.png"></div>
<div class="caption"><table class="c001 cellpading0"><tr><td class="c018">Figure 18.2: Class diagram.</td></tr>
</table></div>
<a id="fig.class1"></a>
<div class="center"><hr class="c019"></div></blockquote><p>The arrow with a hollow triangle head represents an IS-A
relationship; in this case it indicates that Hand inherits
from Deck.</p><p>The standard arrow head represents a HAS-A
relationship; in this case a Deck has references to Card
objects.
<a id="hevea_default1626"></a></p><p>The star (<span class="c004">*</span>) near the arrow head is a 
<span class="c010">multiplicity</span>; it indicates how many Cards a Deck has.
A multiplicity can be a simple number, like <span class="c004">52</span>, a range,
like <span class="c004">5..7</span> or a star, which indicates that a Deck can
have any number of Cards.</p><p>There are no dependencies in this diagram. They would normally
be shown with a dashed arrow. Or if there are a lot of
dependencies, they are sometimes omitted.</p><p>A more detailed diagram might show that a Deck actually
contains a <em>list</em> of Cards, but built-in types
like list and dict are usually not included in class diagrams.</p>
<h2 class="section" id="sec218">18.9&#XA0;&#XA0;Debugging</h2>
<p>
<a id="hevea_default1627"></a></p><p>Inheritance can make debugging difficult because when you invoke a
method on an object, it might be hard to figure out which method will
be invoked. 
<a id="hevea_default1628"></a></p><p>Suppose you are writing a function that works with Hand objects.
You would like it to work with all kinds of Hands, like
PokerHands, BridgeHands, etc. If you invoke a method like
<span class="c004">shuffle</span>, you might get the one defined in <span class="c004">Deck</span>,
but if any of the subclasses override this method, you&#X2019;ll
get that version instead. This behavior is usually a good
thing, but it can be confusing.</p><p>Any time you are unsure about the flow of execution through your
program, the simplest solution is to add print statements at the
beginning of the relevant methods. If <span class="c004">Deck.shuffle</span> prints a
message that says something like <span class="c004">Running Deck.shuffle</span>, then as
the program runs it traces the flow of execution.
<a id="hevea_default1629"></a></p><p>As an alternative, you could use this function, which takes an
object and a method name (as a string) and returns the class that
provides the definition of the method:</p><pre class="verbatim">def find_defining_class(obj, meth_name):
    for ty in type(obj).mro():
        if meth_name in ty.__dict__:
            return ty
</pre><p>
Here&#X2019;s an example:</p><pre class="verbatim">&gt;&gt;&gt; hand = Hand()
&gt;&gt;&gt; find_defining_class(hand, 'shuffle')
&lt;class '__main__.Deck'&gt;
</pre><p>
So the <span class="c004">shuffle</span> method for this Hand is the one in <span class="c004">Deck</span>.
<a id="hevea_default1630"></a>
<a id="hevea_default1631"></a>
<a id="hevea_default1632"></a></p><p><code>find_defining_class</code> uses the <span class="c004">mro</span> method to get the list
of class objects (types) that will be searched for methods. &#X201C;MRO&#X201D;
stands for &#X201C;method resolution order&#X201D;, which is the sequence of
classes Python searches to &#X201C;resolve&#X201D; a method name.</p><p>Here&#X2019;s a design suggestion: when you override a method,
the interface of the new method should be the same as the old. It
should take the same parameters, return the same type, and obey the
same preconditions and postconditions. If you follow this rule, you
will find that any function designed to work with an instance of a
parent class, like a Deck, will also work with instances of child
classes like a Hand and PokerHand.
<a id="hevea_default1633"></a>
<a id="hevea_default1634"></a>
<a id="hevea_default1635"></a>
<a id="hevea_default1636"></a></p><p>If you violate this rule, which is called the &#X201C;Liskov substitution
principle&#X201D;, your code will collapse like (sorry) a house of cards.
<a id="hevea_default1637"></a></p>
<h2 class="section" id="sec219">18.10&#XA0;&#XA0;Data encapsulation</h2>
<p>The previous chapters demonstrate a development plan we might call
&#X201C;object-oriented design&#X201D;. We identified objects we needed&#X2014;like
<span class="c004">Point</span>, <span class="c004">Rectangle</span> and <span class="c004">Time</span>&#X2014;and defined classes to
represent them. In each case there is an obvious correspondence
between the object and some entity in the real world (or at least a
mathematical world). 
<a id="hevea_default1638"></a></p><p>But sometimes it is less obvious what objects you need
and how they should interact. In that case you need a different
development plan. In the same way that we discovered function
interfaces by encapsulation and generalization, we can discover
class interfaces by <span class="c010">data encapsulation</span>.
<a id="hevea_default1639"></a></p><p>Markov analysis, from Section&#XA0;<a href="thinkpython2014.html#markov">13.8</a>, provides a good example.
If you download my code from <a href="https://thinkpython.com/code/markov.py"><span class="c004">https://thinkpython.com/code/markov.py</span></a>,
you&#X2019;ll see that it uses two global variables&#X2014;<code>suffix_map</code> and
<code>prefix</code>&#X2014;that are read and written from several functions.</p><pre class="verbatim">suffix_map = {}        
prefix = ()            
</pre><p>Because these variables are global, we can only run one analysis at a
time. If we read two texts, their prefixes and suffixes would be
added to the same data structures (which makes for some interesting
generated text).</p><p>To run multiple analyses, and keep them separate, we can encapsulate
the state of each analysis in an object.
Here&#X2019;s what that looks like:</p><pre class="verbatim">class Markov:

    def __init__(self):
        self.suffix_map = {}
        self.prefix = ()    
</pre><p>Next, we transform the functions into methods. For example,
here&#X2019;s <code>process_word</code>:</p><pre class="verbatim">    def process_word(self, word, order=2):
        if len(self.prefix) &lt; order:
            self.prefix += (word,)
            return

        try:
            self.suffix_map[self.prefix].append(word)
        except KeyError:
            # if there is no entry for this prefix, make one
            self.suffix_map[self.prefix] = [word]

        self.prefix = shift(self.prefix, word)        
</pre><p>Transforming a program like this&#X2014;changing the design without
changing the behavior&#X2014;is another example of refactoring
(see Section&#XA0;<a href="thinkpython2005.html#refactoring">4.7</a>).
<a id="hevea_default1640"></a></p><p>This example suggests a development plan for designing objects and
methods:</p><ol class="enumerate" type=1><li class="li-enumerate">Start by writing functions that read and write global
variables (when necessary).</li><li class="li-enumerate">Once you get the program working, look for associations
between global variables and the functions that use them.</li><li class="li-enumerate">Encapsulate related variables as attributes of an object.</li><li class="li-enumerate">Transform the associated functions into methods of the new
class.</li></ol><p>As an exercise, download my Markov code from
<a href="https://thinkpython.com/code/markov.py"><span class="c004">https://thinkpython.com/code/markov.py</span></a>, and follow the steps
described above to encapsulate the global variables as attributes of a
new class called <span class="c004">Markov</span>. Solution:
<a href="https://thinkpython.com/code/markov2.py"><span class="c004">https://thinkpython.com/code/markov2.py</span></a>.</p>
<h2 class="section" id="sec220">18.11&#XA0;&#XA0;Glossary</h2>
<dl class="description"><dt class="dt-description"><span class="c010">encode:</span></dt><dd class="dd-description"> To represent one set of values using another
set of values by constructing a mapping between them.
<a id="hevea_default1641"></a></dd><dt class="dt-description"><span class="c010">class attribute:</span></dt><dd class="dd-description"> An attribute associated with a class
object. Class attributes are defined inside
a class definition but outside any method.
<a id="hevea_default1642"></a>
<a id="hevea_default1643"></a></dd><dt class="dt-description"><span class="c010">instance attribute:</span></dt><dd class="dd-description"> An attribute associated with an
instance of a class.
<a id="hevea_default1644"></a>
<a id="hevea_default1645"></a></dd><dt class="dt-description"><span class="c010">veneer:</span></dt><dd class="dd-description"> A method or function that provides a different
interface to another function without doing much computation.
<a id="hevea_default1646"></a></dd><dt class="dt-description"><span class="c010">inheritance:</span></dt><dd class="dd-description"> The ability to define a new class that is a
modified version of a previously defined class.
<a id="hevea_default1647"></a></dd><dt class="dt-description"><span class="c010">parent class:</span></dt><dd class="dd-description"> The class from which a child class inherits.
<a id="hevea_default1648"></a></dd><dt class="dt-description"><span class="c010">child class:</span></dt><dd class="dd-description"> A new class created by inheriting from an
existing class; also called a &#X201C;subclass&#X201D;.
<a id="hevea_default1649"></a>
<a id="hevea_default1650"></a></dd><dt class="dt-description"><span class="c010">IS-A relationship:</span></dt><dd class="dd-description"> A relationship between a child class
and its parent class.
<a id="hevea_default1651"></a></dd><dt class="dt-description"><span class="c010">HAS-A relationship:</span></dt><dd class="dd-description"> A relationship between two classes
where instances of one class contain references to instances of
the other.
<a id="hevea_default1652"></a></dd><dt class="dt-description"><span class="c010">dependency:</span></dt><dd class="dd-description"> A relationship between two classes
where instances of one class use instances of the other class,
but do not store them as attributes.
<a id="hevea_default1653"></a></dd><dt class="dt-description"><span class="c010">class diagram:</span></dt><dd class="dd-description"> A diagram that shows the classes in a program
and the relationships between them.
<a id="hevea_default1654"></a>
<a id="hevea_default1655"></a></dd><dt class="dt-description"><span class="c010">multiplicity:</span></dt><dd class="dd-description"> A notation in a class diagram that shows, for
a HAS-A relationship, how many references there are to instances
of another class.
<a id="hevea_default1656"></a></dd><dt class="dt-description"><span class="c010">data encapsulation:</span></dt><dd class="dd-description"> A program development plan that
involves a prototype using global variables and a final version
that makes the global variables into instance attributes. 
<a id="hevea_default1657"></a>
<a id="hevea_default1658"></a></dd></dl>
<h2 class="section" id="sec221">18.12&#XA0;&#XA0;Exercises</h2>
<div class="theorem"><span class="c010">Exercise&#XA0;1</span>&#XA0;&#XA0;<em>
For the following program, draw a UML class diagram that shows
these classes and the relationships among them.</em><pre class="verbatim"><em>class PingPongParent:
    pass

class Ping(PingPongParent):
    def __init__(self, pong):
        self.pong = pong


class Pong(PingPongParent):
    def __init__(self, pings=None):
        if pings is None:
            self.pings = []
        else:
            self.pings = pings

    def add_ping(self, ping):
        self.pings.append(ping)

pong = Pong()
ping = Ping(pong)
pong.add_ping(ping)
</em></pre></div><div class="theorem"><span class="c010">Exercise&#XA0;2</span>&#XA0;&#XA0;<em>
Write a Deck method called <code>deal_hands</code> that
takes two parameters, the number of hands and the number of cards per
hand. It should create the appropriate number of Hand objects, deal
the appropriate number of cards per hand, and return a list of Hands.
</em></div><div class="theorem"><span class="c010">Exercise&#XA0;3</span>&#XA0;&#XA0;
<a id="poker"></a><p><em>The following are the possible hands in poker, in increasing order
of value and decreasing order of probability:
</em><a id="hevea_default1659"></a></p><dl class="description"><dt class="dt-description"><em><span class="c010">pair:</span></em></dt><dd class="dd-description"><em> two cards with the same rank
</em></dd><dt class="dt-description"><span class="c010"><em>two pair:</em></span></dt><dd class="dd-description"><em> two pairs of cards with the same rank
</em></dd><dt class="dt-description"><span class="c010"><em>three of a kind:</em></span></dt><dd class="dd-description"><em> three cards with the same rank
</em></dd><dt class="dt-description"><span class="c010"><em>straight:</em></span></dt><dd class="dd-description"><em> five cards with ranks in sequence (aces can
be high or low, so <span class="c004">Ace-2-3-4-5</span> is a straight and so is <span class="c004">10-Jack-Queen-King-Ace</span>, but <span class="c004">Queen-King-Ace-2-3</span> is not.)
</em></dd><dt class="dt-description"><span class="c010"><em>flush:</em></span></dt><dd class="dd-description"><em> five cards with the same suit
</em></dd><dt class="dt-description"><span class="c010"><em>full house:</em></span></dt><dd class="dd-description"><em> three cards with one rank, two cards with another
</em></dd><dt class="dt-description"><span class="c010"><em>four of a kind:</em></span></dt><dd class="dd-description"><em> four cards with the same rank
</em></dd><dt class="dt-description"><span class="c010"><em>straight flush:</em></span></dt><dd class="dd-description"><em> five cards in sequence (as defined above) and
with the same suit
</em></dd></dl><p><em>
The goal of these exercises is to estimate
the probability of drawing these various hands.</em></p><ol class="enumerate" type=1><li class="li-enumerate"><em>Download the following files from </em><a href="https://thinkpython.com/code"><em><span class="c004">https://thinkpython.com/code</span></em></a><em>:</em><dl class="description"><dt class="dt-description"><span class="c005"><em>Card.py</em></span></dt><dd class="dd-description"><em>: A complete version of the <span class="c004">Card</span>,
<span class="c004">Deck</span> and <span class="c004">Hand</span> classes in this chapter.</em></dd><dt class="dt-description"><span class="c005"><em>PokerHand.py</em></span></dt><dd class="dd-description"><em>: An incomplete implementation of a class
that represents a poker hand, and some code that tests it.</em></dd></dl></li><li class="li-enumerate"><em>If you run <span class="c004">PokerHand.py</span>, it deals seven 7-card poker hands
and checks to see if any of them contains a flush. Read this
code carefully before you go on.</em></li><li class="li-enumerate"><em>Add methods to <span class="c004">PokerHand.py</span> named <code>has_pair</code>,
<code>has_twopair</code>, etc. that return True or False according to
whether or not the hand meets the relevant criteria. Your code should
work correctly for &#X201C;hands&#X201D; that contain any number of cards
(although 5 and 7 are the most common sizes).</em></li><li class="li-enumerate"><em>Write a method named <span class="c004">classify</span> that figures out
the highest-value classification for a hand and sets the
<span class="c004">label</span> attribute accordingly. For example, a 7-card hand
might contain a flush and a pair; it should be labeled &#X201C;flush&#X201D;.</em></li><li class="li-enumerate"><em>When you are convinced that your classification methods are
working, the next step is to estimate the probabilities of the various
hands. Write a function in <span class="c004">PokerHand.py</span> that shuffles a deck of
cards, divides it into hands, classifies the hands, and counts the
number of times various classifications appear.</em></li><li class="li-enumerate"><em>Print a table of the classifications and their probabilities.
Run your program with larger and larger numbers of hands until the
output values converge to a reasonable degree of accuracy. Compare
your results to the values at </em><a href="http://en.wikipedia.org/wiki/Hand_rankings"><span class="c004"><em>http://en.wikipedia.org/wiki/Hand_rankings</em></span></a><em>.</em></li></ol><p><em>Solution: </em><a href="https://thinkpython.com/code/PokerHandSoln.py"><em><span class="c004">https://thinkpython.com/code/PokerHandSoln.py</span></em></a><em>.
</em></p></div>
<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

</td>

<td width=130 valign="top">

<h4>Contribute</h4>
If you would like to make a contribution to support my books,
you can use the button below and pay with PayPal.  Thank you!

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="RAAYAZ7Y48S2A">
<table>
<tr><td><input type="hidden" name="on0" value="Pay what you want!">Pay what you want:</td></tr><tr><td><select name="os0">
	<option value="Small">Small $1.00 USD</option>
	<option value="Medium">Medium $5.00 USD</option>
	<option value="Large">Large $10.00 USD</option>
	<option value="X-Large">X-Large $20.00 USD</option>
	<option value="XX-Large">XX-Large $50.00 USD</option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

  
<p>
<h4>Are you using one of our books in a class?</h4>  We'd like to know
about it.  Please consider filling out <a href="http://spreadsheets.google.com/viewform?formkey=dC0tNUZkMjBEdXVoRGljNm9FRmlTMHc6MA" onClick="javascript: pageTracker._trackPageview('/outbound/survey');">this short survey</a>.

<p>
<br>

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=2JJH4SWCAVVYSQHO">Think DSP</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=CTV7PDT7E5EGGJUM"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491938455&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=ZY6MAYM33ZTNSCNZ">Think Java</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=PT77ANWARUNNU3UK"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491929561&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20">Think Bayes</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449370780&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=FJKSQ3IHEMY2F2VA">Think Python 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">


<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=ZZ454DLQ3IXDHNHX"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491939362&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=O7WYM6H6YBYUFNWU">Think Stats 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=JVSYKQHYSUIEYRHL"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1491907339&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_tl?ie=UTF8&tag=greenteapre01-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1449314635">Think Complexity</a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449314635&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449314635&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">


</td>
</tr>
</table>
<hr>
<a href="thinkpython2018.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2020.html"><img src="next.png" ALT="Next"></a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.32">
<link rel="stylesheet" type="text/css" href="thinkpython2.css">
<title>The Goodies</title>
</head>
<body>
<a href="thinkpython2019.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2021.html"><img src="next.png" ALT="Next"></a>
<hr>
<table>

<tr>

<td valign="top" width="100" bgcolor="#b6459a">
</td>

<td valign="top" width="600" style="padding: 20px 20px;">

<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

<h1 class="chapter" id="sec222">Chapter&#XA0;19&#XA0;&#XA0;The Goodies</h1>
<p>One of my goals for this book has been to teach you as little Python
as possible. When there were two ways to do something, I picked 
one and avoided mentioning the other. Or sometimes I put the second
one into an exercise.</p><p>Now I want to go back for some of the good bits that got left behind.
Python provides a number of features that are not really necessary&#X2014;you
can write good code without them&#X2014;but with them you can sometimes
write code that&#X2019;s more concise, readable or efficient, and sometimes
all three.</p>
<h2 class="section" id="sec223">19.1&#XA0;&#XA0;Conditional expressions</h2>
<p>We saw conditional statements in Section&#XA0;<a href="thinkpython2006.html#conditional.execution">5.4</a>.
Conditional statements are often used to choose one of two values;
for example:
<a id="hevea_default1660"></a>
<a id="hevea_default1661"></a></p><pre class="verbatim">if x &gt; 0:
    y = math.log(x)
else:
    y = float('nan')
</pre><p>This statement checks whether <span class="c004">x</span> is positive. If so, it computes
<span class="c004">math.log</span>. If not, <span class="c004">math.log</span> would raise a ValueError. To
avoid stopping the program, we generate a &#X201C;NaN&#X201D;, which is a special
floating-point value that represents &#X201C;Not a Number&#X201D;.
<a id="hevea_default1662"></a>
<a id="hevea_default1663"></a></p><p>We can write this statement more concisely using a <span class="c010">conditional
expression</span>:</p><pre class="verbatim">y = math.log(x) if x &gt; 0 else float('nan')
</pre><p>You can almost read this line like English: &#X201C;<span class="c004">y</span> gets log-<span class="c004">x</span>
if <span class="c004">x</span> is greater than 0; otherwise it gets NaN&#X201D;.</p><p>Recursive functions can sometimes be rewritten using conditional
expressions. For example, here is a recursive version of <span class="c004">factorial</span>:
<a id="hevea_default1664"></a>
<a id="hevea_default1665"></a></p><pre class="verbatim">def factorial(n):
    if n == 0:
        return 1
    else:
        return n * factorial(n-1)
</pre><p>We can rewrite it like this:</p><pre class="verbatim">def factorial(n):
    return 1 if n == 0 else n * factorial(n-1)
</pre><p>Another use of conditional expressions is handling optional
arguments. For example, here is the init method from
<span class="c004">GoodKangaroo</span> (see Exercise&#XA0;<a href="thinkpython2018.html#kangaroo">2</a>):
<a id="hevea_default1666"></a>
<a id="hevea_default1667"></a></p><pre class="verbatim">    def __init__(self, name, contents=None):
        self.name = name
        if contents == None:
            contents = []
        self.pouch_contents = contents
</pre><p>We can rewrite this one like this:</p><pre class="verbatim">    def __init__(self, name, contents=None):
        self.name = name
        self.pouch_contents = [] if contents == None else contents 
</pre><p>In general, you can replace a conditional statement with a conditional
expression if both branches contain simple expressions that are
either returned or assigned to the same variable.
<a id="hevea_default1668"></a>
<a id="hevea_default1669"></a></p>
<h2 class="section" id="sec224">19.2&#XA0;&#XA0;List comprehensions</h2>
<p>In Section&#XA0;<a href="thinkpython2011.html#filter">10.7</a> we saw the map and filter patterns. For
example, this function takes a list of strings, maps the string method
<span class="c004">capitalize</span> to the elements, and returns a new list of strings:</p><pre class="verbatim">def capitalize_all(t):
    res = []
    for s in t:
        res.append(s.capitalize())
    return res
</pre><p>We can write this more concisely using a <span class="c010">list comprehension</span>:
<a id="hevea_default1670"></a></p><pre class="verbatim">def capitalize_all(t):
    return [s.capitalize() for s in t]
</pre><p>The bracket operators indicate that we are constructing a new
list. The expression inside the brackets specifies the elements
of the list, and the <span class="c004">for</span> clause indicates what sequence
we are traversing.
<a id="hevea_default1671"></a>
<a id="hevea_default1672"></a></p><p>The syntax of a list comprehension is a little awkward because
the loop variable, <span class="c004">s</span> in this example, appears in the expression
before we get to the definition.
<a id="hevea_default1673"></a></p><p>List comprehensions can also be used for filtering. For example,
this function selects only the elements of <span class="c004">t</span> that are
upper case, and returns a new list:
<a id="hevea_default1674"></a>
<a id="hevea_default1675"></a></p><pre class="verbatim">def only_upper(t):
    res = []
    for s in t:
        if s.isupper():
            res.append(s)
    return res
</pre><p>We can rewrite it using a list comprehension</p><pre class="verbatim">def only_upper(t):
    return [s for s in t if s.isupper()]
</pre><p>List comprehensions are concise and easy to read, at least for simple
expressions. And they are usually faster than the equivalent for
loops, sometimes much faster. So if you are mad at me for not
mentioning them earlier, I understand.</p><p>But, in my defense, list comprehensions are harder to debug because
you can&#X2019;t put a print statement inside the loop. I suggest that you
use them only if the computation is simple enough that you are likely
to get it right the first time. And for beginners that means never.
<a id="hevea_default1676"></a></p>
<h2 class="section" id="sec225">19.3&#XA0;&#XA0;Generator expressions</h2>
<p><span class="c010">Generator expressions</span> are similar to list comprehensions, but
with parentheses instead of square brackets:
<a id="hevea_default1677"></a>
<a id="hevea_default1678"></a></p><pre class="verbatim">&gt;&gt;&gt; g = (x**2 for x in range(5))
&gt;&gt;&gt; g
&lt;generator object &lt;genexpr&gt; at 0x7f4c45a786c0&gt;
</pre><p>
The result is a generator object that knows how to iterate through
a sequence of values. But unlike a list comprehension, it does not
compute the values all at once; it waits to be asked. The built-in
function <span class="c004">next</span> gets the next value from the generator:
<a id="hevea_default1679"></a>
<a id="hevea_default1680"></a></p><pre class="verbatim">&gt;&gt;&gt; next(g)
0
&gt;&gt;&gt; next(g)
1
</pre><p>
When you get to the end of the sequence, <span class="c004">next</span> raises a 
StopIteration exception. You can also use a <span class="c004">for</span> loop to iterate
through the values:
<a id="hevea_default1681"></a>
<a id="hevea_default1682"></a></p><pre class="verbatim">&gt;&gt;&gt; for val in g:
...     print(val)
4
9
16
</pre><p>
The generator object keeps track of where it is in the sequence,
so the <span class="c004">for</span> loop picks up where <span class="c004">next</span> left off. Once the
generator is exhausted, it continues to raise <span class="c004">StopIteration</span>:</p><pre class="verbatim">&gt;&gt;&gt; next(g)
StopIteration
</pre><p>Generator expressions are often used with functions like <span class="c004">sum</span>,
<span class="c004">max</span>, and <span class="c004">min</span>:
<a id="hevea_default1683"></a>
<a id="hevea_default1684"></a></p><pre class="verbatim">&gt;&gt;&gt; sum(x**2 for x in range(5))
30
</pre>
<h2 class="section" id="sec226">19.4&#XA0;&#XA0;<span class="c004">any</span> and <span class="c004">all</span></h2>
<p>Python provides a built-in function, <span class="c004">any</span>, that takes a sequence
of boolean values and returns <span class="c004">True</span> if any of the values are <span class="c004">True</span>. It works on lists:
<a id="hevea_default1685"></a>
<a id="hevea_default1686"></a></p><pre class="verbatim">&gt;&gt;&gt; any([False, False, True])
True
</pre><p>
But it is often used with generator expressions:
<a id="hevea_default1687"></a>
<a id="hevea_default1688"></a></p><pre class="verbatim">&gt;&gt;&gt; any(letter == 't' for letter in 'monty')
True
</pre><p>
That example isn&#X2019;t very useful because it does the same thing
as the <span class="c004">in</span> operator. But we could use <span class="c004">any</span> to rewrite
some of the search functions we wrote in Section&#XA0;<a href="thinkpython2010.html#search">9.3</a>. For
example, we could write <span class="c004">avoids</span> like this:
<a id="hevea_default1689"></a>
<a id="hevea_default1690"></a></p><pre class="verbatim">def avoids(word, forbidden):
    return not any(letter in forbidden for letter in word)
</pre><p>
The function almost reads like English, &#X201C;<span class="c004">word</span> avoids
<span class="c004">forbidden</span> if there are not any forbidden letters in <span class="c004">word</span>.&#X201D;</p><p>Using <span class="c004">any</span> with a generator expression is efficient because
it stops immediately if it finds a <span class="c004">True</span> value,
so it doesn&#X2019;t have to evaluate the whole sequence.</p><p>Python provides another built-in function, <span class="c004">all</span>, that returns
<span class="c004">True</span> if every element of the sequence is <span class="c004">True</span>. As
an exercise, use <span class="c004">all</span> to re-write <code>uses_all</code> from
Section&#XA0;<a href="thinkpython2010.html#search">9.3</a>.
<a id="hevea_default1691"></a>
<a id="hevea_default1692"></a></p>
<h2 class="section" id="sec227">19.5&#XA0;&#XA0;Sets</h2>
<p>
<a id="sets"></a></p><p>In Section&#XA0;<a href="thinkpython2014.html#dictsub">13.6</a> I use dictionaries to find the words
that appear in a document but not in a word list. The function
I wrote takes <span class="c004">d1</span>, which contains the words from the document
as keys, and <span class="c004">d2</span>, which contains the list of words. It
returns a dictionary that contains the keys from <span class="c004">d1</span> that
are not in <span class="c004">d2</span>.</p><pre class="verbatim">def subtract(d1, d2):
    res = dict()
    for key in d1:
        if key not in d2:
            res[key] = None
    return res
</pre><p>
In all of these dictionaries, the values are <span class="c004">None</span> because
we never use them. As a result, we waste some storage space.
<a id="hevea_default1693"></a></p><p>Python provides another built-in type, called a <span class="c004">set</span>, that
behaves like a collection of dictionary keys with no values. Adding
elements to a set is fast; so is checking membership. And sets
provide methods and operators to compute common set operations.
<a id="hevea_default1694"></a>
<a id="hevea_default1695"></a></p><p>For example, set subtraction is available as a method called
<span class="c004">difference</span> or as an operator, <span class="c004">-</span>. So we can rewrite
<span class="c004">subtract</span> like this:
<a id="hevea_default1696"></a></p><pre class="verbatim">def subtract(d1, d2):
    return set(d1) - set(d2)
</pre><p>
The result is a set instead of a dictionary, but for operations like
iteration, the behavior is the same.</p><p>Some of the exercises in this book can be done concisely and
efficiently with sets. For example, here is a solution to
<code>has_duplicates</code>, from
Exercise&#XA0;<a href="thinkpython2011.html#duplicate">7</a>, that uses a dictionary:</p><pre class="verbatim">def has_duplicates(t):
    d = {}
    for x in t:
        if x in d:
            return True
        d[x] = True
    return False
</pre><p>When an element appears for the first time, it is added to the
dictionary. If the same element appears again, the function returns
<span class="c004">True</span>.</p><p>Using sets, we can write the same function like this:</p><pre class="verbatim">def has_duplicates(t):
    return len(set(t)) &lt; len(t)
</pre><p>
An element can only appear in a set once, so if an element in <span class="c004">t</span>
appears more than once, the set will be smaller than <span class="c004">t</span>. If there
are no duplicates, the set will be the same size as <span class="c004">t</span>.
<a id="hevea_default1697"></a></p><p>We can also use sets to do some of the exercises in
Chapter&#XA0;<a href="thinkpython2010.html#wordplay">9</a>. For example, here&#X2019;s a version of
<code>uses_only</code> with a loop:</p><pre class="verbatim">def uses_only(word, available):
    for letter in word: 
        if letter not in available:
            return False
    return True
</pre><p>
<code>uses_only</code> checks whether all letters in <span class="c004">word</span> are
in <span class="c004">available</span>. We can rewrite it like this:</p><pre class="verbatim">def uses_only(word, available):
    return set(word) &lt;= set(available)
</pre><p>
The <code>&lt;=</code> operator checks whether one set is a subset of another,
including the possibility that they are equal, which is true if all
the letters in <span class="c004">word</span> appear in <span class="c004">available</span>.
<a id="hevea_default1698"></a></p><p>As an exercise, rewrite <code>avoids</code> using sets.</p>
<h2 class="section" id="sec228">19.6&#XA0;&#XA0;Counters</h2>
<p>A Counter is like a set, except that if an element appears more
than once, the Counter keeps track of how many times it appears.
If you are familiar with the mathematical idea of a <span class="c010">multiset</span>,
a Counter is a natural way to represent a multiset.
<a id="hevea_default1699"></a>
<a id="hevea_default1700"></a>
<a id="hevea_default1701"></a></p><p>Counter is defined in a standard module called <span class="c004">collections</span>,
so you have to import it. You can initialize a Counter with a string,
list, or anything else that supports iteration:
<a id="hevea_default1702"></a>
<a id="hevea_default1703"></a></p><pre class="verbatim">&gt;&gt;&gt; from collections import Counter
&gt;&gt;&gt; count = Counter('parrot')
&gt;&gt;&gt; count
Counter({'r': 2, 't': 1, 'o': 1, 'p': 1, 'a': 1})
</pre><p>Counters behave like dictionaries in many ways; they map from each
key to the number of times it appears. As in dictionaries,
the keys have to be hashable.</p><p>Unlike dictionaries, Counters don&#X2019;t raise an exception if you access
an element that doesn&#X2019;t appear. Instead, they return 0:</p><pre class="verbatim">&gt;&gt;&gt; count['d']
0
</pre><p>We can use Counters to rewrite <code>is_anagram</code> from
Exercise&#XA0;<a href="thinkpython2011.html#anagram">6</a>:</p><pre class="verbatim">def is_anagram(word1, word2):
    return Counter(word1) == Counter(word2)
</pre><p>If two words are anagrams, they contain the same letters with the same
counts, so their Counters are equivalent.</p><p>Counters provide methods and operators to perform set-like operations,
including addition, subtraction, union and intersection. And
they provide an often-useful method, <code>most_common</code>, which
returns a list of value-frequency pairs, sorted from most common to
least:</p><pre class="verbatim">&gt;&gt;&gt; count = Counter('parrot')
&gt;&gt;&gt; for val, freq in count.most_common(3):
...     print(val, freq)
r 2
p 1
a 1
</pre>
<h2 class="section" id="sec229">19.7&#XA0;&#XA0;defaultdict</h2>
<p>The <span class="c004">collections</span> module also provides <span class="c004">defaultdict</span>, which is
like a dictionary except that if you access a key that doesn&#X2019;t exist,
it can generate a new value on the fly.
<a id="hevea_default1704"></a>
<a id="hevea_default1705"></a>
<a id="hevea_default1706"></a>
<a id="hevea_default1707"></a></p><p>When you create a defaultdict, you provide a function that&#X2019;s used to
create new values. A function used to create objects is sometimes
called a <span class="c010">factory</span>. The built-in functions that create lists, sets,
and other types can be used as factories:
<a id="hevea_default1708"></a></p><pre class="verbatim">&gt;&gt;&gt; from collections import defaultdict
&gt;&gt;&gt; d = defaultdict(list)
</pre><p>Notice that the argument is <span class="c004">list</span>, which is a class object,
not <span class="c004">list()</span>, which is a new list. The function you provide
doesn&#X2019;t get called unless you access a key that doesn&#X2019;t exist.</p><pre class="verbatim">&gt;&gt;&gt; t = d['new key']
&gt;&gt;&gt; t
[]
</pre><p>The new list, which we&#X2019;re calling <span class="c004">t</span>, is also added to the
dictionary. So if we modify <span class="c004">t</span>, the change appears in <span class="c004">d</span>:</p><pre class="verbatim">&gt;&gt;&gt; t.append('new value')
&gt;&gt;&gt; d
defaultdict(&lt;class 'list'&gt;, {'new key': ['new value']})
</pre><p>If you are making a dictionary of lists, you can often write simpler
code using <span class="c004">defaultdict</span>. In my solution to
Exercise&#XA0;<a href="thinkpython2013.html#anagrams">2</a>, which you can get from
<a href="https://thinkpython.com/code/anagram_sets.py"><span class="c004">https://thinkpython.com/code/anagram_sets.py</span></a>, I make a
dictionary that maps from a sorted string of letters to the list of
words that can be spelled with those letters. For example, <span class="c004">&#X2019;opst&#X2019;</span> maps to the list <span class="c004">[&#X2019;opts&#X2019;, &#X2019;post&#X2019;, &#X2019;pots&#X2019;, &#X2019;spot&#X2019;,
&#X2019;stop&#X2019;, &#X2019;tops&#X2019;]</span>.</p><p>Here&#X2019;s the original code:</p><pre class="verbatim">def all_anagrams(filename):
    d = {}
    for line in open(filename):
        word = line.strip().lower()
        t = signature(word)
        if t not in d:
            d[t] = [word]
        else:
            d[t].append(word)
    return d
</pre><p>This can be simplified using <span class="c004">setdefault</span>, which you might
have used in Exercise&#XA0;<a href="thinkpython2012.html#setdefault">2</a>:
<a id="hevea_default1709"></a></p><pre class="verbatim">def all_anagrams(filename):
    d = {}
    for line in open(filename):
        word = line.strip().lower()
        t = signature(word)
        d.setdefault(t, []).append(word)
    return d
</pre><p>This solution has the drawback that it makes a new list
every time, regardless of whether it is needed. For lists,
that&#X2019;s no big deal, but if the factory
function is complicated, it might be.
<a id="hevea_default1710"></a></p><p>We can avoid this problem and 
simplify the code using a <span class="c004">defaultdict</span>:</p><pre class="verbatim">def all_anagrams(filename):
    d = defaultdict(list)
    for line in open(filename):
        word = line.strip().lower()
        t = signature(word)
        d[t].append(word)
    return d
</pre><p>My solution to Exercise&#XA0;<a href="thinkpython2019.html#poker">3</a>, which you can download from
<a href="https://thinkpython.com/code/PokerHandSoln.py"><span class="c004">https://thinkpython.com/code/PokerHandSoln.py</span></a>,
uses <span class="c004">setdefault</span> in the function
<code>has_straightflush</code>. This solution has the drawback
of creating a <span class="c004">Hand</span> object every time through the loop, whether
it is needed or not. As an exercise, rewrite it using
a defaultdict.</p>
<h2 class="section" id="sec230">19.8&#XA0;&#XA0;Named tuples</h2>
<p>Many simple objects are basically collections of related values.
For example, the Point object defined in Chapter&#XA0;<a href="thinkpython2016.html#clobjects">15</a> contains
two numbers, <span class="c004">x</span> and <span class="c004">y</span>. When you define a class like
this, you usually start with an init method and a str method:</p><pre class="verbatim">class Point:

    def __init__(self, x=0, y=0):
        self.x = x
        self.y = y

    def __str__(self):
        return '(%g, %g)' % (self.x, self.y)
</pre><p>This is a lot of code to convey a small amount of information.
Python provides a more concise way to say the same thing:</p><pre class="verbatim">from collections import namedtuple
Point = namedtuple('Point', ['x', 'y'])
</pre><p>The first argument is the name of the class you want to create.
The second is a list of the attributes Point objects should have,
as strings. The return value from <span class="c004">namedtuple</span> is a class object:
<a id="hevea_default1711"></a>
<a id="hevea_default1712"></a>
<a id="hevea_default1713"></a>
<a id="hevea_default1714"></a></p><pre class="verbatim">&gt;&gt;&gt; Point
&lt;class '__main__.Point'&gt;
</pre><p><span class="c004">Point</span> automatically provides methods like <code>__init__</code> and
<code>__str__</code> so you don&#X2019;t have to write them.
<a id="hevea_default1715"></a>
<a id="hevea_default1716"></a></p><p>To create a Point object, you use the Point class as a function:</p><pre class="verbatim">&gt;&gt;&gt; p = Point(1, 2)
&gt;&gt;&gt; p
Point(x=1, y=2)
</pre><p>The init method assigns the arguments to attributes using the names
you provided. The str method prints a representation of the Point
object and its attributes.</p><p>You can access the elements of the named tuple by name:</p><pre class="verbatim">&gt;&gt;&gt; p.x, p.y
(1, 2)
</pre><p>But you can also treat a named tuple as a tuple:</p><pre class="verbatim">&gt;&gt;&gt; p[0], p[1]
(1, 2)

&gt;&gt;&gt; x, y = p
&gt;&gt;&gt; x, y
(1, 2)
</pre><p>Named tuples provide a quick way to define simple classes.
The drawback is that simple classes don&#X2019;t always stay simple.
You might decide later that you want to add methods to a named tuple.
In that case, you could define a new class that inherits from
the named tuple:
<a id="hevea_default1717"></a></p><pre class="verbatim">class Pointier(Point):
    # add more methods here
</pre><p>Or you could switch to a conventional class definition.</p>
<h2 class="section" id="sec231">19.9&#XA0;&#XA0;Gathering keyword args</h2>
<p>In Section&#XA0;<a href="thinkpython2013.html#gather">12.4</a>, we saw how to write a function that
gathers its arguments into a tuple:
<a id="hevea_default1718"></a></p><pre class="verbatim">def printall(*args):
    print(args)
</pre><p>
You can call this function with any number of positional arguments
(that is, arguments that don&#X2019;t have keywords):
<a id="hevea_default1719"></a>
<a id="hevea_default1720"></a></p><pre class="verbatim">&gt;&gt;&gt; printall(1, 2.0, '3')
(1, 2.0, '3')
</pre><p>
But the <span class="c004">*</span> operator doesn&#X2019;t gather keyword arguments:
<a id="hevea_default1721"></a>
<a id="hevea_default1722"></a></p><pre class="verbatim">&gt;&gt;&gt; printall(1, 2.0, third='3')
TypeError: printall() got an unexpected keyword argument 'third'
</pre><p>
To gather keyword arguments, you can use the <span class="c004">**</span> operator:</p><pre class="verbatim">def printall(*args, **kwargs):
    print(args, kwargs)
</pre><p>
You can call the keyword gathering parameter anything you want, but
<span class="c004">kwargs</span> is a common choice. The result is a dictionary that maps
from keywords to values:</p><pre class="verbatim">&gt;&gt;&gt; printall(1, 2.0, third='3')
(1, 2.0) {'third': '3'}
</pre><p>
If you have a dictionary of keywords and values, you can use the
scatter operator, <span class="c004">**</span> to call a function:
<a id="hevea_default1723"></a></p><pre class="verbatim">&gt;&gt;&gt; d = dict(x=1, y=2)
&gt;&gt;&gt; Point(**d)
Point(x=1, y=2)
</pre><p>
Without the scatter operator, the function would treat <span class="c004">d</span> as
a single positional argument, so it would assign <span class="c004">d</span> to
<span class="c004">x</span> and complain because there&#X2019;s nothing to assign to <span class="c004">y</span>:</p><pre class="verbatim">&gt;&gt;&gt; d = dict(x=1, y=2)
&gt;&gt;&gt; Point(d)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: __new__() missing 1 required positional argument: 'y'
</pre><p>
When you are working with functions that have a large number of
parameters, it is often useful to create and pass around dictionaries
that specify frequently used options.</p>
<h2 class="section" id="sec232">19.10&#XA0;&#XA0;Glossary</h2>
<dl class="description"><dt class="dt-description"><span class="c010">conditional expression:</span></dt><dd class="dd-description"> An expression that has one of two
values, depending on a condition.
<a id="hevea_default1724"></a>
<a id="hevea_default1725"></a></dd><dt class="dt-description"><span class="c010">list comprehension:</span></dt><dd class="dd-description"> An expression with a <span class="c004">for</span> loop in square
brackets that yields a new list.
<a id="hevea_default1726"></a></dd><dt class="dt-description"><span class="c010">generator expression:</span></dt><dd class="dd-description"> An expression with a <span class="c004">for</span> loop in parentheses
that yields a generator object. 
<a id="hevea_default1727"></a>
<a id="hevea_default1728"></a></dd><dt class="dt-description"><span class="c010">multiset:</span></dt><dd class="dd-description"> A mathematical entity that represents a mapping
between the elements of a set and the number of times they appear.</dd><dt class="dt-description"><span class="c010">factory:</span></dt><dd class="dd-description"> A function, usually passed as a parameter, used to
create objects. 
<a id="hevea_default1729"></a></dd></dl>
<h2 class="section" id="sec233">19.11&#XA0;&#XA0;Exercises</h2>
<div class="theorem"><span class="c010">Exercise&#XA0;1</span>&#XA0;&#XA0;<p><em>The following is a function that computes the binomial
coefficient recursively.</em></p><pre class="verbatim"><em>def binomial_coeff(n, k):
    """Compute the binomial coefficient "n choose k".

    n: number of trials
    k: number of successes

    returns: int
    """
    if k == 0:
        return 1
    if n == 0:
        return 0

    res = binomial_coeff(n-1, k) + binomial_coeff(n-1, k-1)
    return res
</em></pre><p><em>Rewrite the body of the function using nested conditional
expressions.</em></p><p><em>One note: this function is not very efficient because it ends up computing
the same values over and over. You could make it more efficient by
memoizing (see Section&#XA0;</em><a href="thinkpython2012.html#memoize"><em>11.6</em></a><em>). But you will find that it&#X2019;s harder to
memoize if you write it using conditional expressions.</em></p></div>
<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

</td>

<td width=130 valign="top">

<h4>Contribute</h4>
If you would like to make a contribution to support my books,
you can use the button below and pay with PayPal.  Thank you!

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="RAAYAZ7Y48S2A">
<table>
<tr><td><input type="hidden" name="on0" value="Pay what you want!">Pay what you want:</td></tr><tr><td><select name="os0">
	<option value="Small">Small $1.00 USD</option>
	<option value="Medium">Medium $5.00 USD</option>
	<option value="Large">Large $10.00 USD</option>
	<option value="X-Large">X-Large $20.00 USD</option>
	<option value="XX-Large">XX-Large $50.00 USD</option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

  
<p>
<h4>Are you using one of our books in a class?</h4>  We'd like to know
about it.  Please consider filling out <a href="http://spreadsheets.google.com/viewform?formkey=dC0tNUZkMjBEdXVoRGljNm9FRmlTMHc6MA" onClick="javascript: pageTracker._trackPageview('/outbound/survey');">this short survey</a>.

<p>
<br>

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=2JJH4SWCAVVYSQHO">Think DSP</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=CTV7PDT7E5EGGJUM"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491938455&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=ZY6MAYM33ZTNSCNZ">Think Java</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=PT77ANWARUNNU3UK"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491929561&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20">Think Bayes</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449370780&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=FJKSQ3IHEMY2F2VA">Think Python 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">


<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=ZZ454DLQ3IXDHNHX"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491939362&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=O7WYM6H6YBYUFNWU">Think Stats 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=JVSYKQHYSUIEYRHL"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1491907339&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_tl?ie=UTF8&tag=greenteapre01-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1449314635">Think Complexity</a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449314635&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449314635&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">


</td>
</tr>
</table>
<hr>
<a href="thinkpython2019.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2021.html"><img src="next.png" ALT="Next"></a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.32">
<link rel="stylesheet" type="text/css" href="thinkpython2.css">
<title>Debugging</title>
</head>
<body>
<a href="thinkpython2020.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2022.html"><img src="next.png" ALT="Next"></a>
<hr>
<table>

<tr>

<td valign="top" width="100" bgcolor="#b6459a">
</td>

<td valign="top" width="600" style="padding: 20px 20px;">

<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

<h1 class="chapter" id="sec234">Appendix&#XA0;A&#XA0;&#XA0;Debugging</h1>
<p>
<a id="hevea_default1730"></a></p><p>When you are debugging, you should distinguish among different
kinds of errors in order to track them down more quickly:</p><ul class="itemize"><li class="li-itemize">Syntax errors are discovered by the interpreter when it is
translating the source code into byte code. They indicate
that there is something wrong with the structure of the program.
Example: Omitting the colon at the end of a <span class="c004">def</span> statement
generates the somewhat redundant message <span class="c004">SyntaxError: invalid
syntax</span>.
<a id="hevea_default1731"></a>
<a id="hevea_default1732"></a></li><li class="li-itemize">Runtime errors are produced by the interpreter if something goes
wrong while the program is running. Most runtime error messages
include information about where the error occurred and what
functions were executing. Example: An infinite recursion eventually
causes the runtime error &#X201C;maximum recursion depth exceeded&#X201D;.
<a id="hevea_default1733"></a>
<a id="hevea_default1734"></a>
<a id="hevea_default1735"></a></li><li class="li-itemize">Semantic errors are problems with a program that runs without
producing error messages but doesn&#X2019;t do the right thing. Example:
An expression may not be evaluated in the order you expect, yielding
an incorrect result.
<a id="hevea_default1736"></a>
<a id="hevea_default1737"></a></li></ul><p>The first step in debugging is to figure out which kind of
error you are dealing with. Although the following sections are
organized by error type, some techniques are
applicable in more than one situation.</p>
<h2 class="section" id="sec235">A.1&#XA0;&#XA0;Syntax errors</h2>
<p>
<a id="hevea_default1738"></a></p><p>Syntax errors are usually easy to fix once you figure out what they
are. Unfortunately, the error messages are often not helpful.
The most common messages are <span class="c004">SyntaxError: invalid syntax</span> and
<span class="c004">SyntaxError: invalid token</span>, neither of which is very informative.</p><p>On the other hand, the message does tell you where in the program the
problem occurred. Actually, it tells you where Python
noticed a problem, which is not necessarily where the error
is. Sometimes the error is prior to the location of the error
message, often on the preceding line.
<a id="hevea_default1739"></a>
<a id="hevea_default1740"></a></p><p>If you are building the program incrementally, you should have
a good idea about where the error is. It will be in the last
line you added.</p><p>If you are copying code from a book, start by comparing
your code to the book&#X2019;s code very carefully. Check every character.
At the same time, remember that the book might be wrong, so
if you see something that looks like a syntax error, it might be.</p><p>Here are some ways to avoid the most common syntax errors:
<a id="hevea_default1741"></a></p><ol class="enumerate" type=1><li class="li-enumerate">Make sure you are not using a Python keyword for a variable name.
<a id="hevea_default1742"></a></li><li class="li-enumerate">Check that you have a colon at the end of the header of every
compound statement, including <span class="c004">for</span>, <span class="c004">while</span>,
<span class="c004">if</span>, and <span class="c004">def</span> statements.
<a id="hevea_default1743"></a>
<a id="hevea_default1744"></a></li><li class="li-enumerate">Make sure that any strings in the code have matching
quotation marks. Make sure that all quotation marks are
&#X201C;straight quotes&#X201D;, not &#X201C;curly quotes&#X201D;.
<a id="hevea_default1745"></a></li><li class="li-enumerate">If you have multiline strings with triple quotes (single or double), make
sure you have terminated the string properly. An unterminated string
may cause an <span class="c004">invalid token</span> error at the end of your program,
or it may treat the following part of the program as a string until it
comes to the next string. In the second case, it might not produce an error
message at all!
<a id="hevea_default1746"></a>
<a id="hevea_default1747"></a></li><li class="li-enumerate">An unclosed opening operator&#X2014;<code>(</code>, <code>{</code>, or
<code>[</code>&#X2014;makes Python continue with the next line as part of the
current statement. Generally, an error occurs almost immediately in
the next line.</li><li class="li-enumerate">Check for the classic <span class="c004">=</span> instead of <span class="c004">==</span> inside
a conditional.
<a id="hevea_default1748"></a></li><li class="li-enumerate">Check the indentation to make sure it lines up the way it
is supposed to. Python can handle space and tabs, but if you mix
them it can cause problems. The best way to avoid this problem
is to use a text editor that knows about Python and generates
consistent indentation.
<a id="hevea_default1749"></a>
<a id="hevea_default1750"></a></li><li class="li-enumerate">If you have non-ASCII characters in the code (including strings
and comments), that might cause a problem, although Python 3 usually
handles non-ASCII characters. Be careful if you paste in text from
a web page or other source.</li></ol><p>If nothing works, move on to the next section...</p>
<h3 class="subsection" id="sec236">A.1.1&#XA0;&#XA0;I keep making changes and it makes no difference.</h3>
<p>If the interpreter says there is an error and you don&#X2019;t see it, that
might be because you and the interpreter are not looking at the same
code. Check your programming environment to make sure that the
program you are editing is the one Python is trying to run.</p><p>If you are not sure, try putting an obvious and deliberate syntax
error at the beginning of the program. Now run it again. If the
interpreter doesn&#X2019;t find the new error, you are not running the
new code.</p><p>There are a few likely culprits:</p><ul class="itemize"><li class="li-itemize">You edited the file and forgot to save the changes before
running it again. Some programming environments do this
for you, but some don&#X2019;t.</li><li class="li-itemize">You changed the name of the file, but you are still running
the old name.</li><li class="li-itemize">Something in your development environment is configured
incorrectly.</li><li class="li-itemize">If you are writing a module and using <span class="c004">import</span>,
make sure you don&#X2019;t give your module the same name as one
of the standard Python modules.</li><li class="li-itemize">If you are using <span class="c004">import</span> to read a module, remember
that you have to restart the interpreter or use <span class="c004">reload</span>
to read a modified file. If you import the module again, it
doesn&#X2019;t do anything.
<a id="hevea_default1751"></a>
<a id="hevea_default1752"></a>
<a id="hevea_default1753"></a></li></ul><p>If you get stuck and you can&#X2019;t figure out what is going on, one
approach is to start again with a new program like &#X201C;Hello, World!&#X201D;,
and make sure you can get a known program to run. Then gradually add
the pieces of the original program to the new one.</p>
<h2 class="section" id="sec237">A.2&#XA0;&#XA0;Runtime errors</h2>
<p>Once your program is syntactically correct,
Python can read it and at least start running it. What could
possibly go wrong?</p>
<h3 class="subsection" id="sec238">A.2.1&#XA0;&#XA0;My program does absolutely nothing.</h3>
<p>This problem is most common when your file consists of functions and
classes but does not actually invoke a function to start execution.
This may be intentional if you only plan to import this module to
supply classes and functions.</p><p>If it is not intentional, make sure there is a function call
in the program, and make sure the flow of execution reaches
it (see &#X201C;Flow of Execution&#X201D; below).</p>
<h3 class="subsection" id="sec239">A.2.2&#XA0;&#XA0;My program hangs.</h3>
<p>
<a id="hevea_default1754"></a>
<a id="hevea_default1755"></a>
<a id="hevea_default1756"></a></p><p>If a program stops and seems to be doing nothing, it is &#X201C;hanging&#X201D;.
Often that means that it is caught in an infinite loop or infinite
recursion.</p><ul class="itemize"><li class="li-itemize">If there is a particular loop that you suspect is the
problem, add a <span class="c004">print</span> statement immediately before the loop that says
&#X201C;entering the loop&#X201D; and another immediately after that says
&#X201C;exiting the loop&#X201D;.<p>Run the program. If you get the first message and not the second,
you&#X2019;ve got an infinite loop. Go to the &#X201C;Infinite Loop&#X201D; section
below.</p></li><li class="li-itemize">Most of the time, an infinite recursion will cause the program
to run for a while and then produce a &#X201C;RuntimeError: Maximum
recursion depth exceeded&#X201D; error. If that happens, go to the
&#X201C;Infinite Recursion&#X201D; section below.<p>If you are not getting this error but you suspect there is a problem
with a recursive method or function, you can still use the techniques
in the &#X201C;Infinite Recursion&#X201D; section.</p></li><li class="li-itemize">If neither of those steps works, start testing other
loops and other recursive functions and methods.</li><li class="li-itemize">If that doesn&#X2019;t work, then it is possible that
you don&#X2019;t understand the flow of execution in your program.
Go to the &#X201C;Flow of Execution&#X201D; section below.</li></ul>
<h4 class="subsubsection" id="sec240">Infinite Loop</h4>
<p>
<a id="hevea_default1757"></a>
<a id="hevea_default1758"></a>
<a id="hevea_default1759"></a>
<a id="hevea_default1760"></a></p><p>If you think you have an infinite loop and you think you know
what loop is causing the problem, add a <span class="c004">print</span> statement at
the end of the loop that prints the values of the variables in
the condition and the value of the condition.</p><p>For example:</p><pre class="verbatim">while x &gt; 0 and y &lt; 0 :
    # do something to x
    # do something to y

    print('x: ', x)
    print('y: ', y)
    print("condition: ", (x &gt; 0 and y &lt; 0))
</pre><p>
Now when you run the program, you will see three lines of output
for each time through the loop. The last time through the
loop, the condition should be <span class="c004">False</span>. If the loop keeps
going, you will be able to see the values of <span class="c004">x</span> and <span class="c004">y</span>,
and you might figure out why they are not being updated correctly.</p>
<h4 class="subsubsection" id="sec241">Infinite Recursion</h4>
<p>
<a id="hevea_default1761"></a>
<a id="hevea_default1762"></a></p><p>Most of the time, infinite recursion causes the program to run
for a while and then produce a <span class="c004">Maximum recursion depth exceeded</span>
error.</p><p>If you suspect that a function is causing an infinite
recursion, make sure that there is a base case.
There should be some condition that causes the
function to return without making a recursive invocation.
If not, you need to rethink the algorithm and identify a base
case.</p><p>If there is a base case but the program doesn&#X2019;t seem to be reaching
it, add a <span class="c004">print</span> statement at the beginning of the function
that prints the parameters. Now when you run the program, you will see
a few lines of output every time the function is invoked,
and you will see the parameter values. If the parameters are not moving
toward the base case, you will get some ideas about why not.</p>
<h4 class="subsubsection" id="sec242">Flow of Execution</h4>
<p>
<a id="hevea_default1763"></a></p><p>If you are not sure how the flow of execution is moving through
your program, add <span class="c004">print</span> statements to the beginning of each
function with a message like &#X201C;entering function <span class="c004">foo</span>&#X201D;, where
<span class="c004">foo</span> is the name of the function.</p><p>Now when you run the program, it will print a trace of each
function as it is invoked.</p>
<h3 class="subsection" id="sec243">A.2.3&#XA0;&#XA0;When I run the program I get an exception.</h3>
<p>
<a id="hevea_default1764"></a>
<a id="hevea_default1765"></a></p><p>If something goes wrong during runtime, Python
prints a message that includes the name of the
exception, the line of the program where the problem occurred,
and a traceback.
<a id="hevea_default1766"></a></p><p>The traceback identifies the function that is currently running, and
then the function that called it, and then the function that called
<em>that</em>, and so on. In other words, it traces the sequence of
function calls that got you to where you are, including the line
number in your file where each call occurred.</p><p>The first step is to examine the place in the program where
the error occurred and see if you can figure out what happened.
These are some of the most common runtime errors:</p><dl class="description"><dt class="dt-description"><span class="c010">NameError:</span></dt><dd class="dd-description"> You are trying to use a variable that doesn&#X2019;t
exist in the current environment. Check if the name
is spelled right, or at least consistently.
And remember that local variables are local; you
cannot refer to them from outside the function where they are defined.
<a id="hevea_default1767"></a>
<a id="hevea_default1768"></a></dd><dt class="dt-description"><span class="c010">TypeError:</span></dt><dd class="dd-description"> There are several possible causes:
<a id="hevea_default1769"></a>
<a id="hevea_default1770"></a><ul class="itemize"><li class="li-itemize">You are trying to use a value improperly. Example: indexing
a string, list, or tuple with something other than an integer.
<a id="hevea_default1771"></a></li><li class="li-itemize">There is a mismatch between the items in a format string and
the items passed for conversion. This can happen if either the number
of items does not match or an invalid conversion is called for.
<a id="hevea_default1772"></a>
<a id="hevea_default1773"></a></li><li class="li-itemize">You are passing the wrong number of arguments to a function.
For methods, look at the method definition and
check that the first parameter is <span class="c004">self</span>. Then look at the
method invocation; make sure you are invoking the method on an
object with the right type and providing the other arguments
correctly.</li></ul></dd><dt class="dt-description"><span class="c010">KeyError:</span></dt><dd class="dd-description"> You are trying to access an element of a dictionary
using a key that the dictionary does not contain. If the keys
are strings, remember that capitalization matters.
<a id="hevea_default1774"></a>
<a id="hevea_default1775"></a>
<a id="hevea_default1776"></a></dd><dt class="dt-description"><span class="c010">AttributeError:</span></dt><dd class="dd-description"> You are trying to access an attribute or method
that does not exist. Check the spelling! You can use the built-in
function <span class="c004">vars</span> to list the attributes that do exist.
<a id="hevea_default1777"></a>
<a id="hevea_default1778"></a><p>If an AttributeError indicates that an object has <span class="c004">NoneType</span>,
that means that it is <span class="c004">None</span>. So the problem is not the
attribute name, but the object.</p><p>The reason the object is none might be that you forgot
to return a value from a function; if you get to the end of
a function without hitting a <span class="c004">return</span> statement, it returns
<span class="c004">None</span>. Another common cause is using the result from
a list method, like <span class="c004">sort</span>, that returns <span class="c004">None</span>.
<a id="hevea_default1779"></a>
<a id="hevea_default1780"></a></p></dd><dt class="dt-description"><span class="c010">IndexError:</span></dt><dd class="dd-description"> The index you are using
to access a list, string, or tuple is greater than
its length minus one. Immediately before the site of the error,
add a <span class="c004">print</span> statement to display
the value of the index and the length of the array.
Is the array the right size? Is the index the right value?
<a id="hevea_default1781"></a>
<a id="hevea_default1782"></a></dd></dl><p>The Python debugger (<span class="c004">pdb</span>) is useful for tracking down
exceptions because it allows you to examine the state of the
program immediately before the error. You can read
about <span class="c004">pdb</span> at <a href="https://docs.python.org/3/library/pdb.html"><span class="c004">https://docs.python.org/3/library/pdb.html</span></a>.
<a id="hevea_default1783"></a>
<a id="hevea_default1784"></a></p>
<h3 class="subsection" id="sec244">A.2.4&#XA0;&#XA0;I added so many <span class="c004">print</span> statements I get inundated with
output.</h3>
<p>
<a id="hevea_default1785"></a>
<a id="hevea_default1786"></a></p><p>One of the problems with using <span class="c004">print</span> statements for debugging
is that you can end up buried in output. There are two ways
to proceed: simplify the output or simplify the program.</p><p>To simplify the output, you can remove or comment out <span class="c004">print</span>
statements that aren&#X2019;t helping, or combine them, or format
the output so it is easier to understand.</p><p>To simplify the program, there are several things you can do. First,
scale down the problem the program is working on. For example, if you
are searching a list, search a <em>small</em> list. If the program takes
input from the user, give it the simplest input that causes the
problem.
<a id="hevea_default1787"></a></p><p>Second, clean up the program. Remove dead code and reorganize the
program to make it as easy to read as possible. For example, if you
suspect that the problem is in a deeply nested part of the program,
try rewriting that part with simpler structure. If you suspect a
large function, try splitting it into smaller functions and testing them
separately.
<a id="hevea_default1788"></a>
<a id="hevea_default1789"></a></p><p>Often the process of finding the minimal test case leads you to the
bug. If you find that a program works in one situation but not in
another, that gives you a clue about what is going on.</p><p>Similarly, rewriting a piece of code can help you find subtle
bugs. If you make a change that you think shouldn&#X2019;t affect the
program, and it does, that can tip you off.</p>
<h2 class="section" id="sec245">A.3&#XA0;&#XA0;Semantic errors</h2>
<p>In some ways, semantic errors are the hardest to debug,
because the interpreter provides no information
about what is wrong. Only you know what the program is supposed to
do.
<a id="hevea_default1790"></a>
<a id="hevea_default1791"></a></p><p>The first step is to make a connection between the program
text and the behavior you are seeing. You need a hypothesis
about what the program is actually doing. One of the things
that makes that hard is that computers run so fast.</p><p>You will often wish that you could slow the program down to human
speed, and with some debuggers you can. But the time it takes to
insert a few well-placed <span class="c004">print</span> statements is often short compared to
setting up the debugger, inserting and removing breakpoints, and
&#X201C;stepping&#X201D; the program to where the error is occurring.</p>
<h3 class="subsection" id="sec246">A.3.1&#XA0;&#XA0;My program doesn&#X2019;t work.</h3>
<p>You should ask yourself these questions:</p><ul class="itemize"><li class="li-itemize">Is there something the program was supposed to do but
which doesn&#X2019;t seem to be happening? Find the section of the code
that performs that function and make sure it is executing when
you think it should.</li><li class="li-itemize">Is something happening that shouldn&#X2019;t? Find code in
your program that performs that function and see if it is
executing when it shouldn&#X2019;t.</li><li class="li-itemize">Is a section of code producing an effect that is not
what you expected? Make sure that you understand the code in
question, especially if it involves functions or methods in
other Python modules. Read the documentation for the functions you call.
Try them out by writing simple test cases and checking the results.</li></ul><p>In order to program, you need a mental model of how
programs work. If you write a program that doesn&#X2019;t do what you expect,
often the problem is not in the program; it&#X2019;s in your mental
model.
<a id="hevea_default1792"></a>
<a id="hevea_default1793"></a></p><p>The best way to correct your mental model is to break the program
into its components (usually the functions and methods) and test
each component independently. Once you find the discrepancy
between your model and reality, you can solve the problem.</p><p>Of course, you should be building and testing components as you
develop the program. If you encounter a problem,
there should be only a small amount of new code
that is not known to be correct.</p>
<h3 class="subsection" id="sec247">A.3.2&#XA0;&#XA0;I&#X2019;ve got a big hairy expression and it doesn&#X2019;t
do what I expect.</h3>
<p>
<a id="hevea_default1794"></a>
<a id="hevea_default1795"></a></p><p>Writing complex expressions is fine as long as they are readable,
but they can be hard to debug. It is often a good idea to
break a complex expression into a series of assignments to
temporary variables.</p><p>For example:</p><pre class="verbatim">self.hands[i].addCard(self.hands[self.findNeighbor(i)].popCard())
</pre><p>
This can be rewritten as:</p><pre class="verbatim">neighbor = self.findNeighbor(i)
pickedCard = self.hands[neighbor].popCard()
self.hands[i].addCard(pickedCard)
</pre><p>
The explicit version is easier to read because the variable
names provide additional documentation, and it is easier to debug
because you can check the types of the intermediate variables
and display their values.
<a id="hevea_default1796"></a>
<a id="hevea_default1797"></a></p><p>Another problem that can occur with big expressions is
that the order of evaluation may not be what you expect.
For example, if you are translating the expression
<span class="c009">x</span>/2 &#X3C0; into Python, you might write:</p><pre class="verbatim">y = x / 2 * math.pi
</pre><p>
That is not correct because multiplication and division have
the same precedence and are evaluated from left to right.
So this expression computes <span class="c009">x</span> &#X3C0; / 2.
<a id="hevea_default1798"></a>
<a id="hevea_default1799"></a></p><p>A good way to debug expressions is to add parentheses to make
the order of evaluation explicit:</p><pre class="verbatim"> y = x / (2 * math.pi)
</pre><p>
Whenever you are not sure of the order of evaluation, use
parentheses. Not only will the program be correct (in the sense
of doing what you intended), it will also be more readable for
other people who haven&#X2019;t memorized the order of operations.</p>
<h3 class="subsection" id="sec248">A.3.3&#XA0;&#XA0;I&#X2019;ve got a function that doesn&#X2019;t return what I
expect.</h3>
<p>
<a id="hevea_default1800"></a>
<a id="hevea_default1801"></a></p><p>If you have a <span class="c004">return</span> statement with a complex expression,
you don&#X2019;t have a chance to print the result before
returning. Again, you can use a temporary variable. For
example, instead of:</p><pre class="verbatim">return self.hands[i].removeMatches()
</pre><p>
you could write:</p><pre class="verbatim">count = self.hands[i].removeMatches()
return count
</pre><p>
Now you have the opportunity to display the value of
<span class="c004">count</span> before returning.</p>
<h3 class="subsection" id="sec249">A.3.4&#XA0;&#XA0;I&#X2019;m really, really stuck and I need help.</h3>
<p>First, try getting away from the computer for a few minutes.
Computers emit waves that affect the brain, causing these
symptoms:</p><ul class="itemize"><li class="li-itemize">Frustration and rage.
<a id="hevea_default1802"></a>
<a id="hevea_default1803"></a>
<a id="hevea_default1804"></a>
<a id="hevea_default1805"></a></li><li class="li-itemize">Superstitious beliefs (&#X201C;the computer hates me&#X201D;) and
magical thinking (&#X201C;the program only works when I wear my
hat backward&#X201D;).
<a id="hevea_default1806"></a>
<a id="hevea_default1807"></a></li><li class="li-itemize">Random walk programming (the attempt to program by writing
every possible program and choosing the one that does the right
thing).
<a id="hevea_default1808"></a>
<a id="hevea_default1809"></a></li></ul><p>If you find yourself suffering from any of these symptoms, get
up and go for a walk. When you are calm, think about the program.
What is it doing? What are some possible causes of that
behavior? When was the last time you had a working program,
and what did you do next?</p><p>Sometimes it just takes time to find a bug. I often find bugs
when I am away from the computer and let my mind wander. Some
of the best places to find bugs are trains, showers, and in bed,
just before you fall asleep.</p>
<h3 class="subsection" id="sec250">A.3.5&#XA0;&#XA0;No, I really need help.</h3>
<p>It happens. Even the best programmers occasionally get stuck.
Sometimes you work on a program so long that you can&#X2019;t see the
error. You need a fresh pair of eyes.</p><p>Before you bring someone else in, make sure you are prepared.
Your program should be as simple
as possible, and you should be working on the smallest input
that causes the error. You should have <span class="c004">print</span> statements in the
appropriate places (and the output they produce should be
comprehensible). You should understand the problem well enough
to describe it concisely.</p><p>When you bring someone in to help, be sure to give
them the information they need:</p><ul class="itemize"><li class="li-itemize">If there is an error message, what is it
and what part of the program does it indicate?</li><li class="li-itemize">What was the last thing you did before this error occurred?
What were the last lines of code that you wrote, or what is
the new test case that fails?</li><li class="li-itemize">What have you tried so far, and what have you learned?</li></ul><p>When you find the bug, take a second to think about what you
could have done to find it faster. Next time you see something
similar, you will be able to find the bug more quickly.</p><p>Remember, the goal is not just to make the program
work. The goal is to learn how to make the program work.</p>
<p>
<a href="http://amzn.to/1VUYQUU">Buy this book at Amazon.com</a>

</td>

<td width=130 valign="top">

<h4>Contribute</h4>
If you would like to make a contribution to support my books,
you can use the button below and pay with PayPal.  Thank you!

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="RAAYAZ7Y48S2A">
<table>
<tr><td><input type="hidden" name="on0" value="Pay what you want!">Pay what you want:</td></tr><tr><td><select name="os0">
	<option value="Small">Small $1.00 USD</option>
	<option value="Medium">Medium $5.00 USD</option>
	<option value="Large">Large $10.00 USD</option>
	<option value="X-Large">X-Large $20.00 USD</option>
	<option value="XX-Large">XX-Large $50.00 USD</option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

  
<p>
<h4>Are you using one of our books in a class?</h4>  We'd like to know
about it.  Please consider filling out <a href="http://spreadsheets.google.com/viewform?formkey=dC0tNUZkMjBEdXVoRGljNm9FRmlTMHc6MA" onClick="javascript: pageTracker._trackPageview('/outbound/survey');">this short survey</a>.

<p>
<br>

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=2JJH4SWCAVVYSQHO">Think DSP</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491938455/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491938455&linkCode=as2&tag=greenteapre01-20&linkId=CTV7PDT7E5EGGJUM"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491938455&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491938455" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=ZY6MAYM33ZTNSCNZ">Think Java</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491929561/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491929561&linkCode=as2&tag=greenteapre01-20&linkId=PT77ANWARUNNU3UK"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491929561&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491929561" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20">Think Bayes</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449370780/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449370780&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449370780&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449370780" width="1" height="1" border="0" alt="">

<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=FJKSQ3IHEMY2F2VA">Think Python 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">


<p>
<a rel="nofollow" href="http://www.amazon.com/gp/product/1491939362/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491939362&linkCode=as2&tag=greenteapre01-20&linkId=ZZ454DLQ3IXDHNHX"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=1491939362&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491939362" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=O7WYM6H6YBYUFNWU">Think Stats 2e</a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1491907339/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1491907339&linkCode=as2&tag=greenteapre01-20&linkId=JVSYKQHYSUIEYRHL"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1491907339&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://ir-na.amazon-adsystem.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1491907339" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_tl?ie=UTF8&tag=greenteapre01-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1449314635">Think Complexity</a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">

<p>
<a href="http://www.amazon.com/gp/product/1449314635/ref=as_li_tf_il?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449314635&linkCode=as2&tag=greenteapre01-20"><img border="0" src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1449314635&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=greenteapre01-20"></a><img class="c003" src="http://www.assoc-amazon.com/e/ir?t=greenteapre01-20&l=as2&o=1&a=1449314635" width="1" height="1" border="0" alt="">


</td>
</tr>
</table>
<hr>
<a href="thinkpython2020.html"><img src="back.png" ALT="Previous"></a>
<a href="index.html"><img src="up.png" ALT="Up"></a>
<a href="thinkpython2022.html"><img src="next.png" ALT="Next"></a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.32">
<link rel="stylesheet" type="text/css" href="thinkpython2.css">
<title>Analysis of Algorithms</title>
</head>
<body>
<a href="thinkpython2021.html"><img src="back.png" ALT="Previous"></a>
